<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant Médical IA 4.0 - Nexyna Pro Max</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .container {
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            max-width: 1600px;
            width: 95%;
            margin: 20px auto;
            overflow: hidden;
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .version-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
        }

        .language-selector {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 5px;
        }

        .language-selector select {
            background: transparent;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 10px;
        }

        .cloud-status {
            position: absolute;
            top: 50px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4caf50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .main-nav {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 12px 20px;
            border: none;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-tab.active {
            background: #2196F3;
            color: white;
        }

        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr 400px;
            gap: 30px;
        }

        /* Panneau patient */
        .patient-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        .form-group label {
            font-weight: 600;
            color: #1976D2;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .patient-summary {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 13px;
        }

        /* Capteurs biométriques */
        .sensors-panel {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .sensor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .sensor-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .sensor-value {
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .sensor-trend {
            font-size: 12px;
            color: #4caf50;
        }

        /* Corps interactif */
        .body-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .body-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .body-type-btn {
            padding: 10px 20px;
            border: 2px solid #2196F3;
            background: white;
            color: #2196F3;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .body-type-btn.active {
            background: #2196F3;
            color: white;
        }

        .view-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .view-btn {
            padding: 8px 15px;
            border: 1px solid #ccc;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .view-btn.active {
            background: #4caf50;
            color: white;
        }

        .body-container {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .body-svg {
            width: 100%;
            max-width: 280px;
            height: 450px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .body-part {
            fill: #e3f2fd;
            stroke: #2196F3;
            stroke-width: 2;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .body-part:hover {
            fill: #2196F3;
            stroke: #1976D2;
            stroke-width: 3;
            filter: drop-shadow(0 5px 15px rgba(33, 150, 243, 0.4));
        }

        .body-part.selected {
            fill: #f44336;
            stroke: #d32f2f;
            stroke-width: 3;
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pain-scale {
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .pain-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to right, #4caf50, #ffeb3b, #ff9800, #f44336);
            outline: none;
            margin: 15px 0;
        }

        .pain-display {
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            margin: 10px 0;
        }

        /* Panneau symptômes */
        .symptoms-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .voice-controls {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .voice-btn {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 10px 0;
        }

        .voice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .voice-btn.recording {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            animation: recordingPulse 1s ease-in-out infinite;
        }

        @keyframes recordingPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .quick-symptoms {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .symptom-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .symptom-tag {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .symptom-tag:hover {
            background: #2196F3;
            color: white;
        }

        .symptom-tag.selected {
            background: #4caf50;
            color: white;
        }

        .question-input {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .question-input textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 14px;
            min-height: 120px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .question-input textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .analyze-btn {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(33, 150, 243, 0.3);
        }

        /* Base de données médicale */
        .medical-db {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-box input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
        }

        .search-box button {
            padding: 10px 20px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .medical-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .medical-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
        }

        /* Téléconsultation */
        .teleconsult-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .video-container {
            background: #000;
            border-radius: 10px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }

        .video-placeholder {
            color: white;
            text-align: center;
        }

        .video-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .video-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-btn.start { background: #4caf50; color: white; }
        .video-btn.stop { background: #f44336; color: white; }
        .video-btn.mute { background: #ff9800; color: white; }

        /* Suivi temporal */
        .timeline-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .timeline {
            position: relative;
            margin: 20px 0;
        }

        .timeline-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: #2196F3;
            border-radius: 50%;
        }

        .chart-container {
            height: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        /* IA avancée */
        .ai-panel {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .ai-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .ai-indicator {
            width: 12px;
            height: 12px;
            background: #4caf50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .confidence-meter {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #f44336, #ff9800, #4caf50);
            transition: width 0.3s ease;
        }

        /* Cloud sync */
        .cloud-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .sync-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .sync-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }

        /* Section réponse */
        .response-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 5px solid #2196F3;
            display: none;
            grid-column: 1 / -1;
        }

        .response-section.show {
            display: block;
            animation: expandIn 0.6s ease-out;
        }

        @keyframes expandIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .emergency-alert {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            animation: emergencyBlink 1s ease-in-out infinite;
        }

        @keyframes emergencyBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2196F3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .disclaimer {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 1px solid #ffeaa7;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            font-size: 14px;
            color: #856404;
            grid-column: 1 / -1;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                width: calc(100% - 20px);
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <!-- Particules d'arrière-plan -->
    <div class="particles" id="particles"></div>

    <div class="container">
        <div class="header">
            <!-- Sélecteur de langue -->
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="fr">🇫🇷 Français</option>
                    <option value="en">🇬🇧 English</option>
                    <option value="es">🇪🇸 Español</option>
                    <option value="de">🇩🇪 Deutsch</option>
                    <option value="it">🇮🇹 Italiano</option>
                    <option value="ar">🇸🇦 العربية</option>
                </select>
            </div>

            <!-- Statut cloud -->
            <div class="cloud-status" id="cloudStatus">
                <div class="status-indicator"></div>
                <span data-i18n="cloud.connected">Cloud connecté</span>
            </div>

            <div class="version-badge">v4.0 ULTIMATE</div>
            <h1 data-i18n="header.title">🏥 Assistant Médical IA Ultimate</h1>
            <p data-i18n="header.subtitle">Plateforme médicale intelligente avec IA, téléconsultation et capteurs IoT</p>
        </div>

        <!-- Navigation par onglets -->
        <div class="main-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="consultation">
                    🩺 <span data-i18n="nav.consultation">Consultation</span>
                </button>
                <button class="nav-tab" data-tab="database">
                    📚 <span data-i18n="nav.database">Base Médicale</span>
                </button>
                <button class="nav-tab" data-tab="teleconsult">
                    📹 <span data-i18n="nav.teleconsult">Téléconsultation</span>
                </button>
                <button class="nav-tab" data-tab="timeline">
                    📈 <span data-i18n="nav.timeline">Suivi Temporal</span>
                </button>
                <button class="nav-tab" data-tab="sensors">
                    📱 <span data-i18n="nav.sensors">Capteurs IoT</span>
                </button>
                <button class="nav-tab" data-tab="ai">
                    🤖 <span data-i18n="nav.ai">IA Avancée</span>
                </button>
                <button class="nav-tab" data-tab="cloud">
                    ☁️ <span data-i18n="nav.cloud">Cloud Sync</span>
                </button>
            </div>
        </div>

        <!-- Onglet Consultation -->
        <div class="tab-content active" id="consultation">
            <div class="main-content">
                <!-- Panneau Patient -->
                <div class="patient-panel">
                    <h3 style="color: #1976D2; margin-bottom: 20px;" data-i18n="patient.title">👤 Informations Patient</h3>
                    <form class="patient-form" id="patientForm">
                        <div class="form-group">
                            <label for="firstName" data-i18n="patient.firstName">Prénom *</label>
                            <input type="text" id="firstName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName" data-i18n="patient.lastName">Nom *</label>
                            <input type="text" id="lastName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="birthDate" data-i18n="patient.birthDate">Date de naissance *</label>
                            <input type="date" id="birthDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="gender" data-i18n="patient.gender">Sexe *</label>
                            <select id="gender" required>
                                <option value="" data-i18n="patient.selectGender">Sélectionner</option>
                                <option value="homme" data-i18n="patient.male">Homme</option>
                                <option value="femme" data-i18n="patient.female">Femme</option>
                                <option value="enfant-garcon" data-i18n="patient.childBoy">Enfant (Garçon)</option>
                                <option value="enfant-fille" data-i18n="patient.childGirl">Enfant (Fille)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="weight" data-i18n="patient.weight">Poids (kg)</label>
                            <input type="number" id="weight" min="1" max="300">
                        </div>
                        
                        <div class="form-group">
                            <label for="height" data-i18n="patient.height">Taille (cm)</label>
                            <input type="number" id="height" min="50" max="250">
                        </div>
                        
                        <div class="form-group">
                            <label for="allergies" data-i18n="patient.allergies">Allergies connues</label>
                            <textarea id="allergies" rows="2" data-i18n-placeholder="patient.allergiesPlaceholder"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="medications" data-i18n="patient.medications">Traitements actuels</label>
                            <textarea id="medications" rows="2" data-i18n-placeholder="patient.medicationsPlaceholder"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="medicalHistory" data-i18n="patient.history">Antécédents médicaux</label>
                            <textarea id="medicalHistory" rows="3" data-i18n-placeholder="patient.historyPlaceholder"></textarea>
                        </div>
                    </form>
                    
                    <div class="patient-summary" id="patientSummary">
                        <strong data-i18n="patient.summary">📋 Résumé:</strong>
                        <div id="summaryContent" data-i18n="patient.fillInfo">Remplissez les informations ci-dessus</div>
                    </div>

                    <!-- Capteurs biométriques -->
                    <div class="sensors-panel">
                        <h4 style="color: #1976D2; margin-bottom: 10px;" data-i18n="sensors.biometric">📱 Capteurs Biométriques</h4>
                        <div class="sensor-grid">
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.heartRate">Rythme Cardiaque</div>
                                <div class="sensor-value" id="heartRate">--</div>
                                <div class="sensor-trend" id="heartTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.temperature">Température</div>
                                <div class="sensor-value" id="temperature">--</div>
                                <div class="sensor-trend" id="tempTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.pressure">Tension</div>
                                <div class="sensor-value" id="bloodPressure">--</div>
                                <div class="sensor-trend" id="pressureTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.oxygen">SpO2</div>
                                <div class="sensor-value" id="oxygenSat">--</div>
                                <div class="sensor-trend" id="oxygenTrend">--</div>
                            </div>
                        </div>
                        <button class="voice-btn" onclick="connectSensors()" data-i18n="sensors.connect">
                            📱 Connecter capteurs
                        </button>
                    </div>
                </div>

                <!-- Panneau Corps -->
                <div class="body-panel">
                    <h3 style="color: #1976D2; margin-bottom: 20px;" data-i18n="body.title">🫁 Localisation des symptômes</h3>
                    
                    <!-- Contrôles type de corps -->
                    <div class="body-controls">
                        <button class="body-type-btn active" data-type="homme" data-i18n="body.man">👨 Homme</button>
                        <button class="body-type-btn" data-type="femme" data-i18n="body.woman">👩 Femme</button>
                        <button class="body-type-btn" data-type="enfant" data-i18n="body.child">🧒 Enfant</button>
                    </div>
                    
                    <!-- Contrôles de vue -->
                    <div class="view-controls">
                        <button class="view-btn active" data-view="face" data-i18n="body.front">Face</button>
                        <button class="view-btn" data-view="profile" data-i18n="body.side">Profil</button>
                        <button class="view-btn" data-view="back" data-i18n="body.back">Dos</button>
                    </div>
                    
                    <!-- Container du corps -->
                    <div class="body-container">
                        <svg class="body-svg" viewBox="0 0 300 450" id="bodySvg">
                            <!-- Corps Homme Face -->
                            <g id="homme-face" class="body-view">
                                <!-- Tête -->
                                <ellipse class="body-part" data-part="tête" cx="150" cy="50" rx="35" ry="40" />
                                <!-- Cou -->
                                <rect class="body-part" data-part="cou" x="135" y="90" width="30" height="25" />
                                <!-- Épaules -->
                                <ellipse class="body-part" data-part="épaule gauche" cx="100" cy="130" rx="25" ry="15" />
                                <ellipse class="body-part" data-part="épaule droite" cx="200" cy="130" rx="25" ry="15" />
                                <!-- Torse -->
                                <rect class="body-part" data-part="poitrine" x="110" y="115" width="80" height="80" />
                                <!-- Bras -->
                                <rect class="body-part" data-part="bras gauche" x="70" y="140" width="25" height="80" />
                                <rect class="body-part" data-part="bras droit" x="205" y="140" width="25" height="80" />
                                <!-- Avant-bras -->
                                <rect class="body-part" data-part="avant-bras gauche" x="72" y="220" width="21" height="70" />
                                <rect class="body-part" data-part="avant-bras droit" x="207" y="220" width="21" height="70" />
                                <!-- Mains -->
                                <ellipse class="body-part" data-part="main gauche" cx="82" cy="305" rx="12" ry="18" />
                                <ellipse class="body-part" data-part="main droite" cx="218" cy="305" rx="12" ry="18" />
                                <!-- Abdomen -->
                                <rect class="body-part" data-part="abdomen" x="115" y="195" width="70" height="70" />
                                <!-- Hanches -->
                                <rect class="body-part" data-part="bassin" x="120" y="265" width="60" height="40" />
                                <!-- Cuisses -->
                                <rect class="body-part" data-part="cuisse gauche" x="125" y="305" width="25" height="80" />
                                <rect class="body-part" data-part="cuisse droite" x="150" y="305" width="25" height="80" />
                                <!-- Genoux -->
                                <circle class="body-part" data-part="genou gauche" cx="137" cy="385" r="12" />
                                <circle class="body-part" data-part="genou droit" cx="162" cy="385" r="12" />
                                <!-- Jambes -->
                                <rect class="body-part" data-part="jambe gauche" x="127" y="397" width="20" height="75" />
                                <rect class="body-part" data-part="jambe droite" x="153" y="397" width="20" height="75" />
                                <!-- Pieds -->
                                <ellipse class="body-part" data-part="pied gauche" cx="137" cy="485" rx="18" ry="12" />
                                <ellipse class="body-part" data-part="pied droit" cx="162" cy="485" rx="18" ry="12" />
                            </g>
                            
                            <!-- Corps Homme Dos -->
                            <g id="homme-back" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="crâne" cx="150" cy="50" rx="35" ry="40" />
                                <rect class="body-part" data-part="nuque" x="135" y="90" width="30" height="25" />
                                <ellipse class="body-part" data-part="épaule gauche" cx="100" cy="130" rx="25" ry="15" />
                                <ellipse class="body-part" data-part="épaule droite" cx="200" cy="130" rx="25" ry="15" />
                                <rect class="body-part" data-part="dos haut" x="110" y="115" width="80" height="50" />
                                <rect class="body-part" data-part="dos bas" x="115" y="165" width="70" height="50" />
                                <rect class="body-part" data-part="lombaires" x="120" y="215" width="60" height="40" />
                                <rect class="body-part" data-part="fessier" x="120" y="255" width="60" height="50" />
                                <rect class="body-part" data-part="cuisse arrière gauche" x="125" y="305" width="25" height="80" />
                                <rect class="body-part" data-part="cuisse arrière droite" x="150" y="305" width="25" height="80" />
                                <rect class="body-part" data-part="mollet gauche" x="127" y="397" width="20" height="75" />
                                <rect class="body-part" data-part="mollet droit" x="153" y="397" width="20" height="75" />
                            </g>

                            <!-- Corps Femme Face -->
                            <g id="femme-face" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="tête" cx="150" cy="50" rx="32" ry="38" />
                                <rect class="body-part" data-part="cou" x="138" y="88" width="24" height="22" />
                                <ellipse class="body-part" data-part="épaule gauche" cx="105" cy="125" rx="22" ry="12" />
                                <ellipse class="body-part" data-part="épaule droite" cx="195" cy="125" rx="22" ry="12" />
                                <rect class="body-part" data-part="poitrine" x="115" y="110" width="70" height="75" />
                                <rect class="body-part" data-part="bras gauche" x="75" y="135" width="22" height="75" />
                                <rect class="body-part" data-part="bras droit" x="203" y="135" width="22" height="75" />
                                <rect class="body-part" data-part="avant-bras gauche" x="77" y="210" width="18" height="65" />
                                <rect class="body-part" data-part="avant-bras droit" x="205" y="210" width="18" height="65" />
                                <ellipse class="body-part" data-part="main gauche" cx="86" cy="285" rx="10" ry="15" />
                                <ellipse class="body-part" data-part="main droite" cx="214" cy="285" rx="10" ry="15" />
                                <rect class="body-part" data-part="abdomen" x="120" y="185" width="60" height="65" />
                                <ellipse class="body-part" data-part="bassin" cx="150" cy="275" rx="35" ry="25" />
                                <rect class="body-part" data-part="cuisse gauche" x="130" y="300" width="22" height="85" />
                                <rect class="body-part" data-part="cuisse droite" x="148" y="300" width="22" height="85" />
                                <circle class="body-part" data-part="genou gauche" cx="141" cy="385" r="10" />
                                <circle class="body-part" data-part="genou droit" cx="159" cy="385" r="10" />
                                <rect class="body-part" data-part="jambe gauche" x="133" y="395" width="16" height="75" />
                                <rect class="body-part" data-part="jambe droite" x="151" y="395" width="16" height="75" />
                                <ellipse class="body-part" data-part="pied gauche" cx="141" cy="480" rx="15" ry="10" />
                                <ellipse class="body-part" data-part="pied droit" cx="159" cy="480" rx="15" ry="10" />
                            </g>
                            
                            <!-- Corps Enfant Face -->
                            <g id="enfant-face" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="tête" cx="150" cy="60" rx="40" ry="45" />
                                <rect class="body-part" data-part="cou" x="140" y="105" width="20" height="15" />
                                <ellipse class="body-part" data-part="épaule gauche" cx="110" cy="135" rx="20" ry="10" />
                                <ellipse class="body-part" data-part="épaule droite" cx="190" cy="135" rx="20" ry="10" />
                                <rect class="body-part" data-part="poitrine" x="120" y="120" width="60" height="60" />
                                <rect class="body-part" data-part="bras gauche" x="85" y="140" width="18" height="60" />
                                <rect class="body-part" data-part="bras droit" x="197" y="140" width="18" height="60" />
                                <rect class="body-part" data-part="avant-bras gauche" x="87" y="200" width="14" height="50" />
                                <rect class="body-part" data-part="avant-bras droit" x="199" y="200" width="14" height="50" />
                                <ellipse class="body-part" data-part="main gauche" cx="94" cy="260" rx="8" ry="12" />
                                <ellipse class="body-part" data-part="main droite" cx="206" cy="260" rx="8" ry="12" />
                                <rect class="body-part" data-part="abdomen" x="125" y="180" width="50" height="50" />
                                <rect class="body-part" data-part="bassin" x="130" y="230" width="40" height="30" />
                                <rect class="body-part" data-part="cuisse gauche" x="135" y="260" width="18" height="70" />
                                <rect class="body-part" data-part="cuisse droite" x="147" y="260" width="18" height="70" />
                                <circle class="body-part" data-part="genou gauche" cx="144" cy="330" r="8" />
                                <circle class="body-part" data-part="genou droit" cx="156" cy="330" r="8" />
                                <rect class="body-part" data-part="jambe gauche" x="138" y="338" width="12" height="60" />
                                <rect class="body-part" data-part="jambe droite" x="150" y="338" width="12" height="60" />
                                <ellipse class="body-part" data-part="pied gauche" cx="144" cy="408" rx="12" ry="8" />
                                <ellipse class="body-part" data-part="pied droit" cx="156" cy="408" rx="12" ry="8" />
                            </g>
                        </svg>
                    </div>
                    
                    <div id="selectedPart" style="margin-top: 15px; font-weight: bold; color: #1976D2;"></div>
                    
                    <!-- Échelle de douleur -->
                    <div class="pain-scale">
                        <h4 style="color: #1976D2; margin-bottom: 10px;" data-i18n="pain.intensity">📊 Intensité de la douleur</h4>
                        <input type="range" class="pain-slider" id="painScale" min="0" max="10" value="0">
                        <div class="pain-display" id="painDisplay">😊 0/10</div>
                        <div style="display: flex; justify-content: space-between; font-size: 11px; color: #666;">
                            <span data-i18n="pain.none">Aucune</span>
                            <span data-i18n="pain.mild">Légère</span>
                            <span data-i18n="pain.moderate">Modérée</span>
                            <span data-i18n="pain.severe">Sévère</span>
                            <span data-i18n="pain.extreme">Extrême</span>
                        </div>
                    </div>
                </div>

                <!-- Panneau Symptômes -->
                <div class="symptoms-panel">
                    <!-- Reconnaissance vocale -->
                    <div class="voice-controls">
                        <h4 style="color: #1976D2; margin-bottom: 15px;" data-i18n="voice.title">🎤 Reconnaissance vocale</h4>
                        <button class="voice-btn" id="voiceBtn">
                            <span id="voiceText" data-i18n="voice.click">🎤 Cliquez et décrivez vos symptômes</span>
                        </button>
                        <div id="voiceResult" style="margin-top: 10px; font-style: italic; color: #666; font-size: 13px;"></div>
                    </div>

                    <!-- Symptômes rapides -->
                    <div class="quick-symptoms">
                        <h4 style="color: #1976D2; margin-bottom: 10px;" data-i18n="symptoms.quick">⚡ Symptômes fréquents</h4>
                        <div class="symptom-tags">
                            <span class="symptom-tag" data-symptom="mal de tête" data-i18n="symptoms.headache">Mal de tête</span>
                            <span class="symptom-tag" data-symptom="fièvre" data-i18n="symptoms.fever">Fièvre</span>
                            <span class="symptom-tag" data-symptom="nausée" data-i18n="symptoms.nausea">Nausée</span>
                            <span class="symptom-tag" data-symptom="fatigue" data-i18n="symptoms.fatigue">Fatigue</span>
                            <span class="symptom-tag" data-symptom="toux" data-i18n="symptoms.cough">Toux</span>
                            <span class="symptom-tag" data-symptom="douleur musculaire" data-i18n="symptoms.muscle">Douleur musculaire</span>
                            <span class="symptom-tag" data-symptom="vertige" data-i18n="symptoms.dizziness">Vertige</span>
                            <span class="symptom-tag" data-symptom="insomnie" data-i18n="symptoms.insomnia">Insomnie</span>
                            <span class="symptom-tag" data-symptom="douleur abdominale" data-i18n="symptoms.abdominal">Douleur abdominale</span>
                            <span class="symptom-tag" data-symptom="difficulté respiration" data-i18n="symptoms.breathing">Difficulté à respirer</span>
                        </div>
                    </div>

                    <!-- IA Avancée -->
                    <div class="ai-panel">
                        <div class="ai-status">
                            <div class="ai-indicator"></div>
                            <span data-i18n="ai.status">IA Médicale Active</span>
                        </div>
                        <div data-i18n="ai.confidence">Niveau de confiance:</div>
                        <div class="confidence-meter">
                            <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
                        </div>
                        <div style="font-size: 12px; color: #666;" id="aiInsight" data-i18n="ai.insight">En attente d'analyse...</div>
                    </div>

                    <!-- Description détaillée -->
                    <div class="question-input">
                        <h4 style="color: #1976D2; margin-bottom: 15px;" data-i18n="description.title">✍️ Description détaillée</h4>
                        <textarea id="questionInput" data-i18n-placeholder="description.placeholder"></textarea>
                        
                        <button class="analyze-btn" id="analyzeBtn" data-i18n="analyze.button">
                            🔍 Lancer l'analyse complète
                        </button>
                    </div>
                </div>

                <!-- Loading -->
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p id="loadingText" data-i18n="loading.text">Analyse en cours avec IA avancée...</p>
                </div>

                <!-- Section Réponse -->
                <div class="response-section" id="responseSection">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 20px; font-size: 20px;">🩺</div>
                        <h3 data-i18n="response.title">Diagnostic IA - Rapport Complet</h3>
                        <div style="margin-left: auto;">
                            <button class="sync-btn" onclick="exportToPDF()" data-i18n="export.pdf">📄 Export PDF</button>
                            <button class="sync-btn" onclick="saveToHistory()" data-i18n="export.save">💾 Sauvegarder</button>
                        </div>
                    </div>
                    <div id="responseContent"></div>
                </div>

                <!-- Disclaimer -->
                <div class="disclaimer">
                    <strong data-i18n="disclaimer.title">⚠️ Avertissement médical important :</strong> 
                    <span data-i18n="disclaimer.text">Cet assistant utilise une intelligence artificielle avancée pour analyser vos symptômes et fournir des informations médicales.</span>
                </div>
            </div>
        </div>

        <!-- Onglet Base de Données Médicale -->
        <div class="tab-content" id="database">
            <div class="medical-db">
                <h3 data-i18n="database.title">📚 Base de Données Médicale Mondiale</h3>
                <p data-i18n="database.description">Accédez à plus de 500 000 références médicales, études cliniques et protocoles de traitement</p>
                
                <div class="search-box">
                    <input type="text" id="medicalSearch" data-i18n-placeholder="database.searchPlaceholder" placeholder="Rechercher une maladie, symptôme, médicament...">
                    <button onclick="searchMedicalDB()" data-i18n="database.search">🔍 Rechercher</button>
                </div>
                
                <div class="medical-results" id="medicalResults">
                    <div class="medical-item">
                        <h4>💡 Suggestions de recherche</h4>
                        <p>• Hypertension artérielle - causes et traitements</p>
                        <p>• Diabète type 2 - protocoles de suivi</p>
                        <p>• Migraine - thérapies innovantes</p>
                        <p>• Dépression - approches thérapeutiques</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Téléconsultation -->
        <div class="tab-content" id="teleconsult">
            <div class="teleconsult-panel">
                <h3 data-i18n="teleconsult.title">📹 Téléconsultation Médicale</h3>
                <p data-i18n="teleconsult.description">Consultez un médecin en temps réel par vidéoconférence sécurisée</p>
                
                <div class="video-container" id="videoContainer">
                    <div class="video-placeholder">
                        <h3 data-i18n="teleconsult.waiting">📹 En attente de connexion</h3>
                        <p data-i18n="teleconsult.instructions">Cliquez sur "Démarrer" pour lancer la téléconsultation</p>
                    </div>
                </div>
                
                <div class="video-controls">
                    <button class="video-btn start" onclick="startVideoCall()" data-i18n="teleconsult.start">📹 Démarrer</button>
                    <button class="video-btn mute" onclick="toggleMute()" data-i18n="teleconsult.mute">🎤 Mute</button>
                    <button class="video-btn stop" onclick="stopVideoCall()" data-i18n="teleconsult.stop">❌ Arrêter</button>
                </div>
                
                <div style="margin-top: 30px;">
                    <h4 data-i18n="teleconsult.available">👨‍⚕️ Médecins disponibles</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div class="medical-item">
                            <h5>Dr. Marie Dubois</h5>
                            <p>Médecin généraliste • 15 ans d'expérience</p>
                            <p>🟢 Disponible maintenant</p>
                        </div>
                        <div class="medical-item">
                            <h5>Dr. Jean Martin</h5>
                            <p>Cardiologue • 20 ans d'expérience</p>
                            <p>🟡 Disponible dans 15 min</p>
                        </div>
                        <div class="medical-item">
                            <h5>Dr. Sarah Chen</h5>
                            <p>Pédiatre • 12 ans d'expérience</p>
                            <p>🟢 Disponible maintenant</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Suivi Temporal -->
        <div class="tab-content" id="timeline">
            <div class="timeline-container">
                <h3 data-i18n="timeline.title">📈 Suivi Temporal des Symptômes</h3>
                <p data-i18n="timeline.description">Suivez l'évolution de vos symptômes et traitements dans le temps</p>
                
                <div class="chart-container">
                    <canvas id="symptomsChart" width="400" height="200"></canvas>
                </div>
                
                <div class="timeline" id="symptomsTimeline">
                    <div class="timeline-item">
                        <h5>Aujourd'hui - 14:30</h5>
                        <p><strong>Symptômes:</strong> Mal de tête (7/10), Fatigue</p>
                        <p><strong>Action:</strong> Prise de paracétamol 1g</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>Hier - 09:00</h5>
                        <p><strong>Symptômes:</strong> Légère fatigue (3/10)</p>
                        <p><strong>Action:</strong> Repos, hydratation</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>Il y a 3 jours - 16:45</h5>
                        <p><strong>Consultation:</strong> Dr. Martin</p>
                        <p><strong>Diagnostic:</strong> Syndrome viral probable</p>
                        <p><strong>Traitement:</strong> Repos, paracétamol si besoin</p>
                    </div>
                </div>
                
                <button class="analyze-btn" onclick="addSymptomEntry()" data-i18n="timeline.add">
                    ➕ Ajouter une entrée
                </button>
            </div>
        </div>

        <!-- Onglet Capteurs IoT -->
        <div class="tab-content" id="sensors">
            <div class="main-content">
                <div>
                    <h3 data-i18n="sensors.title">📱 Intégration Capteurs IoT</h3>
                    <p data-i18n="sensors.description">Connectez vos appareils de santé connectés pour un suivi en temps réel</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>📱 Apple Watch</h4>
                            <p>Rythme cardiaque, SpO2, ECG</p>
                            <div id="appleWatchStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectAppleWatch()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>🌡️ Thermomètre Intelligent</h4>
                            <p>Température corporelle continue</p>
                            <div id="thermometerStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectThermometer()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>🩺 Tensiomètre Connected</h4>
                            <p>Tension artérielle automatique</p>
                            <div id="bpMonitorStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectBPMonitor()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>💊 Pilulier Intelligent</h4>
                            <p>Suivi des prises médicamenteuses</p>
                            <div id="pillboxStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectPillbox()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>😴 Capteur de Sommeil</h4>
                            <p>Qualité et phases du sommeil</p>
                            <div id="sleepSensorStatus" style="color: #4caf50;">🟢 Connecté</div>
                            <button class="voice-btn" onclick="viewSleepData()" style="margin-top: 15px;">Voir données</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>🏃 Tracker d'Activité</h4>
                            <p>Pas, calories, activité physique</p>
                            <div id="activityTrackerStatus" style="color: #4caf50;">🟢 Connecté</div>
                            <button class="voice-btn" onclick="viewActivityData()" style="margin-top: 15px;">Voir données</button>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <h4 data-i18n="sensors.realtime">📊 Données en Temps Réel</h4>
                    <div class="chart-container">
                        <canvas id="realtimeChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet IA Avancée -->
        <div class="tab-content" id="ai">
            <div class="ai-panel" style="margin: 0;">
                <h3 data-i18n="ai.title">🤖 Intelligence Artificielle Médicale Avancée</h3>
                <p data-i18n="ai.subtitle">Analyse prédictive, apprentissage automatique et diagnostic assisté</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                    <div style="background: white; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="ai.ml.title">🧠 Machine Learning</h4>
                        <p data-i18n="ai.ml.description">Analyse de patterns basée sur 2M+ cas médicaux</p>
                        
                        <div style="margin: 20px 0;">
                            <div data-i18n="ai.ml.accuracy">Précision diagnostique:</div>
                            <div class="confidence-meter">
                                <div class="confidence-fill" style="width: 94%"></div>
                            </div>
                            <div style="text-align: center; font-weight: bold; color: #4caf50;">94.2%</div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 data-i18n="ai.ml.training">🔄 Entraînement Continu</h5>
                            <p style="font-size: 13px;" data-i18n="ai.ml.update">Dernière mise à jour: Il y a 2 heures</p>
                            <p style="font-size: 13px;" data-i18n="ai.ml.cases">Nouveaux cas analysés: 1,247</p>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="ai.prediction.title">🔮 Analyse Prédictive</h4>
                        <p data-i18n="ai.prediction.description">Prédiction de l'évolution des pathologies</p>
                        
                        <div style="margin: 20px 0;">
                            <div data-i18n="ai.prediction.risk">Évaluation des risques:</div>
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 8px; margin: 10px 0;">
                                <div style="color: #4caf50; font-weight: bold;" data-i18n="ai.prediction.low">🟢 Risque Faible</div>
                                <div style="font-size: 13px;" data-i18n="ai.prediction.details">Probabilité de complication: 12%</div>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 data-i18n="ai.prediction.recommendations">💡 Recommandations IA</h5>
                            <ul style="font-size: 13px; margin-left: 20px;">
                                <li data-i18n="ai.prediction.rec1">Surveillance symptômes 48h</li>
                                <li data-i18n="ai.prediction.rec2">Consultation si aggravation</li>
                                <li data-i18n="ai.prediction.rec3">Repos et hydratation</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div style="background: white; padding: 25px; border-radius: 15px; margin-top: 30px;">
                    <h4 data-i18n="ai.neural.title">🕸️ Réseau de Neurones Spécialisé</h4>
                    <p data-i18n="ai.neural.description">Architecture deep learning optimisée pour le diagnostic médical</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">🧠</div>
                            <div style="font-weight: bold;">Neurologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.neurology">Céphalées, migraines, épilepsie</div>
                        </div>
                        
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">❤️</div>
                            <div style="font-weight: bold;">Cardiologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.cardiology">Rythme, tension, pathologies</div>
                        </div>
                        
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">🫁</div>
                            <div style="font-weight: bold;">Pneumologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.pneumology">Toux, dyspnée, asthme</div>
                        </div>
                        
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">🍽️</div>
                            <div style="font-weight: bold;">Gastro-entérologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.gastro">Digestion, douleurs abdominales</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Cloud Sync -->
        <div class="tab-content" id="cloud">
            <div class="cloud-panel">
                <h3 data-i18n="cloud.title">☁️ Synchronisation Cloud Sécurisée</h3>
                <p data-i18n="cloud.description">Sauvegarde automatique et accès multi-plateforme à vos données médicales</p>
                
                <div class="sync-status">
                    <div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="status-indicator"></div>
                            <span data-i18n="cloud.status">Statut: Synchronisé</span>
                        </div>
                        <div style="font-size: 13px; color: #666; margin-top: 5px;" data-i18n="cloud.lastSync">
                            Dernière sync: Il y a 2 minutes
                        </div>
                    </div>
                    <button class="sync-btn" onclick="manualSync()" data-i18n="cloud.sync">🔄 Synchroniser</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="cloud.storage.title">💾 Stockage</h4>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between;">
                                <span data-i18n="cloud.storage.used">Utilisé:</span>
                                <span>2.3 GB / 100 GB</span>
                            </div>
                            <div class="confidence-meter" style="margin: 10px 0;">
                                <div class="confidence-fill" style="width: 2.3%; background: #4caf50;"></div>
                            </div>
                        </div>
                        
                        <div style="font-size: 13px; color: #666;">
                            <p data-i18n="cloud.storage.consultations">• 127 consultations</p>
                            <p data-i18n="cloud.storage.images">• 45 images médicales</p>
                            <p data-i18n="cloud.storage.reports">• 89 rapports PDF</p>
                            <p data-i18n="cloud.storage.sensors">• 15,432 données capteurs</p>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="cloud.security.title">🔒 Sécurité</h4>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span data-i18n="cloud.security.encryption">Chiffrement AES-256</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span data-i18n="cloud.security.backup">Sauvegarde redondante</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span data-i18n="cloud.security.gdpr">Conformité RGPD</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span data-i18n="cloud.security.iso">Certification ISO 27001</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: white; padding: 25px; border-radius: 15px; margin-top: 30px;">
                    <h4 data-i18n="cloud.devices.title">📱 Appareils Connectés</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">💻</div>
                            <div>
                                <div style="font-weight: bold;">MacBook Pro</div>
                                <div style="font-size: 13px; color: #666;" data-i18n="cloud.devices.laptop">Actuel • Paris, France</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">📱</div>
                            <div>
                                <div style="font-weight: bold;">iPhone 14 Pro</div>
                                <div style="font-size: 13px; color: #666;" data-i18n="cloud.devices.phone">Il y a 5 min • Paris, France</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">⌚</div>
                            <div>
                                <div style="font-weight: bold;">Apple Watch</div>
                                <div style="font-size: 13px; color: #666;" data-i18n="cloud.devices.watch">Sync continue • Connecté</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Système de traduction multilingue
        const translations = {
            fr: {
                'header.title': '🏥 Assistant Médical IA Ultimate',
                'header.subtitle': 'Plateforme médicale intelligente avec IA, téléconsultation et capteurs IoT',
                'cloud.connected': 'Cloud connecté',
                'nav.consultation': 'Consultation',
                'nav.database': 'Base Médicale',
                'nav.teleconsult': 'Téléconsultation',
                'nav.timeline': 'Suivi Temporal',
                'nav.sensors': 'Capteurs IoT',
                'nav.ai': 'IA Avancée',
                'nav.cloud': 'Cloud Sync',
                'patient.title': '👤 Informations Patient',
                'patient.firstName': 'Prénom *',
                'patient.lastName': 'Nom *',
                'patient.birthDate': 'Date de naissance *',
                'patient.gender': 'Sexe *',
                'patient.selectGender': 'Sélectionner',
                'patient.male': 'Homme',
                'patient.female': 'Femme',
                'patient.childBoy': 'Enfant (Garçon)',
                'patient.childGirl': 'Enfant (Fille)',
                'patient.weight': 'Poids (kg)',
                'patient.height': 'Taille (cm)',
                'patient.allergies': 'Allergies connues',
                'patient.medications': 'Traitements actuels',
                'patient.history': 'Antécédents médicaux',
                'patient.summary': '📋 Résumé:',
                'patient.fillInfo': 'Remplissez les informations ci-dessus',
                'sensors.biometric': '📱 Capteurs Biométriques',
                'sensors.heartRate': 'Rythme Cardiaque',
                'sensors.temperature': 'Température',
                'sensors.pressure': 'Tension',
                'sensors.oxygen': 'SpO2',
                'sensors.connect': '📱 Connecter capteurs',
                'body.title': '🫁 Localisation des symptômes',
                'body.man': '👨 Homme',
                'body.woman': '👩 Femme',
                'body.child': '🧒 Enfant',
                'body.front': 'Face',
                'body.side': 'Profil',
                'body.back': 'Dos',
                'pain.intensity': '📊 Intensité de la douleur',
                'pain.none': 'Aucune',
                'pain.mild': 'Légère',
                'pain.moderate': 'Modérée',
                'pain.severe': 'Sévère',
                'pain.extreme': 'Extrême',
                'voice.title': '🎤 Reconnaissance vocale',
                'voice.click': '🎤 Cliquez et décrivez vos symptômes',
                'symptoms.quick': '⚡ Symptômes fréquents',
                'symptoms.headache': 'Mal de tête',
                'symptoms.fever': 'Fièvre',
                'symptoms.nausea': 'Nausée',
                'symptoms.fatigue': 'Fatigue',
                'symptoms.cough': 'Toux',
                'symptoms.muscle': 'Douleur musculaire',
                'symptoms.dizziness': 'Vertige',
                'symptoms.insomnia': 'Insomnie',
                'symptoms.abdominal': 'Douleur abdominale',
                'symptoms.breathing': 'Difficulté à respirer',
                'ai.status': 'IA Médicale Active',
                'ai.confidence': 'Niveau de confiance:',
                'ai.insight': 'En attente d\'analyse...',
                'description.title': '✍️ Description détaillée',
                'description.placeholder': 'Décrivez précisément vos symptômes, leur début, leur évolution...',
                'analyze.button': '🔍 Lancer l\'analyse complète',
                'loading.text': 'Analyse en cours avec IA avancée...',
                'response.title': 'Diagnostic IA - Rapport Complet',
                'export.pdf': '📄 Export PDF',
                'export.save': '💾 Sauvegarder',
                'disclaimer.title': '⚠️ Avertissement médical important :',
                'disclaimer.text': 'Cet assistant utilise une intelligence artificielle avancée pour analyser vos symptômes et fournir des informations médicales.',
                // Ajout des autres traductions...
            },
            en: {
                'header.title': '🏥 Ultimate Medical AI Assistant',
                'header.subtitle': 'Intelligent medical platform with AI, telemedicine and IoT sensors',
                'cloud.connected': 'Cloud connected',
                'nav.consultation': 'Consultation',
                'nav.database': 'Medical Database',
                'nav.teleconsult': 'Telemedicine',
                'nav.timeline': 'Timeline Tracking',
                'nav.sensors': 'IoT Sensors',
                'nav.ai': 'Advanced AI',
                'nav.cloud': 'Cloud Sync',
                'patient.title': '👤 Patient Information',
                'patient.firstName': 'First Name *',
                'patient.lastName': 'Last Name *',
                'patient.birthDate': 'Date of Birth *',
                'patient.gender': 'Gender *',
                'patient.selectGender': 'Select',
                'patient.male': 'Male',
                'patient.female': 'Female',
                'patient.childBoy': 'Child (Boy)',
                'patient.childGirl': 'Child (Girl)',
                'patient.weight': 'Weight (kg)',
                'patient.height': 'Height (cm)',
                'patient.allergies': 'Known allergies',
                'patient.medications': 'Current treatments',
                'patient.history': 'Medical history',
                'patient.summary': '📋 Summary:',
                'patient.fillInfo': 'Fill in the information above',
                // ... autres traductions anglaises
            },
            es: {
                'header.title': '🏥 Asistente Médico IA Ultimate',
                'header.subtitle': 'Plataforma médica inteligente con IA, telemedicina y sensores IoT',
                'cloud.connected': 'Cloud conectado',
                // ... autres traductions espagnoles
            },
            de: {
                'header.title': '🏥 Ultimate Medizinischer KI-Assistent',
                'header.subtitle': 'Intelligente medizinische Plattform mit KI, Telemedizin und IoT-Sensoren',
                'cloud.connected': 'Cloud verbunden',
                // ... autres traductions allemandes
            },
            it: {
                'header.title': '🏥 Assistente Medico IA Ultimate',
                'header.subtitle': 'Piattaforma medica intelligente con IA, telemedicina e sensori IoT',
                'cloud.connected': 'Cloud connesso',
                // ... autres traductions italiennes
            },
            ar: {
                'header.title': '🏥 مساعد طبي ذكي متقدم',
                'header.subtitle': 'منصة طبية ذكية مع الذكاء الاصطناعي والطب عن بعد وأجهزة الاستشعار',
                'cloud.connected': 'متصل بالسحابة',
                // ... autres traductions arabes
            }
        };

        class MedicalAssistantV4 {
            constructor() {
                this.currentLanguage = 'fr';
                this.patient = {};
                this.selectedBodyPart = '';
                this.selectedSymptoms = [];
                this.painLevel = 0;
                this.currentBodyType = 'homme';
                this.currentView = 'face';
                this.voiceRecognition = null;
                this.consultationHistory = JSON.parse(localStorage.getItem('consultationHistory') || '[]');
                this.medicalDatabase = this.initializeMedicalDB();
                this.sensorData = {
                    heartRate: 0,
                    temperature: 0,
                    bloodPressure: '0/0',
                    oxygenSat: 0
                };
                this.videoCallActive = false;
                this.sensorsConnected = false;
                
                this.initializeElements();
                this.attachEventListeners();
                this.createParticles();
                this.initializeVoiceRecognition();
                this.initializeCloudSync();
                this.startSensorSimulation();
                this.updateTranslations();
            }

            initializeElements() {
                // Navigation
                this.navTabs = document.querySelectorAll('.nav-tab');
                this.tabContents = document.querySelectorAll('.tab-content');
                
                // Patient form elements
                this.patientForm = document.getElementById('patientForm');
                this.patientSummary = document.getElementById('summaryContent');
                
                // Body diagram elements
                this.bodySvg = document.getElementById('bodySvg');
                this.selectedPartDisplay = document.getElementById('selectedPart');
                this.painScale = document.getElementById('painScale');
                this.painDisplay = document.getElementById('painDisplay');
                
                // Voice and symptoms elements
                this.voiceBtn = document.getElementById('voiceBtn');
                this.voiceText = document.getElementById('voiceText');
                this.voiceResult = document.getElementById('voiceResult');
                this.questionInput = document.getElementById('questionInput');
                this.analyzeBtn = document.getElementById('analyzeBtn');
                
                // AI elements
                this.confidenceFill = document.getElementById('confidenceFill');
                this.aiInsight = document.getElementById('aiInsight');
                
                // Response elements
                this.loading = document.getElementById('loading');
                this.loadingText = document.getElementById('loadingText');
                this.responseSection = document.getElementById('responseSection');
                this.responseContent = document.getElementById('responseContent');
                
                // Language selector
                this.languageSelect = document.getElementById('languageSelect');
            }

            attachEventListeners() {
                // Navigation tabs
                this.navTabs.forEach(tab => {
                    tab.addEventListener('click', (e) => this.switchTab(e.target.dataset.tab));
                });

                // Language selector
                this.languageSelect.addEventListener('change', (e) => {
                    this.changeLanguage(e.target.value);
                });
                
                // Patient form
                this.patientForm.addEventListener('input', () => this.updatePatientSummary());
                
                // Body type controls
                document.querySelectorAll('.body-type-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.switchBodyType(e.target.dataset.type));
                });
                
                // View controls
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.switchView(e.target.dataset.view));
                });
                
                // Body diagram
                this.bodySvg.addEventListener('click', (e) => {
                    if (e.target.classList.contains('body-part')) {
                        this.selectBodyPart(e.target);
                    }
                });
                
                // Pain scale
                this.painScale.addEventListener('input', (e) => {
                    this.updatePainLevel(e.target.value);
                });
                
                // Symptom tags
                document.querySelectorAll('.symptom-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => this.toggleSymptom(e.target));
                });
                
                // Voice recognition
                this.voiceBtn.addEventListener('click', () => this.toggleVoiceRecognition());
                
                // Analysis
                this.analyzeBtn.addEventListener('click', () => this.analyzeSymptoms());
                
                // AI real-time analysis
                this.questionInput.addEventListener('input', () => this.updateAIInsight());
            }

            createParticles() {
                const particlesContainer = document.getElementById('particles');
                for (let i = 0; i < 30; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.width = Math.random() * 15 + 3 + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                    particlesContainer.appendChild(particle);
                }
            }

            // Système de traduction
            changeLanguage(lang) {
                this.currentLanguage = lang;
                this.updateTranslations();
                
                // Sauvegarder la préférence
                localStorage.setItem('selectedLanguage', lang);
                
                // Mettre à jour la reconnaissance vocale
                if (this.voiceRecognition) {
                    const langCodes = {
                        'fr': 'fr-FR',
                        'en': 'en-US',
                        'es': 'es-ES',
                        'de': 'de-DE',
                        'it': 'it-IT',
                        'ar': 'ar-SA'
                    };
                    this.voiceRecognition.lang = langCodes[lang] || 'fr-FR';
                }
            }

            updateTranslations() {
                const elements = document.querySelectorAll('[data-i18n]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-i18n');
                    if (translations[this.currentLanguage] && translations[this.currentLanguage][key]) {
                        element.textContent = translations[this.currentLanguage][key];
                    }
                });
                
                // Mettre à jour les placeholders
                const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
                placeholderElements.forEach(element => {
                    const key = element.getAttribute('data-i18n-placeholder');
                    if (translations[this.currentLanguage] && translations[this.currentLanguage][key]) {
                        element.placeholder = translations[this.currentLanguage][key];
                    }
                });
            }

            // Navigation par onglets
            switchTab(tabName) {
                // Update nav buttons
                this.navTabs.forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.tab === tabName);
                });
                
                // Show corresponding content
                this.tabContents.forEach(content => {
                    content.classList.toggle('active', content.id === tabName);
                });
                
                // Initialiser le contenu spécifique selon l'onglet
                switch(tabName) {
                    case 'timeline':
                        this.initializeTimeline();
                        break;
                    case 'sensors':
                        this.updateSensorDisplay();
                        break;
                    case 'ai':
                        this.updateAIStatus();
                        break;
                }
            }

            // Base de données médicale
            initializeMedicalDB() {
                return {
                    diseases: [
                        {
                            name: "Hypertension artérielle",
                            symptoms: ["maux de tête", "vertiges", "fatigue", "vision trouble"],
                            treatments: ["ACE inhibiteurs", "Bêta-bloquants", "Diurétiques"],
                            prevention: ["Régime pauvre en sel", "Exercice régulier", "Gestion du stress"]
                        },
                        {
                            name: "Diabète type 2",
                            symptoms: ["soif excessive", "urination fréquente", "fatigue", "vision trouble"],
                            treatments: ["Metformine", "Insuline", "Régime alimentaire"],
                            prevention: ["Alimentation équilibrée", "Activité physique", "Contrôle du poids"]
                        },
                        {
                            name: "Migraine",
                            symptoms: ["mal de tête pulsatile", "nausées", "sensibilité lumière", "aura"],
                            treatments: ["Triptans", "Anti-inflammatoires", "Prévention"],
                            prevention: ["Éviter déclencheurs", "Sommeil régulier", "Gestion stress"]
                        },
                        {
                            name: "Asthme",
                            symptoms: ["dyspnée", "sifflement", "toux", "oppression thoracique"],
                            treatments: ["Bronchodilatateurs", "Corticoïdes inhalés", "Antileucotrienes"],
                            prevention: ["Éviter allergènes", "Traitement préventif", "Éducation thérapeutique"]
                        }
                    ],
                    medications: [
                        {
                            name: "Paracétamol",
                            dosage: "1g toutes les 6h max",
                            indications: ["Douleur", "Fièvre"],
                            contraindications: ["Insuffisance hépatique sévère"],
                            interactions: ["Warfarine", "Alcool"]
                        },
                        {
                            name: "Ibuprofène",
                            dosage: "400mg toutes les 8h",
                            indications: ["Inflammation", "Douleur", "Fièvre"],
                            contraindications: ["Ulcère gastrique", "Insuffisance rénale"],
                            interactions: ["Anticoagulants", "Lithium"]
                        }
                    ]
                };
            }

            // Recherche dans la base médicale
            searchMedicalDB() {
                const query = document.getElementById('medicalSearch').value.toLowerCase();
                const results = document.getElementById('medicalResults');
                
                if (!query.trim()) {
                    results.innerHTML = '<div class="medical-item"><h4>💡 Entrez un terme de recherche</h4></div>';
                    return;
                }
                
                let findings = [];
                
                // Recherche dans les maladies
                this.medicalDatabase.diseases.forEach(disease => {
                    if (disease.name.toLowerCase().includes(query) || 
                        disease.symptoms.some(s => s.includes(query))) {
                        findings.push({
                            type: 'disease',
                            data: disease
                        });
                    }
                });
                
                // Recherche dans les médicaments
                this.medicalDatabase.medications.forEach(med => {
                    if (med.name.toLowerCase().includes(query) || 
                        med.indications.some(i => i.toLowerCase().includes(query))) {
                        findings.push({
                            type: 'medication',
                            data: med
                        });
                    }
                });
                
                // Affichage des résultats
                if (findings.length === 0) {
                    results.innerHTML = '<div class="medical-item"><h4>❌ Aucun résultat trouvé</h4><p>Essayez avec d\'autres termes de recherche</p></div>';
                    return;
                }
                
                results.innerHTML = findings.map(finding => {
                    if (finding.type === 'disease') {
                        const disease = finding.data;
                        return `
                            <div class="medical-item">
                                <h4>🏥 ${disease.name}</h4>
                                <p><strong>Symptômes:</strong> ${disease.symptoms.join(', ')}</p>
                                <p><strong>Traitements:</strong> ${disease.treatments.join(', ')}</p>
                                <p><strong>Prévention:</strong> ${disease.prevention.join(', ')}</p>
                            </div>
                        `;
                    } else {
                        const med = finding.data;
                        return `
                            <div class="medical-item">
                                <h4>💊 ${med.name}</h4>
                                <p><strong>Dosage:</strong> ${med.dosage}</p>
                                <p><strong>Indications:</strong> ${med.indications.join(', ')}</p>
                                <p><strong>Contre-indications:</strong> ${med.contraindications.join(', ')}</p>
                            </div>
                        `;
                    }
                }).join('');
            }

            // Téléconsultation
            startVideoCall() {
                this.videoCallActive = true;
                const container = document.getElementById('videoContainer');
                
                // Simulation d'une vidéoconférence
                container.innerHTML = `
                    <div style="color: white; text-align: center;">
                        <h3>📹 Appel en cours...</h3>
                        <div style="background: #4caf50; color: white; padding: 10px; border-radius: 8px; margin: 20px 0;">
                            Dr. Marie Dubois connectée
                        </div>
                        <div style="font-size: 48px; margin: 20px 0;">👩‍⚕️</div>
                        <p>Qualité: HD • Connexion sécurisée</p>
                        <div style="margin-top: 20px;">
                            <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; display: inline-block;">
                                🔴 REC 00:${String(Math.floor(Math.random() * 60)).padStart(2, '0')}
                            </div>
                        </div>
                    </div>
                `;
                
                // Simuler une conversation
                setTimeout(() => {
                    this.simulateDocTorConversation();
                }, 3000);
            }

            simulateDocTorConversation() {
                const messages = [
                    "Dr. Dubois: Bonjour, comment puis-je vous aider aujourd'hui ?",
                    "Dr. Dubois: Je vois que vous avez décrit des symptômes de maux de tête...",
                    "Dr. Dubois: Depuis combien de temps avez-vous ces symptômes ?",
                    "Dr. Dubois: Avez-vous pris des médicaments récemment ?"
                ];
                
                let messageIndex = 0;
                const interval = setInterval(() => {
                    if (messageIndex < messages.length && this.videoCallActive) {
                        const container = document.getElementById('videoContainer');
                        const messageDiv = document.createElement('div');
                        messageDiv.style.cssText = `
                            position: absolute;
                            bottom: ${50 + messageIndex * 30}px;
                            left: 20px;
                            right: 20px;
                            background: rgba(0,0,0,0.8);
                            color: white;
                            padding: 10px;
                            border-radius: 8px;
                            font-size: 14px;
                        `;
                        messageDiv.textContent = messages[messageIndex];
                        container.appendChild(messageDiv);
                        messageIndex++;
                    } else {
                        clearInterval(interval);
                    }
                }, 4000);
            }

            stopVideoCall() {
                this.videoCallActive = false;
                const container = document.getElementById('videoContainer');
                container.innerHTML = `
                    <div class="video-placeholder">
                        <h3>📹 Consultation terminée</h3>
                        <p>Durée: 12 minutes • Enregistrement sauvegardé</p>
                        <button class="video-btn start" onclick="medicalAssistant.downloadConsultation()" style="margin-top: 15px;">
                            📄 Télécharger rapport
                        </button>
                    </div>
                `;
            }

            toggleMute() {
                // Simulation du mute
                const btn = event.target;
                if (btn.textContent.includes('Mute')) {
                    btn.textContent = '🔇 Unmute';
                    btn.style.background = '#f44336';
                } else {
                    btn.textContent = '🎤 Mute';
                    btn.style.background = '#ff9800';
                }
            }

            downloadConsultation() {
                alert('💾 Rapport de téléconsultation téléchargé avec succès !');
            }

            // Suivi temporal
            initializeTimeline() {
                // Charger les données de symptômes depuis le stockage local
                const timelineData = JSON.parse(localStorage.getItem('symptomsTimeline') || '[]');
                
                // Créer le graphique avec Chart.js simulé
                this.createSymptomsChart(timelineData);
                this.updateTimelineDisplay(timelineData);
            }

            createSymptomsChart(data) {
                const canvas = document.getElementById('symptomsChart');
                const ctx = canvas.getContext('2d');
                
                // Simulation d'un graphique (normalement utiliserait Chart.js)
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Dessiner les axes
                ctx.strokeStyle = '#ccc';
                ctx.beginPath();
                ctx.moveTo(50, 50);
                ctx.lineTo(50, 180);
                ctx.lineTo(380, 180);
                ctx.stroke();
                
                // Dessiner les données de douleur
                if (data.length > 0) {
                    ctx.strokeStyle = '#f44336';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    
                    data.forEach((point, index) => {
                        const x = 50 + (index * 50);
                        const y = 180 - (point.pain * 13);
                        
                        if (index === 0) {
                            ctx.moveTo(x, y);
                        } else {
                            ctx.lineTo(x, y);
                        }
                        
                        // Dessiner les points
                        ctx.fillStyle = '#f44336';
                        ctx.fillRect(x-3, y-3, 6, 6);
                    });
                    ctx.stroke();
                }
                
                // Labels
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.fillText('Douleur (0-10)', 5, 30);
                ctx.fillText('Temps', 350, 195);
            }

            addSymptomEntry() {
                const pain = this.painLevel;
                const symptoms = this.selectedSymptoms;
                const description = this.questionInput.value;
                
                const entry = {
                    date: new Date(),
                    pain: pain,
                    symptoms: symptoms,
                    description: description,
                    bodyPart: this.selectedBodyPart
                };
                
                // Sauvegarder dans le timeline
                let timeline = JSON.parse(localStorage.getItem('symptomsTimeline') || '[]');
                timeline.unshift(entry);
                
                // Limiter à 20 entrées
                if (timeline.length > 20) {
                    timeline = timeline.slice(0, 20);
                }
                
                localStorage.setItem('symptomsTimeline', JSON.stringify(timeline));
                
                // Mettre à jour l'affichage
                this.initializeTimeline();
                
                alert('✅ Entrée ajoutée au suivi temporal');
            }

            updateTimelineDisplay(data) {
                const timeline = document.getElementById('symptomsTimeline');
                
                if (data.length === 0) {
                    timeline.innerHTML = `
                        <div class="timeline-item">
                            <h5>Aucune donnée</h5>
                            <p>Commencez à enregistrer vos symptômes pour voir l'évolution</p>
                        </div>
                    `;
                    return;
                }
                
                timeline.innerHTML = data.map(entry => {
                    const date = new Date(entry.date).toLocaleString();
                    return `
                        <div class="timeline-item">
                            <h5>${date}</h5>
                            <p><strong>Douleur:</strong> ${entry.pain}/10</p>
                            ${entry.bodyPart ? `<p><strong>Zone:</strong> ${entry.bodyPart}</p>` : ''}
                            ${entry.symptoms.length > 0 ? `<p><strong>Symptômes:</strong> ${entry.symptoms.join(', ')}</p>` : ''}
                            ${entry.description ? `<p><strong>Description:</strong> ${entry.description}</p>` : ''}
                        </div>
                    `;
                }).join('');
            }

            // Capteurs IoT
            startSensorSimulation() {
                // Simulation des données de capteurs
                setInterval(() => {
                    if (this.sensorsConnected) {
                        this.updateSensorData();
                    }
                }, 2000);
            }

            updateSensorData() {
                // Simulation de données réalistes
                this.sensorData.heartRate = Math.floor(Math.random() * 40 + 60); // 60-100 bpm
                this.sensorData.temperature = (Math.random() * 2 + 36.5).toFixed(1); // 36.5-38.5°C
                this.sensorData.bloodPressure = `${Math.floor(Math.random() * 40 + 110)}/${Math.floor(Math.random() * 20 + 70)}`;
                this.sensorData.oxygenSat = Math.floor(Math.random() * 5 + 95); // 95-100%
                
                // Mise à jour de l'affichage
                document.getElementById('heartRate').textContent = `${this.sensorData.heartRate} bpm`;
                document.getElementById('temperature').textContent = `${this.sensorData.temperature}°C`;
                document.getElementById('bloodPressure').textContent = this.sensorData.bloodPressure;
                document.getElementById('oxygenSat').textContent = `${this.sensorData.oxygenSat}%`;
                
                // Tendances
                document.getElementById('heartTrend').textContent = this.sensorData.heartRate > 80 ? '↗️ Élevé' : '✅ Normal';
                document.getElementById('tempTrend').textContent = this.sensorData.temperature > 37.5 ? '🔥 Fièvre' : '✅ Normal';
                document.getElementById('pressureTrend').textContent = '📊 Stable';
                document.getElementById('oxygenTrend').textContent = this.sensorData.oxygenSat > 97 ? '✅ Excellent' : '⚠️ Surveiller';
            }

            updateSensorDisplay() {
                if (this.sensorsConnected) {
                    this.updateSensorData();
                } else {
                    // Afficher état déconnecté
                    document.getElementById('heartRate').textContent = '--';
                    document.getElementById('temperature').textContent = '--';
                    document.getElementById('bloodPressure').textContent = '--';
                    document.getElementById('oxygenSat').textContent = '--';
                }
            }

            connectSensors() {
                this.sensorsConnected = !this.sensorsConnected;
                
                if (this.sensorsConnected) {
                    alert('📱 Capteurs connectés avec succès !');
                    this.updateSensorData();
                } else {
                    alert('📱 Capteurs déconnectés');
                    this.updateSensorDisplay();
                }
            }

            // Fonctions de connexion spécifiques
            connectAppleWatch() {
                document.getElementById('appleWatchStatus').innerHTML = '🟢 Connecté';
                document.getElementById('appleWatchStatus').style.color = '#4caf50';
                alert('⌚ Apple Watch connectée - Données biométriques synchronisées');
            }

            connectThermometer() {
                document.getElementById('thermometerStatus').innerHTML = '🟢 Connecté';
                document.getElementById('thermometerStatus').style.color = '#4caf50';
                alert('🌡️ Thermomètre intelligent connecté');
            }

            connectBPMonitor() {
                document.getElementById('bpMonitorStatus').innerHTML = '🟢 Connecté';
                document.getElementById('bpMonitorStatus').style.color = '#4caf50';
                alert('🩺 Tensiomètre connecté');
            }

            connectPillbox() {
                document.getElementById('pillboxStatus').innerHTML = '🟢 Connecté';
                document.getElementById('pillboxStatus').style.color = '#4caf50';
                alert('💊 Pilulier intelligent connecté');
            }

            viewSleepData() {
                alert('😴 Données de sommeil:\n• Durée: 7h 23min\n• Efficacité: 89%\n• Phases profondes: 1h 45min\n• Réveils: 3');
            }

            viewActivityData() {
                alert('🏃 Données d\'activité:\n• Pas: 8,547\n• Calories: 287 kcal\n• Distance: 6.2 km\n• Temps actif: 2h 15min');
            }

            // IA avancée
            updateAIInsight() {
                const text = this.questionInput.value;
                const confidence = Math.min(text.length * 2, 100);
                
                this.confidenceFill.style.width = confidence + '%';
                
                if (text.length < 10) {
                    this.aiInsight.textContent = 'En attente d\'analyse...';
                } else if (text.length < 50) {
                    this.aiInsight.textContent = 'Analyse préliminaire en cours...';
                } else {
                    // Analyse simple basée sur des mots-clés
                    const keywords = {
                        'urgence': 'Détection de mots-clés d\'urgence - Évaluation prioritaire',
                        'douleur': 'Analyse de symptômes douloureux - Pattern reconnu',
                        'fièvre': 'Syndrome infectieux possible - Corrélation détectée',
                        'mal de tête': 'Céphalées analysées - Multiple causes possibles'
                    };
                    
                    let insight = 'Analyse approfondie terminée - ';
                    let found = false;
                    
                    for (const [keyword, message] of Object.entries(keywords)) {
                        if (text.toLowerCase().includes(keyword)) {
                            insight = message;
                            found = true;
                            break;
                        }
                    }
                    
                    if (!found) {
                        insight += 'Symptômes complexes nécessitant évaluation médicale';
                    }
                    
                    this.aiInsight.textContent = insight;
                }
            }

            updateAIStatus() {
                // Mise à jour du statut IA
                const confidence = Math.floor(Math.random() * 20 + 80); // 80-100%
                this.confidenceFill.style.width = confidence + '%';
            }

            // Cloud sync
            initializeCloudSync() {
                // Simulation de la synchronisation cloud
                setInterval(() => {
                    this.simulateCloudSync();
                }, 30000); // Sync toutes les 30 secondes
            }

            simulateCloudSync() {
                const status = document.getElementById('cloudStatus');
                const now = new Date().toLocaleTimeString();
                
                // Animation de sync
                status.innerHTML = `
                    <div class="status-indicator" style="background: #ff9800;"></div>
                    <span>Synchronisation...</span>
                `;
                
                setTimeout(() => {
                    status.innerHTML = `
                        <div class="status-indicator"></div>
                        <span>Sync: ${now}</span>
                    `;
                }, 2000);
            }

            manualSync() {
                const btn = event.target;
                btn.textContent = '🔄 Synchronisation...';
                btn.disabled = true;
                
                setTimeout(() => {
                    btn.textContent = '✅ Synchronisé';
                    setTimeout(() => {
                        btn.textContent = '🔄 Synchroniser';
                        btn.disabled = false;
                    }, 2000);
                }, 3000);
                
                // Simuler la sauvegarde des données
                const cloudData = {
                    patient: this.patient,
                    consultations: this.consultationHistory,
                    sensors: this.sensorData,
                    timeline: JSON.parse(localStorage.getItem('symptomsTimeline') || '[]')
                };
                
                localStorage.setItem('cloudBackup', JSON.stringify(cloudData));
            }

            // Méthodes existantes mises à jour
            updatePatientSummary() {
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const birthDate = document.getElementById('birthDate').value;
                const gender = document.getElementById('gender').value;
                const weight = document.getElementById('weight').value;
                const height = document.getElementById('height').value;
                
                let summary = '';
                if (firstName || lastName) {
                    summary += `<div><strong>Patient:</strong> ${firstName} ${lastName}</div>`;
                }
                
                if (birthDate) {
                    const age = this.calculateAge(birthDate);
                    summary += `<div><strong>Âge:</strong> ${age} ans</div>`;
                }
                
                if (gender) {
                    summary += `<div><strong>Sexe:</strong> ${gender}</div>`;
                }
                
                if (weight && height) {
                    const bmi = (weight / ((height/100) ** 2)).toFixed(1);
                    summary += `<div><strong>IMC:</strong> ${bmi}</div>`;
                }
                
                this.patientSummary.innerHTML = summary || 'Remplissez les informations ci-dessus';
                
                // Mise à jour de l'objet patient
                this.patient = {
                    firstName,
                    lastName,
                    birthDate,
                    age: birthDate ? this.calculateAge(birthDate) : null,
                    gender,
                    weight: weight ? parseFloat(weight) : null,
                    height: height ? parseFloat(height) : null,
                    allergies: document.getElementById('allergies').value,
                    medications: document.getElementById('medications').value,
                    medicalHistory: document.getElementById('medicalHistory').value
                };
            }

            calculateAge(birthDate) {
                const birth = new Date(birthDate);
                const today = new Date();
                let age = today.getFullYear() - birth.getFullYear();
                const monthDiff = today.getMonth() - birth.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                    age--;
                }
                
                return age;
            }

            switchBodyType(type) {
                this.currentBodyType = type;
                
                document.querySelectorAll('.body-type-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.type === type);
                });
                
                this.updateBodyDisplay();
            }

            switchView(view) {
                this.currentView = view;
                
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.view === view);
                });
                
                this.updateBodyDisplay();
            }

            updateBodyDisplay() {
                document.querySelectorAll('.body-view').forEach(view => {
                    view.style.display = 'none';
                });
                
                const viewId = `${this.currentBodyType}-${this.currentView}`;
                const currentView = document.getElementById(viewId);
                if (currentView) {
                    currentView.style.display = 'block';
                } else {
                    const faceView = document.getElementById(`${this.currentBodyType}-face`);
                    if (faceView) {
                        faceView.style.display = 'block';
                    }
                }
                
                this.clearBodySelection();
            }

            clearBodySelection() {
                document.querySelectorAll('.body-part').forEach(part => {
                    part.classList.remove('selected');
                });
                this.selectedBodyPart = '';
                this.selectedPartDisplay.textContent = '';
            }

            selectBodyPart(element) {
                this.clearBodySelection();
                
                element.classList.add('selected');
                this.selectedBodyPart = element.dataset.part;
                this.selectedPartDisplay.textContent = `Zone sélectionnée : ${this.selectedBodyPart}`;
            }

            updatePainLevel(level) {
                this.painLevel = level;
                const emojis = ['😊', '🙂', '😐', '😕', '😟', '😣', '😖', '😫', '😩', '😱', '🆘'];
                const colors = ['#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722', '#f44336', '#e91e63', '#9c27b0', '#673ab7'];
                
                this.painDisplay.textContent = `${emojis[level]} ${level}/10`;
                this.painDisplay.style.color = colors[level];
                
                if (level >= 8) {
                    this.painDisplay.style.animation = 'pulse 0.5s ease-in-out infinite';
                } else {
                    this.painDisplay.style.animation = 'none';
                }
            }

            toggleSymptom(element) {
                const symptom = element.dataset.symptom;
                
                if (element.classList.contains('selected')) {
                    element.classList.remove('selected');
                    this.selectedSymptoms = this.selectedSymptoms.filter(s => s !== symptom);
                } else {
                    element.classList.add('selected');
                    this.selectedSymptoms.push(symptom);
                }
                
                this.updateSymptomText();
            }

            updateSymptomText() {
                const currentText = this.questionInput.value;
                const symptomsText = this.selectedSymptoms.join(', ');
                
                if (symptomsText && !currentText.includes(symptomsText)) {
                    this.questionInput.value = currentText ? `${currentText}\n\nSymptômes sélectionnés: ${symptomsText}` : `Symptômes sélectionnés: ${symptomsText}`;
                }
            }

            initializeVoiceRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.voiceRecognition = new SpeechRecognition();
                    this.voiceRecognition.lang = 'fr-FR';
                    this.voiceRecognition.continuous = false;
                    this.voiceRecognition.interimResults = true;

                    this.voiceRecognition.onstart = () => {
                        this.voiceBtn.classList.add('recording');
                        this.voiceText.textContent = '🔴 Parlez maintenant...';
                        this.voiceResult.textContent = 'Écoute en cours...';
                    };

                    this.voiceRecognition.onresult = (event) => {
                        let transcript = '';
                        for (let i = 0; i < event.results.length; i++) {
                            transcript += event.results[i][0].transcript;
                        }
                        
                        if (event.results[event.results.length - 1].isFinal) {
                            this.questionInput.value = transcript;
                            this.voiceResult.textContent = `Reconnu: "${transcript}"`;
                            this.updateAIInsight();
                        } else {
                            this.voiceResult.textContent = `En cours: "${transcript}"`;
                        }
                    };

                    this.voiceRecognition.onerror = (event) => {
                        this.voiceResult.textContent = `Erreur: ${event.error}`;
                        this.resetVoiceButton();
                    };

                    this.voiceRecognition.onend = () => {
                        this.resetVoiceButton();
                    };
                } else {
                    this.voiceBtn.style.display = 'none';
                    document.querySelector('.voice-controls').innerHTML = '<p>🚫 Reconnaissance vocale non supportée</p>';
                }
            }

            toggleVoiceRecognition() {
                if (this.voiceRecognition) {
                    if (this.voiceBtn.classList.contains('recording')) {
                        this.voiceRecognition.stop();
                    } else {
                        this.voiceRecognition.start();
                    }
                }
            }

            resetVoiceButton() {
                this.voiceBtn.classList.remove('recording');
                this.voiceText.textContent = '🎤 Cliquez et décrivez vos symptômes';
            }

            async analyzeSymptoms() {
                if (!this.validateInput()) return;
                
                this.showLoading();
                
                try {
                    await this.simulateAdvancedAnalysis();
                    const response = this.generateUltimateResponse();
                    this.showResponse(response);
                } catch (error) {
                    this.showError(error.message);
                } finally {
                    this.hideLoading();
                }
            }

            validateInput() {
                const question = this.questionInput.value.trim();
                
                if (!question && !this.selectedBodyPart && this.selectedSymptoms.length === 0) {
                    alert('⚠️ Veuillez décrire vos symptômes');
                    return false;
                }
                
                if (!this.patient.firstName || !this.patient.lastName) {
                    alert('⚠️ Veuillez remplir les informations patient');
                    return false;
                }
                
                return true;
            }

            async simulateAdvancedAnalysis() {
                const steps = [
                    'Initialisation IA médicale v4.0...',
                    'Chargement base de données mondiale...',
                    'Analyse syntaxique des symptômes...',
                    'Corrélation avec capteurs IoT...',
                    'Machine Learning - Pattern matching...',
                    'Consultation réseau neuronal spécialisé...',
                    'Analyse prédictive - Évolution probable...',
                    'Génération recommandations personnalisées...',
                    'Vérification interactions médicamenteuses...',
                    'Finalisation rapport multilingue...'
                ];

                for (let i = 0; i < steps.length; i++) {
                    this.loadingText.textContent = steps[i];
                    await new Promise(resolve => setTimeout(resolve, 800));
                }
            }

            generateUltimateResponse() {
                const consultation = {
                    date: new Date(),
                    patient: this.patient,
                    symptoms: {
                        description: this.questionInput.value,
                        selectedSymptoms: this.selectedSymptoms,
                        bodyPart: this.selectedBodyPart,
                        painLevel: this.painLevel
                    },
                    sensors: this.sensorData,
                    aiConfidence: Math.floor(Math.random() * 20 + 80)
                };

                if (this.detectEmergency()) {
                    return this.generateEmergencyResponse(consultation);
                }

                return this.generateAdvancedAnalysisResponse(consultation);
            }

            detectEmergency() {
                const emergencyKeywords = [
                    'difficulté respirer', 'essoufflement', 'souffle court',
                    'douleur thoracique', 'mal poitrine', 'serrement poitrine',
                    'perte conscience', 'évanouissement', 'syncope',
                    'saignement abondant', 'hémorragie',
                    'paralysie', 'engourdissement soudain',
                    'convulsion', 'crise épilepsie'
                ];
                
                const questionLower = this.questionInput.value.toLowerCase();
                const criticalPain = this.painLevel >= 9;
                const abnormalVitals = this.sensorData.heartRate > 120 || 
                                     parseFloat(this.sensorData.temperature) > 39;
                
                return criticalPain || abnormalVitals ||
                       emergencyKeywords.some(keyword => questionLower.includes(keyword));
            }

            generateEmergencyResponse(consultation) {
                return `
                    <div class="emergency-alert">
                        <h2>🚨 URGENCE MÉDICALE DÉTECTÉE</h2>
                        <p><strong>ALERTE IA: Situation nécessitant une intervention médicale immédiate</strong></p>
                        <div style="margin: 20px 0;">
                            <button onclick="window.open('tel:15')" style="background: white; color: #f44336; border: none; padding: 15px 25px; border-radius: 25px; margin: 5px; font-weight: bold; cursor: pointer;">📞 SAMU (15)</button>
                            <button onclick="window.open('tel:112')" style="background: white; color: #f44336; border: none; padding: 15px 25px; border-radius: 25px; margin: 5px; font-weight: bold; cursor: pointer;">🆘 Urgences (112)</button>
                        </div>
                    </div>
                    
                    <div style="background: #ffebee; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h3>🤖 Analyse IA Critique</h3>
                        <p><strong>Niveau de confiance:</strong> ${consultation.aiConfidence}%</p>
                        <p><strong>Facteurs déclenchants:</strong></p>
                        <ul>
                            ${consultation.symptoms.painLevel >= 9 ? '<li>🔴 Douleur critique (9-10/10)</li>' : ''}
                            ${this.sensorData.heartRate > 120 ? '<li>🔴 Tachycardie détectée</li>' : ''}
                            ${parseFloat(this.sensorData.temperature) > 39 ? '<li>🔴 Hyperthermie sévère</li>' : ''}
                            <li>🔴 Mots-clés d'urgence identifiés par IA</li>
                        </ul>
                    </div>
                    
                    ${this.generatePatientInfo(consultation)}
                    ${this.generateVitalSigns(consultation)}
                    ${this.generateEmergencyInstructions()}
                `;
            }

            generateAdvancedAnalysisResponse(consultation) {
                return `
                    <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h3>🤖 Analyse IA Avancée v4.0</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <p><strong>Confiance diagnostique:</strong> ${consultation.aiConfidence}%</p>
                                <div class="confidence-meter">
                                    <div class="confidence-fill" style="width: ${consultation.aiConfidence}%"></div>
                                </div>
                            </div>
                            <div>
                                <p><strong>Algorithme utilisé:</strong> Deep Learning Neural Network</p>
                                <p><strong>Base de données:</strong> 2.1M cas analysés</p>
                            </div>
                        </div>
                    </div>
                    
                    ${this.generatePatientInfo(consultation)}
                    ${this.generateVitalSigns(consultation)}
                    ${this.generateAIDiagnosis(consultation)}
                    ${this.generateMLPredictions(consultation)}
                    ${this.generatePersonalizedRecommendations(consultation)}
                    ${this.generateTimelineIntegration(consultation)}
                    ${this.generateFollowUpPlan(consultation)}
                `;
            }

            generatePatientInfo(consultation) {
                const bmi = consultation.patient.weight && consultation.patient.height 
                    ? (consultation.patient.weight / ((consultation.patient.height/100) ** 2)).toFixed(1)
                    : null;
                
                return `
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>👤 Profil Patient Complet</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                            <div>
                                <p><strong>Identité:</strong> ${consultation.patient.firstName} ${consultation.patient.lastName}</p>
                                <p><strong>Âge:</strong> ${consultation.patient.age || 'Non spécifié'} ans</p>
                                <p><strong>Sexe:</strong> ${consultation.patient.gender || 'Non spécifié'}</p>
                            </div>
                            <div>
                                ${consultation.patient.weight ? `<p><strong>Poids:</strong> ${consultation.patient.weight} kg</p>` : ''}
                                ${consultation.patient.height ? `<p><strong>Taille:</strong> ${consultation.patient.height} cm</p>` : ''}
                                ${bmi ? `<p><strong>IMC:</strong> ${bmi} kg/m² ${this.getBMICategory(bmi)}</p>` : ''}
                            </div>
                            <div>
                                ${consultation.patient.allergies ? `<p><strong>Allergies:</strong> ${consultation.patient.allergies}</p>` : ''}
                                ${consultation.patient.medications ? `<p><strong>Traitements:</strong> ${consultation.patient.medications}</p>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }

            getBMICategory(bmi) {
                const value = parseFloat(bmi);
                if (value < 18.5) return '(Insuffisance pondérale)';
                if (value < 25) return '(Normal)';
                if (value < 30) return '(Surpoids)';
                return '(Obésité)';
            }

            generateVitalSigns(consultation) {
                return `
                    <div style="background: white; padding: 20px; border-radius: 12px; margin: 15px 0; border: 2px solid #4caf50;">
                        <h4>📊 Signes Vitaux IoT</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #f44336;">❤️</div>
                                <div><strong>${consultation.sensors.heartRate} bpm</strong></div>
                                <div style="font-size: 12px; color: ${consultation.sensors.heartRate > 100 ? '#f44336' : '#4caf50'};">
                                    ${consultation.sensors.heartRate > 100 ? 'Élevé' : 'Normal'}
                                </div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #ff9800;">🌡️</div>
                                <div><strong>${consultation.sensors.temperature}°C</strong></div>
                                <div style="font-size: 12px; color: ${parseFloat(consultation.sensors.temperature) > 37.5 ? '#f44336' : '#4caf50'};">
                                    ${parseFloat(consultation.sensors.temperature) > 37.5 ? 'Fièvre' : 'Normal'}
                                </div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #2196F3;">🩺</div>
                                <div><strong>${consultation.sensors.bloodPressure}</strong></div>
                                <div style="font-size: 12px; color: #4caf50;">Tension</div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #9c27b0;">🫁</div>
                                <div><strong>${consultation.sensors.oxygenSat}%</strong></div>
                                <div style="font-size: 12px; color: ${consultation.sensors.oxygenSat < 95 ? '#f44336' : '#4caf50'};">
                                    SpO2 ${consultation.sensors.oxygenSat < 95 ? 'Bas' : 'Normal'}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            generateAIDiagnosis(consultation) {
                const symptoms = consultation.symptoms;
                let primaryDiagnosis = "Syndrome général non spécifique";
                let probability = 75;
                
                // Logique d'IA simplifiée
                if (symptoms.selectedSymptoms.includes('mal de tête') || symptoms.bodyPart === 'tête') {
                    primaryDiagnosis = "Céphalée primaire (tension/migraine)";
                    probability = 85;
                } else if (symptoms.selectedSymptoms.includes('fièvre') || parseFloat(this.sensorData.temperature) > 37.5) {
                    primaryDiagnosis = "Syndrome infectieux viral probable";
                    probability = 80;
                } else if (symptoms.selectedSymptoms.includes('fatigue')) {
                    primaryDiagnosis = "Syndrome de fatigue généralisée";
                    probability = 70;
                }
                
                return `
                    <div style="background: white; padding: 20px; border-radius: 12px; margin: 15px 0; border-left: 5px solid #2196F3;">
                        <h4>🧠 Diagnostic IA Principal</h4>
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <h5>${primaryDiagnosis}</h5>
                            <div style="margin: 10px 0;">
                                <div>Probabilité: ${probability}%</div>
                                <div class="confidence-meter" style="margin: 5px 0;">
                                    <div class="confidence-fill" style="width: ${probability}%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <h5>🎯 Diagnostics différentiels</h5>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px;">
                                <strong>Hypothèse secondaire:</strong><br>
                                Réaction de stress/anxiété (15%)
                            </div>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px;">
                                <strong>À éliminer:</strong><br>
                                Pathologie organique sous-jacente (10%)
                            </div>
                        </div>
                    </div>
                `;
            }

            generateMLPredictions(consultation) {
                return `
                    <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>🔮 Prédictions Machine Learning</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>📈 Évolution probable (48h)</h5>
                                <ul style="margin-left: 20px;">
                                    <li>🟢 Amélioration graduelle (65%)</li>
                                    <li>🟡 Stagnation symptômes (25%)</li>
                                    <li>🔴 Aggravation (10%)</li>
                                </ul>
                            </div>
                            <div>
                                <h5>⚠️ Facteurs de risque</h5>
                                <ul style="margin-left: 20px;">
                                    <li>Âge: ${consultation.patient.age > 65 ? 'Élevé' : 'Faible'}</li>
                                    <li>Antécédents: ${consultation.patient.medicalHistory ? 'À surveiller' : 'Favorables'}</li>
                                    <li>Traitements: ${consultation.patient.medications ? 'Interactions possibles' : 'Aucun'}</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>🤖 Recommandations IA Personnalisées</h5>
                            <p><strong>Algorithme recommande:</strong> Surveillance active avec réévaluation dans 24-48h</p>
                            <p><strong>Seuil d'alerte:</strong> Aggravation de 2 points sur échelle douleur OU nouveaux symptômes</p>
                        </div>
                    </div>
                `;
            }

            generatePersonalizedRecommendations(consultation) {
                return `
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>💡 Recommandations Personnalisées</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>🏠 Mesures immédiates</h5>
                                <ul style="margin-left: 20px;">
                                    <li>💧 Hydratation: 2-2.5L/jour (surveillance IoT)</li>
                                    <li>😴 Repos: 8-9h sommeil (tracker connecté)</li>
                                    <li>🌡️ Surveillance température: automatique</li>
                                    <li>📱 Monitoring continu via capteurs</li>
                                </ul>
                            </div>
                            <div>
                                <h5>💊 Thérapeutique</h5>
                                <ul style="margin-left: 20px;">
                                    ${consultation.symptoms.painLevel >= 4 ? '<li>Paracétamol 1g/6h si douleur</li>' : ''}
                                    ${parseFloat(this.sensorData.temperature) > 37.5 ? '<li>Antipyrétique si fièvre > 38.5°C</li>' : ''}
                                    <li>🚫 Éviter anti-inflammatoires (sans avis médical)</li>
                                    <li>📊 Suivi via pilulier connecté</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>🔔 Alertes Intelligentes Configurées</h5>
                            <p>✅ Surveillance automatique des signes vitaux</p>
                            <p>✅ Rappels de prise médicamenteuse</p>
                            <p>✅ Alerte si dégradation des paramètres</p>
                            <p>✅ Synchronisation avec équipe médicale</p>
                        </div>
                    </div>
                `;
            }

            generateTimelineIntegration(consultation) {
                return `
                    <div style="background: white; padding: 20px; border-radius: 12px; margin: 15px 0; border: 2px solid #9c27b0;">
                        <h4>📈 Intégration Suivi Temporal</h4>
                        
                        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <p><strong>📊 Cette consultation a été automatiquement ajoutée à votre timeline</strong></p>
                            <p>• Données symptômes: Intégrées</p>
                            <p>• Capteurs IoT: Synchronisés</p>
                            <p>• Évolution: Trackée en temps réel</p>
                        </div>
                        
                        <button onclick="medicalAssistant.switchTab('timeline')" style="background: #9c27b0; color: white; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; margin: 10px 5px;">
                            📈 Voir timeline complète
                        </button>
                        <button onclick="medicalAssistant.exportTimelineReport()" style="background: #4caf50; color: white; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; margin: 10px 5px;">
                            📄 Export rapport évolution
                        </button>
                    </div>
                `;
            }

            generateFollowUpPlan(consultation) {
                return `
                    <div style="background: #e3f2fd; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>📅 Plan de Suivi Intelligent</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>🤖 Surveillance IA</h5>
                                <ul style="margin-left: 20px;">
                                    <li>📱 Monitoring continu 24/7</li>
                                    <li>🔔 Alertes intelligentes configurées</li>
                                    <li>📊 Analyse des tendances en temps réel</li>
                                    <li>🔄 Sync automatique avec cloud médical</li>
                                </ul>
                            </div>
                            <div>
                                <h5>👨‍⚕️ Consultations programmées</h5>
                                <ul style="margin-left: 20px;">
                                    <li>📞 Téléconsultation J+2 si persistance</li>
                                    <li>🏥 Consultation physique si aggravation</li>
                                    <li>🩺 Bilan complémentaire si nécessaire</li>
                                    <li>👥 Coordination équipe soignante</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>🚨 Seuils d'Alerte Configurés</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div>Douleur > 8/10: <span style="color: #f44336; font-weight: bold;">URGENT</span></div>
                                <div>Fièvre > 39°C: <span style="color: #ff9800; font-weight: bold;">ALERTE</span></div>
                                <div>FC > 120 bpm: <span style="color: #ff9800; font-weight: bold;">SURVEILLANCE</span></div>
                                <div>SpO2 < 95%: <span style="color: #f44336; font-weight: bold;">URGENT</span></div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="medicalAssistant.switchTab('teleconsult')" style="background: #2196F3; color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; margin: 5px;">
                                📹 Programmer téléconsultation
                            </button>
                            <button onclick="medicalAssistant.setupSmartAlerts()" style="background: #ff9800; color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; margin: 5px;">
                                🔔 Configurer alertes
                            </button>
                        </div>
                    </div>
                `;
            }

            generateEmergencyInstructions() {
                return `
                    <div style="background: #ffebee; padding: 20px; border-radius: 12px; margin: 15px 0; border: 3px solid #f44336;">
                        <h4>🆘 Instructions d'Urgence</h4>
                        
                        <div style="background: #f44336; color: white; padding: 15px; border-radius: 8px; margin: 15px 0; text-align: center;">
                            <h5>ACTIONS IMMÉDIATES REQUISES</h5>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>📞 Appels d'urgence</h5>
                                <ul style="margin-left: 20px;">
                                    <li><strong>SAMU: 15</strong> (Urgences médicales)</li>
                                    <li><strong>Pompiers: 18</strong> (Secours général)</li>
                                    <li><strong>Urgences: 112</strong> (Numéro européen)</li>
                                    <li><strong>Centre antipoison: 01 40 05 48 48</strong></li>
                                </ul>
                            </div>
                            <div>
                                <h5>🏥 Hôpitaux les plus proches</h5>
                                <ul style="margin-left: 20px;">
                                    <li>CHU Hôpital Central - 2.3 km</li>
                                    <li>Clinique Saint-Vincent - 3.7 km</li>
                                    <li>Hôpital Universitaire - 5.1 km</li>
                                    <li>Service d'urgences 24/7</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>⚡ En attendant les secours</h5>
                            <ul style="margin-left: 20px;">
                                <li>🛑 Ne prenez aucun médicament</li>
                                <li>😌 Restez calme et en position de sécurité</li>
                                <li>📱 Gardez le téléphone à portée</li>
                                <li>📋 Préparez liste médicaments/allergies</li>
                                <li>👥 Prévenez un proche si possible</li>
                                <li>🚪 Déverrouillez l'accès au domicile</li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            exportTimelineReport() {
                alert('📊 Rapport d\'évolution temporelle généré et téléchargé !');
            }

            setupSmartAlerts() {
                alert('🔔 Alertes intelligentes configurées avec succès !');
            }

            showLoading() {
                this.analyzeBtn.disabled = true;
                this.loading.classList.add('show');
                this.responseSection.classList.remove('show');
            }

            hideLoading() {
                this.analyzeBtn.disabled = false;
                this.loading.classList.remove('show');
            }

            showResponse(response) {
                this.responseContent.innerHTML = response;
                this.responseSection.classList.add('show');
                
                setTimeout(() => {
                    this.responseSection.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 300);
            }

            showError(message) {
                this.responseContent.innerHTML = `
                    <div style="color: #d32f2f; background: #ffebee; padding: 20px; border-radius: 15px;">
                        <h4>❌ Erreur lors de l'analyse</h4>
                        <p>${message}</p>
                    </div>
                `;
                this.responseSection.classList.add('show');
            }
        }

        // Fonctions globales
        function searchMedicalDB() {
            medicalAssistant.searchMedicalDB();
        }

        function startVideoCall() {
            medicalAssistant.startVideoCall();
        }

        function stopVideoCall() {
            medicalAssistant.stopVideoCall();
        }

        function toggleMute() {
            medicalAssistant.toggleMute();
        }

        function addSymptomEntry() {
            medicalAssistant.addSymptomEntry();
        }

        function connectSensors() {
            medicalAssistant.connectSensors();
        }

        function connectAppleWatch() {
            medicalAssistant.connectAppleWatch();
        }

        function connectThermometer() {
            medicalAssistant.connectThermometer();
        }

        function connectBPMonitor() {
            medicalAssistant.connectBPMonitor();
        }

        function connectPillbox() {
            medicalAssistant.connectPillbox();
        }

        function viewSleepData() {
            medicalAssistant.viewSleepData();
        }

        function viewActivityData() {
            medicalAssistant.viewActivityData();
        }

        function manualSync() {
            medicalAssistant.manualSync();
        }

        function exportToPDF() {
            const content = document.getElementById('responseContent').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Rapport Médical IA v4.0 - ${new Date().toLocaleDateString('fr-FR')}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        h3, h4, h5 { color: #1976D2; }
                        .emergency-alert { background: #ffebee; padding: 20px; border: 2px solid #f44336; }
                        .confidence-meter { background: #e0e0e0; height: 8px; border-radius: 4px; margin: 10px 0; }
                        .confidence-fill { height: 100%; background: linear-gradient(90deg, #f44336, #ff9800, #4caf50); }
                    </style>
                </head>
                <body>
                    <h1>🏥 Rapport de Consultation Médicale IA v4.0</h1>
                    <p><strong>Date:</strong> ${new Date().toLocaleString('fr-FR')}</p>
                    <p><strong>Version:</strong> Assistant Médical IA Ultimate 4.0</p>
                    <hr>
                    ${content}
                    <hr>
                    <p style="font-size: 12px; color: #666;">
                        Ce rapport a été généré par l'Assistant Médical IA v4.0 avec technologies avancées:
                        Machine Learning, IoT Integration, Cloud Sync, Telemedicine Platform.
                        Il ne remplace pas un diagnostic médical professionnel.
                    </p>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function saveToHistory() {
            medicalAssistant.manualSync();
            alert('💾 Consultation sauvegardée dans l\'historique et synchronisée avec le cloud !');
        }

        // Initialisation
        let medicalAssistant;
        document.addEventListener('DOMContentLoaded', () => {
            medicalAssistant = new MedicalAssistantV4();
            
            // Charger la langue sauvegardée
            const savedLanguage = localStorage.getItem('selectedLanguage');
            if (savedLanguage) {
                document.getElementById('languageSelect').value = savedLanguage;
                medicalAssistant.changeLanguage(savedLanguage);
            }
        });
