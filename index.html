<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant Médical IA 4.0 - Nexyna Pro Max</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .container {
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            max-width: 1600px;
            width: 95%;
            margin: 20px auto;
            overflow: hidden;
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .version-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
        }

        .language-selector {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 5px;
        }

        .language-selector select {
            background: transparent;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 10px;
        }

        .cloud-status {
            position: absolute;
            top: 50px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4caf50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .main-nav {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 12px 20px;
            border: none;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-tab.active {
            background: #2196F3;
            color: white;
        }

        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr 400px;
            gap: 30px;
        }

        /* Panneau patient */
        .patient-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        .form-group label {
            font-weight: 600;
            color: #1976D2;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .patient-summary {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 13px;
        }

        /* Capteurs biométriques */
        .sensors-panel {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .sensor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .sensor-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .sensor-value {
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .sensor-trend {
            font-size: 12px;
            color: #4caf50;
        }

        /* Corps interactif */
        .body-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .body-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .body-type-btn {
            padding: 10px 20px;
            border: 2px solid #2196F3;
            background: white;
            color: #2196F3;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .body-type-btn.active {
            background: #2196F3;
            color: white;
        }

        .view-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .view-btn {
            padding: 8px 15px;
            border: 1px solid #ccc;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .view-btn.active {
            background: #4caf50;
            color: white;
        }

        .body-container {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .body-svg {
            width: 100%;
            max-width: 280px;
            height: 450px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .body-part {
            fill: #e3f2fd;
            stroke: #2196F3;
            stroke-width: 2;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .body-part:hover {
            fill: #2196F3;
            stroke: #1976D2;
            stroke-width: 3;
            filter: drop-shadow(0 5px 15px rgba(33, 150, 243, 0.4));
        }

        .body-part.selected {
            fill: #f44336;
            stroke: #d32f2f;
            stroke-width: 3;
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pain-scale {
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .pain-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to right, #4caf50, #ffeb3b, #ff9800, #f44336);
            outline: none;
            margin: 15px 0;
        }

        .pain-display {
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            margin: 10px 0;
        }

        /* Panneau symptômes */
        .symptoms-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .voice-controls {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .voice-btn {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 10px 0;
        }

        .voice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .voice-btn.recording {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            animation: recordingPulse 1s ease-in-out infinite;
        }

        @keyframes recordingPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .quick-symptoms {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .symptom-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .symptom-tag {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .symptom-tag:hover {
            background: #2196F3;
            color: white;
        }

        .symptom-tag.selected {
            background: #4caf50;
            color: white;
        }

        .question-input {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .question-input textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 14px;
            min-height: 120px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .question-input textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .analyze-btn {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(33, 150, 243, 0.3);
        }

        /* Base de données médicale */
        .medical-db {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-box input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
        }

        .search-box button {
            padding: 10px 20px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .medical-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .medical-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
        }

        /* Téléconsultation */
        .teleconsult-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .video-container {
            background: #000;
            border-radius: 10px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }

        .video-placeholder {
            color: white;
            text-align: center;
        }

        .video-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .video-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-btn.start { background: #4caf50; color: white; }
        .video-btn.stop { background: #f44336; color: white; }
        .video-btn.mute { background: #ff9800; color: white; }

        /* Suivi temporal */
        .timeline-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .timeline {
            position: relative;
            margin: 20px 0;
        }

        .timeline-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: #2196F3;
            border-radius: 50%;
        }

        .chart-container {
            height: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        /* IA avancée */
        .ai-panel {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .ai-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .ai-indicator {
            width: 12px;
            height: 12px;
            background: #4caf50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .confidence-meter {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #f44336, #ff9800, #4caf50);
            transition: width 0.3s ease;
        }

        /* Cloud sync */
        .cloud-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .sync-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .sync-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }

        /* Section réponse */
        .response-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 5px solid #2196F3;
            display: none;
            grid-column: 1 / -1;
        }

        .response-section.show {
            display: block;
            animation: expandIn 0.6s ease-out;
        }

        @keyframes expandIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .emergency-alert {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            animation: emergencyBlink 1s ease-in-out infinite;
        }

        @keyframes emergencyBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2196F3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .disclaimer {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 1px solid #ffeaa7;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            font-size: 14px;
            color: #856404;
            grid-column: 1 / -1;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                width: calc(100% - 20px);
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <!-- Particules d'arrière-plan -->
    <div class="particles" id="particles"></div>

    <div class="container">
        <div class="header">
            <!-- Sélecteur de langue -->
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="fr">🇫🇷 Français</option>
                    <option value="en">🇬🇧 English</option>
                    <option value="es">🇪🇸 Español</option>
                    <option value="de">🇩🇪 Deutsch</option>
                    <option value="it">🇮🇹 Italiano</option>
                    <option value="ar">🇸🇦 العربية</option>
                </select>
            </div>

            <!-- Statut cloud -->
            <div class="cloud-status" id="cloudStatus">
                <div class="status-indicator"></div>
                <span>Cloud connecté</span>
            </div>

            <div class="version-badge">v4.0 ULTIMATE</div>
            <h1>🏥 Assistant Médical IA Ultimate</h1>
            <p>Plateforme médicale intelligente avec IA, téléconsultation et capteurs IoT</p>
        </div>

        <!-- Navigation par onglets -->
        <div class="main-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('consultation')">
                    🩺 Consultation
                </button>
                <button class="nav-tab" onclick="switchTab('database')">
                    📚 Base Médicale
                </button>
                <button class="nav-tab" onclick="switchTab('teleconsult')">
                    📹 Téléconsultation
                </button>
                <button class="nav-tab" onclick="switchTab('timeline')">
                    📈 Suivi Temporal
                </button>
                <button class="nav-tab" onclick="switchTab('sensors')">
                    📱 Capteurs IoT
                </button>
                <button class="nav-tab" onclick="switchTab('ai')">
                    🤖 IA Avancée
                </button>
                <button class="nav-tab" onclick="switchTab('cloud')">
                    ☁️ Cloud Sync
                </button>
            </div>
        </div>

        <!-- Onglet Consultation -->
        <div class="tab-content active" id="consultation">
            <div class="main-content">
                <!-- Panneau Patient -->
                <div class="patient-panel">
                    <h3 style="color: #1976D2; margin-bottom: 20px;">👤 Informations Patient</h3>
                    <form class="patient-form" id="patientForm">
                        <div class="form-group">
                            <label for="firstName">Prénom *</label>
                            <input type="text" id="firstName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName">Nom *</label>
                            <input type="text" id="lastName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="birthDate">Date de naissance *</label>
                            <input type="date" id="birthDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="gender">Sexe *</label>
                            <select id="gender" required>
                                <option value="">Sélectionner</option>
                                <option value="homme">Homme</option>
                                <option value="femme">Femme</option>
                                <option value="enfant-garcon">Enfant (Garçon)</option>
                                <option value="enfant-fille">Enfant (Fille)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="weight">Poids (kg)</label>
                            <input type="number" id="weight" min="1" max="300">
                        </div>
                        
                        <div class="form-group">
                            <label for="height">Taille (cm)</label>
                            <input type="number" id="height" min="50" max="250">
                        </div>
                        
                        <div class="form-group">
                            <label for="allergies">Allergies connues</label>
                            <textarea id="allergies" rows="2" placeholder="Médicaments, aliments, substances..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="medications">Traitements actuels</label>
                            <textarea id="medications" rows="2" placeholder="Médicaments pris régulièrement..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="medicalHistory">Antécédents médicaux</label>
                            <textarea id="medicalHistory" rows="3" placeholder="Maladies, opérations, hospitalisations..."></textarea>
                        </div>
                    </form>
                    
                    <div class="patient-summary" id="patientSummary">
                        <strong>📋 Résumé:</strong>
                        <div id="summaryContent">Remplissez les informations ci-dessus</div>
                    </div>

                    <!-- Capteurs biométriques -->
                    <div class="sensors-panel">
                        <h4 style="color: #1976D2; margin-bottom: 10px;">📱 Capteurs Biométriques</h4>
                        <div class="sensor-grid">
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;">Rythme Cardiaque</div>
                                <div class="sensor-value" id="heartRate">--</div>
                                <div class="sensor-trend" id="heartTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;">Température</div>
                                <div class="sensor-value" id="temperature">--</div>
                                <div class="sensor-trend" id="tempTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;">Tension</div>
                                <div class="sensor-value" id="bloodPressure">--</div>
                                <div class="sensor-trend" id="pressureTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;">SpO2</div>
                                <div class="sensor-value" id="oxygenSat">--</div>
                                <div class="sensor-trend" id="oxygenTrend">--</div>
                            </div>
                        </div>
                        <button class="voice-btn" onclick="connectSensors()">
                            📱 Connecter capteurs
                        </button>
                    </div>
                </div>

                <!-- Panneau Corps -->
                <div class="body-panel">
                    <h3 style="color: #1976D2; margin-bottom: 20px;">🫁 Localisation des symptômes</h3>
                    
                    <!-- Contrôles type de corps -->
                    <div class="body-controls">
                        <button class="body-type-btn active" onclick="switchBodyType('homme')">👨 Homme</button>
                        <button class="body-type-btn" onclick="switchBodyType('femme')">👩 Femme</button>
                        <button class="body-type-btn" onclick="switchBodyType('enfant')">🧒 Enfant</button>
                    </div>
                    
                    <!-- Contrôles de vue -->
                    <div class="view-controls">
                        <button class="view-btn active" onclick="switchView('face')">Face</button>
                        <button class="view-btn" onclick="switchView('profile')">Profil</button>
                        <button class="view-btn" onclick="switchView('back')">Dos</button>
                    </div>
                    
                    <!-- Container du corps -->
                    <div class="body-container">
                        <svg class="body-svg" viewBox="0 0 300 450" id="bodySvg">
                            <!-- Corps Homme Face -->
                            <g id="homme-face" class="body-view">
                                <!-- Tête -->
                                <ellipse class="body-part" data-part="tête" cx="150" cy="50" rx="35" ry="40" onclick="selectBodyPart('tête')" />
                                <!-- Cou -->
                                <rect class="body-part" data-part="cou" x="135" y="90" width="30" height="25" onclick="selectBodyPart('cou')" />
                                <!-- Épaules -->
                                <ellipse class="body-part" data-part="épaule gauche" cx="100" cy="130" rx="25" ry="15" onclick="selectBodyPart('épaule gauche')" />
                                <ellipse class="body-part" data-part="épaule droite" cx="200" cy="130" rx="25" ry="15" onclick="selectBodyPart('épaule droite')" />
                                <!-- Torse -->
                                <rect class="body-part" data-part="poitrine" x="110" y="115" width="80" height="80" onclick="selectBodyPart('poitrine')" />
                                <!-- Bras -->
                                <rect class="body-part" data-part="bras gauche" x="70" y="140" width="25" height="80" onclick="selectBodyPart('bras gauche')" />
                                <rect class="body-part" data-part="bras droit" x="205" y="140" width="25" height="80" onclick="selectBodyPart('bras droit')" />
                                <!-- Avant-bras -->
                                <rect class="body-part" data-part="avant-bras gauche" x="72" y="220" width="21" height="70" onclick="selectBodyPart('avant-bras gauche')" />
                                <rect class="body-part" data-part="avant-bras droit" x="207" y="220" width="21" height="70" onclick="selectBodyPart('avant-bras droit')" />
                                <!-- Mains -->
                                <ellipse class="body-part" data-part="main gauche" cx="82" cy="305" rx="12" ry="18" onclick="selectBodyPart('main gauche')" />
                                <ellipse class="body-part" data-part="main droite" cx="218" cy="305" rx="12" ry="18" onclick="selectBodyPart('main droite')" />
                                <!-- Abdomen -->
                                <rect class="body-part" data-part="abdomen" x="115" y="195" width="70" height="70" onclick="selectBodyPart('abdomen')" />
                                <!-- Hanches -->
                                <rect class="body-part" data-part="bassin" x="120" y="265" width="60" height="40" onclick="selectBodyPart('bassin')" />
                                <!-- Cuisses -->
                                <rect class="body-part" data-part="cuisse gauche" x="125" y="305" width="25" height="80" onclick="selectBodyPart('cuisse gauche')" />
                                <rect class="body-part" data-part="cuisse droite" x="150" y="305" width="25" height="80" onclick="selectBodyPart('cuisse droite')" />
                                <!-- Genoux -->
                                <circle class="body-part" data-part="genou gauche" cx="137" cy="385" r="12" onclick="selectBodyPart('genou gauche')" />
                                <circle class="body-part" data-part="genou droit" cx="162" cy="385" r="12" onclick="selectBodyPart('genou droit')" />
                                <!-- Jambes -->
                                <rect class="body-part" data-part="jambe gauche" x="127" y="397" width="20" height="75" onclick="selectBodyPart('jambe gauche')" />
                                <rect class="body-part" data-part="jambe droite" x="153" y="397" width="20" height="75" onclick="selectBodyPart('jambe droite')" />
                                <!-- Pieds -->
                                <ellipse class="body-part" data-part="pied gauche" cx="137" cy="485" rx="18" ry="12" onclick="selectBodyPart('pied gauche')" />
                                <ellipse class="body-part" data-part="pied droit" cx="162" cy="485" rx="18" ry="12" onclick="selectBodyPart('pied droit')" />
                            </g>
                            
                            <!-- Corps Femme Face -->
                            <g id="femme-face" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="tête" cx="150" cy="50" rx="32" ry="38" onclick="selectBodyPart('tête')" />
                                <rect class="body-part" data-part="cou" x="138" y="88" width="24" height="22" onclick="selectBodyPart('cou')" />
                                <ellipse class="body-part" data-part="épaule gauche" cx="105" cy="125" rx="22" ry="12" onclick="selectBodyPart('épaule gauche')" />
                                <ellipse class="body-part" data-part="épaule droite" cx="195" cy="125" rx="22" ry="12" onclick="selectBodyPart('épaule droite')" />
                                <rect class="body-part" data-part="poitrine" x="115" y="110" width="70" height="75" onclick="selectBodyPart('poitrine')" />
                                <rect class="body-part" data-part="bras gauche" x="75" y="135" width="22" height="75" onclick="selectBodyPart('bras gauche')" />
                                <rect class="body-part" data-part="bras droit" x="203" y="135" width="22" height="75" onclick="selectBodyPart('bras droit')" />
                                <rect class="body-part" data-part="avant-bras gauche" x="77" y="210" width="18" height="65" onclick="selectBodyPart('avant-bras gauche')" />
                                <rect class="body-part" data-part="avant-bras droit" x="205" y="210" width="18" height="65" onclick="selectBodyPart('avant-bras droit')" />
                                <ellipse class="body-part" data-part="main gauche" cx="86" cy="285" rx="10" ry="15" onclick="selectBodyPart('main gauche')" />
                                <ellipse class="body-part" data-part="main droite" cx="214" cy="285" rx="10" ry="15" onclick="selectBodyPart('main droite')" />
                                <rect class="body-part" data-part="abdomen" x="120" y="185" width="60" height="65" onclick="selectBodyPart('abdomen')" />
                                <ellipse class="body-part" data-part="bassin" cx="150" cy="275" rx="35" ry="25" onclick="selectBodyPart('bassin')" />
                                <rect class="body-part" data-part="cuisse gauche" x="130" y="300" width="22" height="85" onclick="selectBodyPart('cuisse gauche')" />
                                <rect class="body-part" data-part="cuisse droite" x="148" y="300" width="22" height="85" onclick="selectBodyPart('cuisse droite')" />
                                <circle class="body-part" data-part="genou gauche" cx="141" cy="385" r="10" onclick="selectBodyPart('genou gauche')" />
                                <circle class="body-part" data-part="genou droit" cx="159" cy="385" r="10" onclick="selectBodyPart('genou droit')" />
                                <rect class="body-part" data-part="jambe gauche" x="133" y="395" width="16" height="75" onclick="selectBodyPart('jambe gauche')" />
                                <rect class="body-part" data-part="jambe droite" x="151" y="395" width="16" height="75" onclick="selectBodyPart('jambe droite')" />
                                <ellipse class="body-part" data-part="pied gauche" cx="141" cy="480" rx="15" ry="10" onclick="selectBodyPart('pied gauche')" />
                                <ellipse class="body-part" data-part="pied droit" cx="159" cy="480" rx="15" ry="10" onclick="selectBodyPart('pied droit')" />
                            </g>
                            
                            <!-- Corps Enfant Face -->
                            <g id="enfant-face" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="tête" cx="150" cy="60" rx="40" ry="45" onclick="selectBodyPart('tête')" />
                                <rect class="body-part" data-part="cou" x="140" y="105" width="20" height="15" onclick="selectBodyPart('cou')" />
                                <ellipse class="body-part" data-part="épaule gauche" cx="110" cy="135" rx="20" ry="10" onclick="selectBodyPart('épaule gauche')" />
                                <ellipse class="body-part" data-part="épaule droite" cx="190" cy="135" rx="20" ry="10" onclick="selectBodyPart('épaule droite')" />
                                <rect class="body-part" data-part="poitrine" x="120" y="120" width="60" height="60" onclick="selectBodyPart('poitrine')" />
                                <rect class="body-part" data-part="bras gauche" x="85" y="140" width="18" height="60" onclick="selectBodyPart('bras gauche')" />
                                <rect class="body-part" data-part="bras droit" x="197" y="140" width="18" height="60" onclick="selectBodyPart('bras droit')" />
                                <rect class="body-part" data-part="avant-bras gauche" x="87" y="200" width="14" height="50" onclick="selectBodyPart('avant-bras gauche')" />
                                <rect class="body-part" data-part="avant-bras droit" x="199" y="200" width="14" height="50" onclick="selectBodyPart('avant-bras droit')" />
                                <ellipse class="body-part" data-part="main gauche" cx="94" cy="260" rx="8" ry="12" onclick="selectBodyPart('main gauche')" />
                                <ellipse class="body-part" data-part="main droite" cx="206" cy="260" rx="8" ry="12" onclick="selectBodyPart('main droite')" />
                                <rect class="body-part" data-part="abdomen" x="125" y="180" width="50" height="50" onclick="selectBodyPart('abdomen')" />
                                <rect class="body-part" data-part="bassin" x="130" y="230" width="40" height="30" onclick="selectBodyPart('bassin')" />
                                <rect class="body-part" data-part="cuisse gauche" x="135" y="260" width="18" height="70" onclick="selectBodyPart('cuisse gauche')" />
                                <rect class="body-part" data-part="cuisse droite" x="147" y="260" width="18" height="70" onclick="selectBodyPart('cuisse droite')" />
                                <circle class="body-part" data-part="genou gauche" cx="144" cy="330" r="8" onclick="selectBodyPart('genou gauche')" />
                                <circle class="body-part" data-part="genou droit" cx="156" cy="330" r="8" onclick="selectBodyPart('genou droit')" />
                                <rect class="body-part" data-part="jambe gauche" x="138" y="338" width="12" height="60" onclick="selectBodyPart('jambe gauche')" />
                                <rect class="body-part" data-part="jambe droite" x="150" y="338" width="12" height="60" onclick="selectBodyPart('jambe droite')" />
                                <ellipse class="body-part" data-part="pied gauche" cx="144" cy="408" rx="12" ry="8" onclick="selectBodyPart('pied gauche')" />
                                <ellipse class="body-part" data-part="pied droit" cx="156" cy="408" rx="12" ry="8" onclick="selectBodyPart('pied droit')" />
                            </g>
                        </svg>
                    </div>
                    
                    <div id="selectedPart" style="margin-top: 15px; font-weight: bold; color: #1976D2;"></div>
                    
                    <!-- Échelle de douleur -->
                    <div class="pain-scale">
                        <h4 style="color: #1976D2; margin-bottom: 10px;">📊 Intensité de la douleur</h4>
                        <input type="range" class="pain-slider" id="painScale" min="0" max="10" value="0" oninput="updatePainLevel(this.value)">
                        <div class="pain-display" id="painDisplay">😊 0/10</div>
                        <div style="display: flex; justify-content: space-between; font-size: 11px; color: #666;">
                            <span>Aucune</span>
                            <span>Légère</span>
                            <span>Modérée</span>
                            <span>Sévère</span>
                            <span>Extrême</span>
                        </div>
                    </div>
                </div>

                <!-- Panneau Symptômes -->
                <div class="symptoms-panel">
                    <!-- Reconnaissance vocale -->
                    <div class="voice-controls">
                        <h4 style="color: #1976D2; margin-bottom: 15px;">🎤 Reconnaissance vocale</h4>
                        <button class="voice-btn" id="voiceBtn" onclick="toggleVoiceRecognition()">
                            <span id="voiceText">🎤 Cliquez et décrivez vos symptômes</span>
                        </button>
                        <div id="voiceResult" style="margin-top: 10px; font-style: italic; color: #666; font-size: 13px;"></div>
                    </div>

                    <!-- Symptômes rapides -->
                    <div class="quick-symptoms">
                        <h4 style="color: #1976D2; margin-bottom: 10px;">⚡ Symptômes fréquents</h4>
                        <div class="symptom-tags">
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'mal de tête')">Mal de tête</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'fièvre')">Fièvre</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'nausée')">Nausée</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'fatigue')">Fatigue</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'toux')">Toux</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'douleur musculaire')">Douleur musculaire</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'vertige')">Vertige</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'insomnie')">Insomnie</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'douleur abdominale')">Douleur abdominale</span>
                            <span class="symptom-tag" onclick="toggleSymptom(this, 'difficulté respiration')">Difficulté à respirer</span>
                        </div>
                    </div>

                    <!-- IA Avancée -->
                    <div class="ai-panel">
                        <div class="ai-status">
                            <div class="ai-indicator"></div>
                            <span>IA Médicale Active</span>
                        </div>
                        <div>Niveau de confiance:</div>
                        <div class="confidence-meter">
                            <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
                        </div>
                        <div style="font-size: 12px; color: #666;" id="aiInsight">En attente d'analyse...</div>
                    </div>

                    <!-- Description détaillée -->
                    <div class="question-input">
                        <h4 style="color: #1976D2; margin-bottom: 15px;">✍️ Description détaillée</h4>
                        <textarea id="questionInput" placeholder="Décrivez précisément vos symptômes, leur début, leur évolution..." oninput="updateAIInsight()"></textarea>
                        
                        <button class="analyze-btn" id="analyzeBtn" onclick="analyzeSymptoms()">
                            🔍 Lancer l'analyse complète
                        </button>
                    </div>
                </div>

                <!-- Loading -->
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p id="loadingText">Analyse en cours avec IA avancée...</p>
                </div>

                <!-- Section Réponse -->
                <div class="response-section" id="responseSection">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 20px; font-size: 20px;">🩺</div>
                        <h3>Diagnostic IA - Rapport Complet</h3>
                        <div style="margin-left: auto;">
                            <button class="sync-btn" onclick="exportToPDF()">📄 Export PDF</button>
                            <button class="sync-btn" onclick="saveToHistory()">💾 Sauvegarder</button>
                        </div>
                    </div>
                    <div id="responseContent"></div>
                </div>

                <!-- Disclaimer -->
                <div class="disclaimer">
                    <strong>⚠️ Avertissement médical important :</strong> 
                    Cet assistant utilise une intelligence artificielle avancée pour analyser vos symptômes et fournir des informations médicales. 
                    Il ne remplace pas un diagnostic médical professionnel.
                </div>
            </div>
        </div>

        <!-- Onglet Base de Données Médicale -->
        <div class="tab-content" id="database">
            <div class="medical-db">
                <h3>📚 Base de Données Médicale Mondiale</h3>
                <p>Accédez à plus de 500 000 références médicales, études cliniques et protocoles de traitement</p>
                
                <div class="search-box">
                    <input type="text" id="medicalSearch" placeholder="Rechercher une maladie, symptôme, médicament...">
                    <button onclick="searchMedicalDB()">🔍 Rechercher</button>
                </div>
                
                <div class="medical-results" id="medicalResults">
                    <div class="medical-item">
                        <h4>💡 Suggestions de recherche</h4>
                        <p>• Hypertension artérielle - causes et traitements</p>
                        <p>• Diabète type 2 - protocoles de suivi</p>
                        <p>• Migraine - thérapies innovantes</p>
                        <p>• Dépression - approches thérapeutiques</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Téléconsultation -->
        <div class="tab-content" id="teleconsult">
            <div class="teleconsult-panel">
                <h3>📹 Téléconsultation Médicale</h3>
                <p>Consultez un médecin en temps réel par vidéoconférence sécurisée</p>
                
                <div class="video-container" id="videoContainer">
                    <div class="video-placeholder">
                        <h3>📹 En attente de connexion</h3>
                        <p>Cliquez sur "Démarrer" pour lancer la téléconsultation</p>
                    </div>
                </div>
                
                <div class="video-controls">
                    <button class="video-btn start" onclick="startVideoCall()">📹 Démarrer</button>
                    <button class="video-btn mute" onclick="toggleMute()">🎤 Mute</button>
                    <button class="video-btn stop" onclick="stopVideoCall()">❌ Arrêter</button>
                </div>
                
                <div style="margin-top: 30px;">
                    <h4>👨‍⚕️ Médecins disponibles</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div class="medical-item">
                            <h5>Dr. Marie Dubois</h5>
                            <p>Médecin généraliste • 15 ans d'expérience</p>
                            <p>🟢 Disponible maintenant</p>
                        </div>
                        <div class="medical-item">
                            <h5>Dr. Jean Martin</h5>
                            <p>Cardiologue • 20 ans d'expérience</p>
                            <p>🟡 Disponible dans 15 min</p>
                        </div>
                        <div class="medical-item">
                            <h5>Dr. Sarah Chen</h5>
                            <p>Pédiatre • 12 ans d'expérience</p>
                            <p>🟢 Disponible maintenant</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Suivi Temporal -->
        <div class="tab-content" id="timeline">
            <div class="timeline-container">
                <h3>📈 Suivi Temporal des Symptômes</h3>
                <p>Suivez l'évolution de vos symptômes et traitements dans le temps</p>
                
                <div class="chart-container">
                    <canvas id="symptomsChart" width="400" height="200"></canvas>
                </div>
                
                <div class="timeline" id="symptomsTimeline">
                    <div class="timeline-item">
                        <h5>Aujourd'hui - 14:30</h5>
                        <p><strong>Symptômes:</strong> Mal de tête (7/10), Fatigue</p>
                        <p><strong>Action:</strong> Prise de paracétamol 1g</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>Hier - 09:00</h5>
                        <p><strong>Symptômes:</strong> Légère fatigue (3/10)</p>
                        <p><strong>Action:</strong> Repos, hydratation</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>Il y a 3 jours - 16:45</h5>
                        <p><strong>Consultation:</strong> Dr. Martin</p>
                        <p><strong>Diagnostic:</strong> Syndrome viral probable</p>
                        <p><strong>Traitement:</strong> Repos, paracétamol si besoin</p>
                    </div>
                </div>
                
                <button class="analyze-btn" onclick="addSymptomEntry()">
                    ➕ Ajouter une entrée
                </button>
            </div>
        </div>

        <!-- Onglet Capteurs IoT -->
        <div class="tab-content" id="sensors">
            <div class="main-content">
                <div>
                    <h3>📱 Intégration Capteurs IoT</h3>
                    <p>Connectez vos appareils de santé connectés pour un suivi en temps réel</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>📱 Apple Watch</h4>
                            <p>Rythme cardiaque, SpO2, ECG</p>
                            <div id="appleWatchStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectAppleWatch()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>🌡️ Thermomètre Intelligent</h4>
                            <p>Température corporelle continue</p>
                            <div id="thermometerStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectThermometer()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>🩺 Tensiomètre Connected</h4>
                            <p>Tension artérielle automatique</p>
                            <div id="bpMonitorStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectBPMonitor()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>💊 Pilulier Intelligent</h4>
                            <p>Suivi des prises médicamenteuses</p>
                            <div id="pillboxStatus" style="color: #f44336;">🔴 Déconnecté</div>
                            <button class="voice-btn" onclick="connectPillbox()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>😴 Capteur de Sommeil</h4>
                            <p>Qualité et phases du sommeil</p>
                            <div id="sleepSensorStatus" style="color: #4caf50;">🟢 Connecté</div>
                            <button class="voice-btn" onclick="viewSleepData()" style="margin-top: 15px;">Voir données</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>🏃 Tracker d'Activité</h4>
                            <p>Pas, calories, activité physique</p>
                            <div id="activityTrackerStatus" style="color: #4caf50;">🟢 Connecté</div>
                            <button class="voice-btn" onclick="viewActivityData()" style="margin-top: 15px;">Voir données</button>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <h4>📊 Données en Temps Réel</h4>
                    <div class="chart-container">
                        <canvas id="realtimeChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet IA Avancée -->
        <div class="tab-content" id="ai">
            <div class="ai-panel" style="margin: 0;">
                <h3>🤖 Intelligence Artificielle Médicale Avancée</h3>
                <p>Analyse prédictive, apprentissage automatique et diagnostic assisté</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                    <div style="background: white; padding: 25px; border-radius: 15px;">
                        <h4>🧠 Machine Learning</h4>
                        <p>Analyse de patterns basée sur 2M+ cas médicaux</p>
                        
                        <div style="margin: 20px 0;">
                            <div>Précision diagnostique:</div>
                            <div class="confidence-meter">
                                <div class="confidence-fill" style="width: 94%"></div>
                            </div>
                            <div style="text-align: center; font-weight: bold; color: #4caf50;">94.2%</div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5>🔄 Entraînement Continu</h5>
                            <p style="font-size: 13px;">Dernière mise à jour: Il y a 2 heures</p>
                            <p style="font-size: 13px;">Nouveaux cas analysés: 1,247</p>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 25px; border-radius: 15px;">
                        <h4>🔮 Analyse Prédictive</h4>
                        <p>Prédiction de l'évolution des pathologies</p>
                        
                        <div style="margin: 20px 0;">
                            <div>Évaluation des risques:</div>
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 8px; margin: 10px 0;">
                                <div style="color: #4caf50; font-weight: bold;">🟢 Risque Faible</div>
                                <div style="font-size: 13px;">Probabilité de complication: 12%</div>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5>💡 Recommandations IA</h5>
                            <ul style="font-size: 13px; margin-left: 20px;">
                                <li>Surveillance symptômes 48h</li>
                                <li>Consultation si aggravation</li>
                                <li>Repos et hydratation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Cloud Sync -->
        <div class="tab-content" id="cloud">
            <div class="cloud-panel">
                <h3>☁️ Synchronisation Cloud Sécurisée</h3>
                <p>Sauvegarde automatique et accès multi-plateforme à vos données médicales</p>
                
                <div class="sync-status">
                    <div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="status-indicator"></div>
                            <span>Statut: Synchronisé</span>
                        </div>
                        <div style="font-size: 13px; color: #666; margin-top: 5px;">
                            Dernière sync: Il y a 2 minutes
                        </div>
                    </div>
                    <button class="sync-btn" onclick="manualSync()">🔄 Synchroniser</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                        <h4>💾 Stockage</h4>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>Utilisé:</span>
                                <span>2.3 GB / 100 GB</span>
                            </div>
                            <div class="confidence-meter" style="margin: 10px 0;">
                                <div class="confidence-fill" style="width: 2.3%; background: #4caf50;"></div>
                            </div>
                        </div>
                        
                        <div style="font-size: 13px; color: #666;">
                            <p>• 127 consultations</p>
                            <p>• 45 images médicales</p>
                            <p>• 89 rapports PDF</p>
                            <p>• 15,432 données capteurs</p>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                        <h4>🔒 Sécurité</h4>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span>Chiffrement AES-256</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span>Sauvegarde redondante</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span>Conformité RGPD</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">✅</span>
                                <span>Certification ISO 27001</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentBodyType = 'homme';
        let currentView = 'face';
        let selectedBodyPart = '';
        let selectedSymptoms = [];
        let painLevel = 0;
        let sensorsConnected = false;
        let videoCallActive = false;
        let voiceRecognition = null;

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Assistant Médical IA v4.0 - Initialisation...');
            
            createParticles();
            initializeVoiceRecognition();
            updatePatientSummary();
            startSensorSimulation();
            
            console.log('✅ Assistant Médical IA v4.0 prêt !');
        });

        // Création des particules d'arrière-plan
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 25; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 12 + 4 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Navigation par onglets
        function switchTab(tabName) {
            console.log('Changement vers onglet:', tabName);
            
            // Mettre à jour les boutons de navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
            
            // Afficher le contenu correspondant
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            
            // Initialiser le contenu spécifique
            if (tabName === 'timeline') {
                initializeTimeline();
            } else if (tabName === 'sensors') {
                updateSensorDisplay();
            }
        }

        // Gestion du formulaire patient
        function updatePatientSummary() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const birthDate = document.getElementById('birthDate').value;
            const gender = document.getElementById('gender').value;
            const weight = document.getElementById('weight').value;
            const height = document.getElementById('height').value;
            
            let summary = '';
            if (firstName || lastName) {
                summary += `<div><strong>Patient:</strong> ${firstName} ${lastName}</div>`;
            }
            
            if (birthDate) {
                const age = calculateAge(birthDate);
                summary += `<div><strong>Âge:</strong> ${age} ans</div>`;
            }
            
            if (gender) {
                summary += `<div><strong>Sexe:</strong> ${gender}</div>`;
            }
            
            if (weight && height) {
                const bmi = (weight / ((height/100) ** 2)).toFixed(1);
                summary += `<div><strong>IMC:</strong> ${bmi}</div>`;
            }
            
            document.getElementById('summaryContent').innerHTML = summary || 'Remplissez les informations ci-dessus';
        }

        function calculateAge(birthDate) {
            const birth = new Date(birthDate);
            const today = new Date();
            let age = today.getFullYear() - birth.getFullYear();
            const monthDiff = today.getMonth() - birth.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            
            return age;
        }

        // Ajout des event listeners pour le formulaire
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('firstName').addEventListener('input', updatePatientSummary);
            document.getElementById('lastName').addEventListener('input', updatePatientSummary);
            document.getElementById('birthDate').addEventListener('input', updatePatientSummary);
            document.getElementById('gender').addEventListener('input', updatePatientSummary);
            document.getElementById('weight').addEventListener('input', updatePatientSummary);
            document.getElementById('height').addEventListener('input', updatePatientSummary);
        });

        // Gestion du corps interactif
        function switchBodyType(type) {
            console.log('Changement type de corps:', type);
            currentBodyType = type;
            
            // Mettre à jour les boutons
            document.querySelectorAll('.body-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[onclick="switchBodyType('${type}')"]`).classList.add('active');
            
            updateBodyDisplay();
        }

        function switchView(view) {
            console.log('Changement vue:', view);
            currentView = view;
            
            // Mettre à jour les boutons
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[onclick="switchView('${view}')"]`).classList.add('active');
            
            updateBodyDisplay();
        }

        function updateBodyDisplay() {
            // Masquer toutes les vues
            document.querySelectorAll('.body-view').forEach(view => {
                view.style.display = 'none';
            });
            
            // Afficher la vue actuelle
            const viewId = `${currentBodyType}-${currentView}`;
            const currentViewElement = document.getElementById(viewId);
            if (currentViewElement) {
                currentViewElement.style.display = 'block';
            } else {
                // Fallback vers la vue face
                const faceView = document.getElementById(`${currentBodyType}-face`);
                if (faceView) {
                    faceView.style.display = 'block';
                }
            }
            
            clearBodySelection();
        }

        function clearBodySelection() {
            document.querySelectorAll('.body-part').forEach(part => {
                part.classList.remove('selected');
            });
            selectedBodyPart = '';
            document.getElementById('selectedPart').textContent = '';
        }

        function selectBodyPart(part) {
            console.log('Sélection partie du corps:', part);
            
            clearBodySelection();
            
            // Trouver l'élément cliqué et le marquer comme sélectionné
            const partElements = document.querySelectorAll(`[data-part="${part}"]`);
            partElements.forEach(element => {
                element.classList.add('selected');
            });
            
            selectedBodyPart = part;
            document.getElementById('selectedPart').textContent = `Zone sélectionnée : ${part}`;
        }

        // Échelle de douleur
        function updatePainLevel(level) {
            console.log('Niveau de douleur:', level);
            painLevel = level;
            const emojis = ['😊', '🙂', '😐', '😕', '😟', '😣', '😖', '😫', '😩', '😱', '🆘'];
            const colors = ['#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722', '#f44336', '#e91e63', '#9c27b0', '#673ab7'];
            
            document.getElementById('painDisplay').textContent = `${emojis[level]} ${level}/10`;
            document.getElementById('painDisplay').style.color = colors[level];
        }

        // Gestion des symptômes
        function toggleSymptom(element, symptom) {
            console.log('Toggle symptôme:', symptom);
            
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                selectedSymptoms = selectedSymptoms.filter(s => s !== symptom);
            } else {
                element.classList.add('selected');
                selectedSymptoms.push(symptom);
            }
            
            updateSymptomText();
        }

        function updateSymptomText() {
            const currentText = document.getElementById('questionInput').value;
            const symptomsText = selectedSymptoms.join(', ');
            
            if (symptomsText && !currentText.includes(symptomsText)) {
                document.getElementById('questionInput').value = currentText ? 
                    `${currentText}\n\nSymptômes sélectionnés: ${symptomsText}` : 
                    `Symptômes sélectionnés: ${symptomsText}`;
            }
        }

        // Reconnaissance vocale
        function initializeVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                voiceRecognition = new SpeechRecognition();
                voiceRecognition.lang = 'fr-FR';
                voiceRecognition.continuous = false;
                voiceRecognition.interimResults = true;

                voiceRecognition.onstart = function() {
                    document.getElementById('voiceBtn').classList.add('recording');
                    document.getElementById('voiceText').textContent = '🔴 Parlez maintenant...';
                    document.getElementById('voiceResult').textContent = 'Écoute en cours...';
                };

                voiceRecognition.onresult = function(event) {
                    let transcript = '';
                    for (let i = 0; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                    }
                    
                    if (event.results[event.results.length - 1].isFinal) {
                        document.getElementById('questionInput').value = transcript;
                        document.getElementById('voiceResult').textContent = `Reconnu: "${transcript}"`;
                        updateAIInsight();
                    } else {
                        document.getElementById('voiceResult').textContent = `En cours: "${transcript}"`;
                    }
                };

                voiceRecognition.onerror = function(event) {
                    document.getElementById('voiceResult').textContent = `Erreur: ${event.error}`;
                    resetVoiceButton();
                };

                voiceRecognition.onend = function() {
                    resetVoiceButton();
                };
            } else {
                document.getElementById('voiceBtn').style.display = 'none';
            }
        }

        function toggleVoiceRecognition() {
            if (voiceRecognition) {
                if (document.getElementById('voiceBtn').classList.contains('recording')) {
                    voiceRecognition.stop();
                } else {
                    voiceRecognition.start();
                }
            }
        }

        function resetVoiceButton() {
            document.getElementById('voiceBtn').classList.remove('recording');
            document.getElementById('voiceText').textContent = '🎤 Cliquez et décrivez vos symptômes';
        }

        // IA en temps réel
        function updateAIInsight() {
            const text = document.getElementById('questionInput').value;
            const confidence = Math.min(text.length * 2, 100);
            
            document.getElementById('confidenceFill').style.width = confidence + '%';
            
            if (text.length < 10) {
                document.getElementById('aiInsight').textContent = 'En attente d\'analyse...';
            } else if (text.length < 50) {
                document.getElementById('aiInsight').textContent = 'Analyse préliminaire en cours...';
            } else {
                const keywords = {
                    'urgence': 'Détection de mots-clés d\'urgence - Évaluation prioritaire',
                    'douleur': 'Analyse de symptômes douloureux - Pattern reconnu',
                    'fièvre': 'Syndrome infectieux possible - Corrélation détectée',
                    'mal de tête': 'Céphalées analysées - Multiple causes possibles'
                };
                
                let insight = 'Analyse approfondie terminée - ';
                let found = false;
                
                for (const [keyword, message] of Object.entries(keywords)) {
                    if (text.toLowerCase().includes(keyword)) {
                        insight = message;
                        found = true;
                        break;
                    }
                }
                
                if (!found) {
                    insight += 'Symptômes complexes nécessitant évaluation médicale';
                }
                
                document.getElementById('aiInsight').textContent = insight;
            }
        }

        // Analyse des symptômes
        function analyzeSymptoms() {
            console.log('Début analyse des symptômes');
            
            const question = document.getElementById('questionInput').value.trim();
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            
            if (!question && !selectedBodyPart && selectedSymptoms.length === 0) {
                alert('⚠️ Veuillez décrire vos symptômes');
                return;
            }
            
            if (!firstName || !lastName) {
                alert('⚠️ Veuillez remplir les informations patient');
                return;
            }
            
            showLoading();
            
            setTimeout(() => {
                const response = generateAnalysisResponse();
                showResponse(response);
                hideLoading();
            }, 3000);
        }

        function generateAnalysisResponse() {
            const question = document.getElementById('questionInput').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            
            let response = `
                <h3>🩺 Rapport de Consultation Médicale IA</h3>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin: 15px 0;">
                    <h4>👤 Informations Patient</h4>
                    <p><strong>Nom:</strong> ${firstName} ${lastName}</p>
                    <p><strong>Zone affectée:</strong> ${selectedBodyPart || 'Non spécifiée'}</p>
                    <p><strong>Intensité douleur:</strong> ${painLevel}/10</p>
                    <p><strong>Symptômes sélectionnés:</strong> ${selectedSymptoms.join(', ') || 'Aucun'}</p>
                </div>
                
                <div style="background: #e3f2fd; padding: 20px; border-radius: 12px; margin: 15px 0;">
                    <h4>🔍 Analyse des Symptômes</h4>
                    <p><strong>Description:</strong> "${question}"</p>
                    
                    <h5>🎯 Diagnostic préliminaire</h5>
                    <p>Basé sur les informations fournies, plusieurs hypothèses sont possibles :</p>
                    <ul>
                        <li>Syndrome général non spécifique</li>
                        <li>Réaction de stress ou fatigue</li>
                        <li>Pathologie bénigne probable</li>
                    </ul>
                </div>
                
                <div style="background: #e8f5e8; padding: 20px; border-radius: 12px; margin: 15px 0;">
                    <h4>💡 Recommandations</h4>
                    <ul>
                        <li>🛌 Repos et surveillance des symptômes</li>
                        <li>💧 Hydratation régulière (1.5-2L/jour)</li>
                        <li>🌡️ Surveillance de la température</li>
                        <li>📞 Consultation médicale si aggravation</li>
                    </ul>
                </div>
                
                <div style="background: #fff3e0; padding: 20px; border-radius: 12px; margin: 15px 0;">
                    <h4>⚠️ Signes d'alerte</h4>
                    <p>Consultez immédiatement si :</p>
                    <ul>
                        <li>Aggravation brutale des symptômes</li>
                        <li>Fièvre persistante > 39°C</li>
                        <li>Douleur devenant insupportable</li>
                        <li>Difficultés respiratoires</li>
                    </ul>
                </div>
            `;
            
            // Détection d'urgence
            if (painLevel >= 9 || question.toLowerCase().includes('urgence') || question.toLowerCase().includes('difficulté respirer')) {
                response = `
                    <div class="emergency-alert">
                        <h2>🚨 URGENCE MÉDICALE DÉTECTÉE</h2>
                        <p><strong>ATTENTION: Situation nécessitant une prise en charge immédiate</strong></p>
                        <div style="margin: 20px 0;">
                            <button onclick="window.open('tel:15')" style="background: white; color: #f44336; border: none; padding: 15px 25px; border-radius: 25px; margin: 5px; font-weight: bold; cursor: pointer;">📞 SAMU (15)</button>
                            <button onclick="window.open('tel:112')" style="background: white; color: #f44336; border: none; padding: 15px 25px; border-radius: 25px; margin: 5px; font-weight: bold; cursor: pointer;">🆘 Urgences (112)</button>
                        </div>
                    </div>
                ` + response;
            }
            
            return response;
        }

        function showLoading() {
            document.getElementById('analyzeBtn').disabled = true;
            document.getElementById('loading').classList.add('show');
            document.getElementById('responseSection').classList.remove('show');
            
            // Animation du texte de chargement
            const loadingTexts = [
                'Initialisation IA médicale...',
                'Analyse des symptômes...',
                'Consultation base de données...',
                'Génération du diagnostic...',
                'Finalisation du rapport...'
            ];
            
            let textIndex = 0;
            const textInterval = setInterval(() => {
                if (textIndex < loadingTexts.length) {
                    document.getElementById('loadingText').textContent = loadingTexts[textIndex];
                    textIndex++;
                } else {
                    clearInterval(textInterval);
                }
            }, 600);
        }

        function hideLoading() {
            document.getElementById('analyzeBtn').disabled = false;
            document.getElementById('loading').classList.remove('show');
        }

        function showResponse(response) {
            document.getElementById('responseContent').innerHTML = response;
            document.getElementById('responseSection').classList.add('show');
            
            setTimeout(() => {
                document.getElementById('responseSection').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 300);
        }

        // Base de données médicale
        function searchMedicalDB() {
            const query = document.getElementById('medicalSearch').value.toLowerCase();
            const results = document.getElementById('medicalResults');
            
            if (!query.trim()) {
                results.innerHTML = '<div class="medical-item"><h4>💡 Entrez un terme de recherche</h4></div>';
                return;
            }
            
            const medicalData = {
                'migraine': {
                    name: 'Migraine',
                    symptoms: ['mal de tête pulsatile', 'nausées', 'sensibilité à la lumière'],
                    treatments: ['Triptans', 'Anti-inflammatoires', 'Repos'],
                    prevention: ['Éviter déclencheurs', 'Sommeil régulier', 'Gestion stress']
                },
                'hypertension': {
                    name: 'Hypertension artérielle',
                    symptoms: ['maux de tête', 'vertiges', 'fatigue'],
                    treatments: ['ACE inhibiteurs', 'Bêta-bloquants', 'Diurétiques'],
                    prevention: ['Régime pauvre en sel', 'Exercice', 'Gestion stress']
                },
                'diabète': {
                    name: 'Diabète type 2',
                    symptoms: ['soif excessive', 'urination fréquente', 'fatigue'],
                    treatments: ['Metformine', 'Insuline', 'Régime'],
                    prevention: ['Alimentation équilibrée', 'Activité physique']
                }
            };
            
            let found = false;
            let resultHTML = '';
            
            for (const [key, data] of Object.entries(medicalData)) {
                if (key.includes(query) || data.name.toLowerCase().includes(query)) {
                    found = true;
                    resultHTML += `
                        <div class="medical-item">
                            <h4>🏥 ${data.name}</h4>
                            <p><strong>Symptômes:</strong> ${data.symptoms.join(', ')}</p>
                            <p><strong>Traitements:</strong> ${data.treatments.join(', ')}</p>
                            <p><strong>Prévention:</strong> ${data.prevention.join(', ')}</p>
                        </div>
                    `;
                }
            }
            
            if (!found) {
                resultHTML = '<div class="medical-item"><h4>❌ Aucun résultat trouvé</h4><p>Essayez avec d\'autres termes</p></div>';
            }
            
            results.innerHTML = resultHTML;
        }

        // Téléconsultation
        function startVideoCall() {
            console.log('Démarrage téléconsultation');
            videoCallActive = true;
            const container = document.getElementById('videoContainer');
            
            container.innerHTML = `
                <div style="color: white; text-align: center;">
                    <h3>📹 Appel en cours...</h3>
                    <div style="background: #4caf50; color: white; padding: 10px; border-radius: 8px; margin: 20px 0;">
                        Dr. Marie Dubois connectée
                    </div>
                    <div style="font-size: 48px; margin: 20px 0;">👩‍⚕️</div>
                    <p>Qualité: HD • Connexion sécurisée</p>
                    <div style="margin-top: 20px;">
                        <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; display: inline-block;">
                            🔴 REC 00:${String(Math.floor(Math.random() * 60)).padStart(2, '0')}
                        </div>
                    </div>
                </div>
            `;
            
            // Simuler une conversation
            setTimeout(() => {
                simulateDocTorConversation();
            }, 3000);
        }

        function simulateDocTorConversation() {
            const messages = [
                "Dr. Dubois: Bonjour, comment puis-je vous aider aujourd'hui ?",
                "Dr. Dubois: Je vois que vous avez décrit des symptômes...",
                "Dr. Dubois: Depuis combien de temps avez-vous ces symptômes ?",
                "Dr. Dubois: Avez-vous pris des médicaments récemment ?"
            ];
            
            let messageIndex = 0;
            const interval = setInterval(() => {
                if (messageIndex < messages.length && videoCallActive) {
                    const container = document.getElementById('videoContainer');
                    const messageDiv = document.createElement('div');
                    messageDiv.style.cssText = `
                        position: absolute;
                        bottom: ${50 + messageIndex * 30}px;
                        left: 20px;
                        right: 20px;
                        background: rgba(0,0,0,0.8);
                        color: white;
                        padding: 10px;
                        border-radius: 8px;
                        font-size: 14px;
                    `;
                    messageDiv.textContent = messages[messageIndex];
                    container.appendChild(messageDiv);
                    messageIndex++;
                } else {
                    clearInterval(interval);
                }
            }, 4000);
        }

        function stopVideoCall() {
            console.log('Arrêt téléconsultation');
            videoCallActive = false;
            const container = document.getElementById('videoContainer');
            container.innerHTML = `
                <div class="video-placeholder">
                    <h3>📹 Consultation terminée</h3>
                    <p>Durée: 12 minutes • Enregistrement sauvegardé</p>
                    <button class="video-btn start" onclick="downloadConsultation()" style="margin-top: 15px;">
                        📄 Télécharger rapport
                    </button>
                </div>
            `;
        }

        function toggleMute() {
            const btn = event.target;
            if (btn.textContent.includes('Mute')) {
                btn.textContent = '🔇 Unmute';
                btn.style.background = '#f44336';
            } else {
                btn.textContent = '🎤 Mute';
                btn.style.background = '#ff9800';
            }
        }

        function downloadConsultation() {
            alert('💾 Rapport de téléconsultation téléchargé avec succès !');
        }

        // Suivi temporal
        function initializeTimeline() {
            console.log('Initialisation timeline');
            const timelineData = JSON.parse(localStorage.getItem('symptomsTimeline') || '[]');
            createSymptomsChart(timelineData);
            updateTimelineDisplay(timelineData);
        }

        function createSymptomsChart(data) {
            const canvas = document.getElementById('symptomsChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Dessiner les axes
            ctx.strokeStyle = '#ccc';
            ctx.beginPath();
            ctx.moveTo(50, 50);
            ctx.lineTo(50, 180);
            ctx.lineTo(380, 180);
            ctx.stroke();
            
            // Dessiner les données
            if (data.length > 0) {
                ctx.strokeStyle = '#f44336';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                data.forEach((point, index) => {
                    const x = 50 + (index * 50);
                    const y = 180 - (point.pain * 13);
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    ctx.fillStyle = '#f44336';
                    ctx.fillRect(x-3, y-3, 6, 6);
                });
                ctx.stroke();
            }
            
            // Labels
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.fillText('Douleur (0-10)', 5, 30);
            ctx.fillText('Temps', 350, 195);
        }

        function addSymptomEntry() {
            console.log('Ajout entrée symptôme');
            const pain = painLevel;
            const symptoms = selectedSymptoms;
            const description = document.getElementById('questionInput').value;
            
            const entry = {
                date: new Date(),
                pain: pain,
                symptoms: symptoms,
                description: description,
                bodyPart: selectedBodyPart
            };
            
            let timeline = JSON.parse(localStorage.getItem('symptomsTimeline') || '[]');
            timeline.unshift(entry);
            
            if (timeline.length > 20) {
                timeline = timeline.slice(0, 20);
            }
            
            localStorage.setItem('symptomsTimeline', JSON.stringify(timeline));
            initializeTimeline();
            
            alert('✅ Entrée ajoutée au suivi temporal');
        }

        function updateTimelineDisplay(data) {
            const timeline = document.getElementById('symptomsTimeline');
            if (!timeline) return;
            
            if (data.length === 0) {
                timeline.innerHTML = `
                    <div class="timeline-item">
                        <h5>Aucune donnée</h5>
                        <p>Commencez à enregistrer vos symptômes pour voir l'évolution</p>
                    </div>
                `;
                return;
            }
            
            timeline.innerHTML = data.map(entry => {
                const date = new Date(entry.date).toLocaleString();
                return `
                    <div class="timeline-item">
                        <h5>${date}</h5>
                        <p><strong>Douleur:</strong> ${entry.pain}/10</p>
                        ${entry.bodyPart ? `<p><strong>Zone:</strong> ${entry.bodyPart}</p>` : ''}
                        ${entry.symptoms.length > 0 ? `<p><strong>Symptômes:</strong> ${entry.symptoms.join(', ')}</p>` : ''}
                        ${entry.description ? `<p><strong>Description:</strong> ${entry.description}</p>` : ''}
                    </div>
                `;
            }).join('');
        }

        // Capteurs IoT
        function startSensorSimulation() {
            setInterval(() => {
                if (sensorsConnected) {
                    updateSensorData();
                }
            }, 2000);
        }

        function updateSensorData() {
            const heartRate = Math.floor(Math.random() * 40 + 60);
            const temperature = (Math.random() * 2 + 36.5).toFixed(1);
            const bloodPressure = `${Math.floor(Math.random() * 40 + 110)}/${Math.floor(Math.random() * 20 + 70)}`;
            const oxygenSat = Math.floor(Math.random() * 5 + 95);
            
            document.getElementById('heartRate').textContent = `${heartRate} bpm`;
            document.getElementById('temperature').textContent = `${temperature}°C`;
            document.getElementById('bloodPressure').textContent = bloodPressure;
            document.getElementById('oxygenSat').textContent = `${oxygenSat}%`;
            
            document.getElementById('heartTrend').textContent = heartRate > 80 ? '↗️ Élevé' : '✅ Normal';
            document.getElementById('tempTrend').textContent = temperature > 37.5 ? '🔥 Fièvre' : '✅ Normal';
            document.getElementById('pressureTrend').textContent = '📊 Stable';
            document.getElementById('oxygenTrend').textContent = oxygenSat > 97 ? '✅ Excellent' : '⚠️ Surveiller';
        }

        function updateSensorDisplay() {
            if (sensorsConnected) {
                updateSensorData();
            } else {
                document.getElementById('heartRate').textContent = '--';
                document.getElementById('temperature').textContent = '--';
                document.getElementById('bloodPressure').textContent = '--';
                document.getElementById('oxygenSat').textContent = '--';
            }
        }

        function connectSensors() {
            sensorsConnected = !sensorsConnected;
            
            if (sensorsConnected) {
                alert('📱 Capteurs connectés avec succès !');
                updateSensorData();
            } else {
                alert('📱 Capteurs déconnectés');
                updateSensorDisplay();
            }
        }

        // Fonctions de connexion spécifiques
        function connectAppleWatch() {
            document.getElementById('appleWatchStatus').innerHTML = '🟢 Connecté';
            document.getElementById('appleWatchStatus').style.color = '#4caf50';
            alert('⌚ Apple Watch connectée - Données biométriques synchronisées');
        }

        function connectThermometer() {
            document.getElementById('thermometerStatus').innerHTML = '🟢 Connecté';
            document.getElementById('thermometerStatus').style.color = '#4caf50';
            alert('🌡️ Thermomètre intelligent connecté');
        }

        function connectBPMonitor() {
            document.getElementById('bpMonitorStatus').innerHTML = '🟢 Connecté';
            document.getElementById('bpMonitorStatus').style.color = '#4caf50';
            alert('🩺 Tensiomètre connecté');
        }

        function connectPillbox() {
            document.getElementById('pillboxStatus').innerHTML = '🟢 Connecté';
            document.getElementById('pillboxStatus').style.color = '#4caf50';
            alert('💊 Pilulier intelligent connecté');
        }

        function viewSleepData() {
            alert('😴 Données de sommeil:\n• Durée: 7h 23min\n• Efficacité: 89%\n• Phases profondes: 1h 45min\n• Réveils: 3');
        }

        function viewActivityData() {
            alert('🏃 Données d\'activité:\n• Pas: 8,547\n• Calories: 287 kcal\n• Distance: 6.2 km\n• Temps actif: 2h 15min');
        }

        // Cloud sync
        function manualSync() {
            const btn = event.target;
            btn.textContent = '🔄 Synchronisation...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.textContent = '✅ Synchronisé';
                setTimeout(() => {
                    btn.textContent = '🔄 Synchroniser';
                    btn.disabled = false;
                }, 2000);
            }, 3000);
            
            // Simuler la sauvegarde
            const cloudData = {
                patient: {
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value
                },
                symptoms: selectedSymptoms,
                bodyPart: selectedBodyPart,
                painLevel: painLevel
            };
            
            localStorage.setItem('cloudBackup', JSON.stringify(cloudData));
        }

        // Export et sauvegarde
        function exportToPDF() {
            const content = document.getElementById('responseContent').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Rapport Médical IA v4.0 - ${new Date().toLocaleDateString('fr-FR')}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        h3, h4, h5 { color: #1976D2; }
                        .emergency-alert { background: #ffebee; padding: 20px; border: 2px solid #f44336; }
                    </style>
                </head>
                <body>
                    <h1>🏥 Rapport de Consultation Médicale IA v4.0</h1>
                    <p><strong>Date:</strong> ${new Date().toLocaleString('fr-FR')}</p>
                    <p><strong>Version:</strong> Assistant Médical IA Ultimate 4.0</p>
                    <hr>
                    ${content}
                    <hr>
                    <p style="font-size: 12px; color: #666;">
                        Ce rapport a été généré par l'Assistant Médical IA v4.0.
                        Il ne remplace pas un diagnostic médical professionnel.
                    </p>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function saveToHistory() {
            const consultation = {
                id: Date.now(),
                date: new Date(),
                patient: {
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value
                },
                symptoms: {
                    description: document.getElementById('questionInput').value,
                    selectedSymptoms: selectedSymptoms,
                    bodyPart: selectedBodyPart,
                    painLevel: painLevel
                }
            };
            
            let history = JSON.parse(localStorage.getItem('consultationHistory') || '[]');
            history.unshift(consultation);
            
            if (history.length > 10) {
                history = history.slice(0, 10);
            }
            
            localStorage.setItem('consultationHistory', JSON.stringify(history));
            alert('💾 Consultation sauvegardée dans l\'historique !');
        }

        // Changement de langue
        function changeLanguage() {
            const lang = document.getElementById('languageSelect').value;
            console.log('Changement de langue:', lang);
            
            // Ici on pourrait implémenter la traduction complète
            // Pour l'instant, on sauvegarde juste la préférence
            localStorage.setItem('selectedLanguage', lang);
            
            if (voiceRecognition) {
                const langCodes = {
                    'fr': 'fr-FR',
                    'en': 'en-US',
                    'es': 'es-ES',
                    'de': 'de-DE',
                    'it': 'it-IT',
                    'ar': 'ar-SA'
                };
                voiceRecognition.lang = langCodes[lang] || 'fr-FR';
            }
            
            alert(`🌍 Langue changée vers: ${lang.toUpperCase()}`);
        }

        // Event listeners supplémentaires
        document.addEventListener('DOMContentLoaded', function() {
            // Charger la langue sauvegardée
            const savedLanguage = localStorage.getItem('selectedLanguage');
            if (savedLanguage) {
                document.getElementById('languageSelect').value = savedLanguage;
            }
            
            // Ajouter event listener pour changement de langue
            document.getElementById('languageSelect').addEventListener('change', changeLanguage);
            
            console.log('✅ Tous les event listeners ajoutés');
        });

        // Simulation de synchronisation cloud
        setInterval(() => {
            const status = document.getElementById('cloudStatus');
            const now = new Date().toLocaleTimeString();
            
            // Animation de sync occasionnelle
            if (Math.random() < 0.1) { // 10% de chance
                status.innerHTML = `
                    <div class="status-indicator" style="background: #ff9800;"></div>
                    <span>Synchronisation...</span>
                `;
                
                setTimeout(() => {
                    status.innerHTML = `
                        <div class="status-indicator"></div>
                        <span>Sync: ${now}</span>
                    `;
                }, 2000);
            }
        }, 30000); // Toutes les 30 secondes

        // Gestion des erreurs globales
        window.addEventListener('error', function(e) {
            console.error('Erreur détectée:', e.error);
            // On peut afficher une notification à l'utilisateur
        });

        // Message de bienvenue
        setTimeout(() => {
            console.log(`
            🏥 Assistant Médical IA v4.0 Ultimate
            =====================================
            ✅ Toutes les fonctionnalités sont actives
            
            Fonctionnalités disponibles:
            • 🩺 Consultation interactive
            • 📚 Base de données médicale
            • 📹 Téléconsultation
            • 📈 Suivi temporal
            • 📱 Capteurs IoT
            • 🤖 IA avancée
            • ☁️ Cloud sync
            • 🌍 Multi-langues
            
            Commencez par remplir les informations patient !
            `);
        }, 1000);
