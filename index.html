<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant M√©dical IA 4.0 - Nexyna Pro Max</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .container {
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            max-width: 1600px;
            width: 95%;
            margin: 20px auto;
            overflow: hidden;
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .version-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
        }

        .language-selector {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 5px;
        }

        .language-selector select {
            background: transparent;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 10px;
        }

        .cloud-status {
            position: absolute;
            top: 50px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4caf50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .main-nav {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 12px 20px;
            border: none;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-tab.active {
            background: #2196F3;
            color: white;
        }

        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr 400px;
            gap: 30px;
        }

        /* Panneau patient */
        .patient-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        .form-group label {
            font-weight: 600;
            color: #1976D2;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .patient-summary {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 13px;
        }

        /* Capteurs biom√©triques */
        .sensors-panel {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .sensor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .sensor-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .sensor-value {
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .sensor-trend {
            font-size: 12px;
            color: #4caf50;
        }

        /* Corps interactif */
        .body-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .body-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .body-type-btn {
            padding: 10px 20px;
            border: 2px solid #2196F3;
            background: white;
            color: #2196F3;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .body-type-btn.active {
            background: #2196F3;
            color: white;
        }

        .view-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .view-btn {
            padding: 8px 15px;
            border: 1px solid #ccc;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .view-btn.active {
            background: #4caf50;
            color: white;
        }

        .body-container {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .body-svg {
            width: 100%;
            max-width: 280px;
            height: 450px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .body-part {
            fill: #e3f2fd;
            stroke: #2196F3;
            stroke-width: 2;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .body-part:hover {
            fill: #2196F3;
            stroke: #1976D2;
            stroke-width: 3;
            filter: drop-shadow(0 5px 15px rgba(33, 150, 243, 0.4));
        }

        .body-part.selected {
            fill: #f44336;
            stroke: #d32f2f;
            stroke-width: 3;
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pain-scale {
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .pain-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to right, #4caf50, #ffeb3b, #ff9800, #f44336);
            outline: none;
            margin: 15px 0;
        }

        .pain-display {
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            margin: 10px 0;
        }

        /* Panneau sympt√¥mes */
        .symptoms-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .voice-controls {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .voice-btn {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 10px 0;
        }

        .voice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .voice-btn.recording {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            animation: recordingPulse 1s ease-in-out infinite;
        }

        @keyframes recordingPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .quick-symptoms {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .symptom-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .symptom-tag {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .symptom-tag:hover {
            background: #2196F3;
            color: white;
        }

        .symptom-tag.selected {
            background: #4caf50;
            color: white;
        }

        .question-input {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .question-input textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 14px;
            min-height: 120px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .question-input textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .analyze-btn {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(33, 150, 243, 0.3);
        }

        /* Base de donn√©es m√©dicale */
        .medical-db {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-box input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
        }

        .search-box button {
            padding: 10px 20px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .medical-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .medical-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
        }

        /* T√©l√©consultation */
        .teleconsult-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .video-container {
            background: #000;
            border-radius: 10px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }

        .video-placeholder {
            color: white;
            text-align: center;
        }

        .video-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .video-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-btn.start { background: #4caf50; color: white; }
        .video-btn.stop { background: #f44336; color: white; }
        .video-btn.mute { background: #ff9800; color: white; }

        /* Suivi temporal */
        .timeline-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .timeline {
            position: relative;
            margin: 20px 0;
        }

        .timeline-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: #2196F3;
            border-radius: 50%;
        }

        .chart-container {
            height: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        /* IA avanc√©e */
        .ai-panel {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .ai-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .ai-indicator {
            width: 12px;
            height: 12px;
            background: #4caf50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .confidence-meter {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #f44336, #ff9800, #4caf50);
            transition: width 0.3s ease;
        }

        /* Cloud sync */
        .cloud-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .sync-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .sync-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }

        /* Section r√©ponse */
        .response-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 5px solid #2196F3;
            display: none;
            grid-column: 1 / -1;
        }

        .response-section.show {
            display: block;
            animation: expandIn 0.6s ease-out;
        }

        @keyframes expandIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .emergency-alert {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            animation: emergencyBlink 1s ease-in-out infinite;
        }

        @keyframes emergencyBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2196F3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .disclaimer {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 1px solid #ffeaa7;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            font-size: 14px;
            color: #856404;
            grid-column: 1 / -1;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                width: calc(100% - 20px);
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <!-- Particules d'arri√®re-plan -->
    <div class="particles" id="particles"></div>

    <div class="container">
        <div class="header">
            <!-- S√©lecteur de langue -->
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="fr">üá´üá∑ Fran√ßais</option>
                    <option value="en">üá¨üáß English</option>
                    <option value="es">üá™üá∏ Espa√±ol</option>
                    <option value="de">üá©üá™ Deutsch</option>
                    <option value="it">üáÆüáπ Italiano</option>
                    <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                </select>
            </div>

            <!-- Statut cloud -->
            <div class="cloud-status" id="cloudStatus">
                <div class="status-indicator"></div>
                <span data-i18n="cloud.connected">Cloud connect√©</span>
            </div>

            <div class="version-badge">v4.0 ULTIMATE</div>
            <h1 data-i18n="header.title">üè• Assistant M√©dical IA Ultimate</h1>
            <p data-i18n="header.subtitle">Plateforme m√©dicale intelligente avec IA, t√©l√©consultation et capteurs IoT</p>
        </div>

        <!-- Navigation par onglets -->
        <div class="main-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="consultation">
                    ü©∫ <span data-i18n="nav.consultation">Consultation</span>
                </button>
                <button class="nav-tab" data-tab="database">
                    üìö <span data-i18n="nav.database">Base M√©dicale</span>
                </button>
                <button class="nav-tab" data-tab="teleconsult">
                    üìπ <span data-i18n="nav.teleconsult">T√©l√©consultation</span>
                </button>
                <button class="nav-tab" data-tab="timeline">
                    üìà <span data-i18n="nav.timeline">Suivi Temporal</span>
                </button>
                <button class="nav-tab" data-tab="sensors">
                    üì± <span data-i18n="nav.sensors">Capteurs IoT</span>
                </button>
                <button class="nav-tab" data-tab="ai">
                    ü§ñ <span data-i18n="nav.ai">IA Avanc√©e</span>
                </button>
                <button class="nav-tab" data-tab="cloud">
                    ‚òÅÔ∏è <span data-i18n="nav.cloud">Cloud Sync</span>
                </button>
            </div>
        </div>

        <!-- Onglet Consultation -->
        <div class="tab-content active" id="consultation">
            <div class="main-content">
                <!-- Panneau Patient -->
                <div class="patient-panel">
                    <h3 style="color: #1976D2; margin-bottom: 20px;" data-i18n="patient.title">üë§ Informations Patient</h3>
                    <form class="patient-form" id="patientForm">
                        <div class="form-group">
                            <label for="firstName" data-i18n="patient.firstName">Pr√©nom *</label>
                            <input type="text" id="firstName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName" data-i18n="patient.lastName">Nom *</label>
                            <input type="text" id="lastName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="birthDate" data-i18n="patient.birthDate">Date de naissance *</label>
                            <input type="date" id="birthDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="gender" data-i18n="patient.gender">Sexe *</label>
                            <select id="gender" required>
                                <option value="" data-i18n="patient.selectGender">S√©lectionner</option>
                                <option value="homme" data-i18n="patient.male">Homme</option>
                                <option value="femme" data-i18n="patient.female">Femme</option>
                                <option value="enfant-garcon" data-i18n="patient.childBoy">Enfant (Gar√ßon)</option>
                                <option value="enfant-fille" data-i18n="patient.childGirl">Enfant (Fille)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="weight" data-i18n="patient.weight">Poids (kg)</label>
                            <input type="number" id="weight" min="1" max="300">
                        </div>
                        
                        <div class="form-group">
                            <label for="height" data-i18n="patient.height">Taille (cm)</label>
                            <input type="number" id="height" min="50" max="250">
                        </div>
                        
                        <div class="form-group">
                            <label for="allergies" data-i18n="patient.allergies">Allergies connues</label>
                            <textarea id="allergies" rows="2" data-i18n-placeholder="patient.allergiesPlaceholder"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="medications" data-i18n="patient.medications">Traitements actuels</label>
                            <textarea id="medications" rows="2" data-i18n-placeholder="patient.medicationsPlaceholder"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="medicalHistory" data-i18n="patient.history">Ant√©c√©dents m√©dicaux</label>
                            <textarea id="medicalHistory" rows="3" data-i18n-placeholder="patient.historyPlaceholder"></textarea>
                        </div>
                    </form>
                    
                    <div class="patient-summary" id="patientSummary">
                        <strong data-i18n="patient.summary">üìã R√©sum√©:</strong>
                        <div id="summaryContent" data-i18n="patient.fillInfo">Remplissez les informations ci-dessus</div>
                    </div>

                    <!-- Capteurs biom√©triques -->
                    <div class="sensors-panel">
                        <h4 style="color: #1976D2; margin-bottom: 10px;" data-i18n="sensors.biometric">üì± Capteurs Biom√©triques</h4>
                        <div class="sensor-grid">
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.heartRate">Rythme Cardiaque</div>
                                <div class="sensor-value" id="heartRate">--</div>
                                <div class="sensor-trend" id="heartTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.temperature">Temp√©rature</div>
                                <div class="sensor-value" id="temperature">--</div>
                                <div class="sensor-trend" id="tempTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.pressure">Tension</div>
                                <div class="sensor-value" id="bloodPressure">--</div>
                                <div class="sensor-trend" id="pressureTrend">--</div>
                            </div>
                            <div class="sensor-card">
                                <div style="font-size: 12px; color: #666;" data-i18n="sensors.oxygen">SpO2</div>
                                <div class="sensor-value" id="oxygenSat">--</div>
                                <div class="sensor-trend" id="oxygenTrend">--</div>
                            </div>
                        </div>
                        <button class="voice-btn" onclick="connectSensors()" data-i18n="sensors.connect">
                            üì± Connecter capteurs
                        </button>
                    </div>
                </div>

                <!-- Panneau Corps -->
                <div class="body-panel">
                    <h3 style="color: #1976D2; margin-bottom: 20px;" data-i18n="body.title">ü´Å Localisation des sympt√¥mes</h3>
                    
                    <!-- Contr√¥les type de corps -->
                    <div class="body-controls">
                        <button class="body-type-btn active" data-type="homme" data-i18n="body.man">üë® Homme</button>
                        <button class="body-type-btn" data-type="femme" data-i18n="body.woman">üë© Femme</button>
                        <button class="body-type-btn" data-type="enfant" data-i18n="body.child">üßí Enfant</button>
                    </div>
                    
                    <!-- Contr√¥les de vue -->
                    <div class="view-controls">
                        <button class="view-btn active" data-view="face" data-i18n="body.front">Face</button>
                        <button class="view-btn" data-view="profile" data-i18n="body.side">Profil</button>
                        <button class="view-btn" data-view="back" data-i18n="body.back">Dos</button>
                    </div>
                    
                    <!-- Container du corps -->
                    <div class="body-container">
                        <svg class="body-svg" viewBox="0 0 300 450" id="bodySvg">
                            <!-- Corps Homme Face -->
                            <g id="homme-face" class="body-view">
                                <!-- T√™te -->
                                <ellipse class="body-part" data-part="t√™te" cx="150" cy="50" rx="35" ry="40" />
                                <!-- Cou -->
                                <rect class="body-part" data-part="cou" x="135" y="90" width="30" height="25" />
                                <!-- √âpaules -->
                                <ellipse class="body-part" data-part="√©paule gauche" cx="100" cy="130" rx="25" ry="15" />
                                <ellipse class="body-part" data-part="√©paule droite" cx="200" cy="130" rx="25" ry="15" />
                                <!-- Torse -->
                                <rect class="body-part" data-part="poitrine" x="110" y="115" width="80" height="80" />
                                <!-- Bras -->
                                <rect class="body-part" data-part="bras gauche" x="70" y="140" width="25" height="80" />
                                <rect class="body-part" data-part="bras droit" x="205" y="140" width="25" height="80" />
                                <!-- Avant-bras -->
                                <rect class="body-part" data-part="avant-bras gauche" x="72" y="220" width="21" height="70" />
                                <rect class="body-part" data-part="avant-bras droit" x="207" y="220" width="21" height="70" />
                                <!-- Mains -->
                                <ellipse class="body-part" data-part="main gauche" cx="82" cy="305" rx="12" ry="18" />
                                <ellipse class="body-part" data-part="main droite" cx="218" cy="305" rx="12" ry="18" />
                                <!-- Abdomen -->
                                <rect class="body-part" data-part="abdomen" x="115" y="195" width="70" height="70" />
                                <!-- Hanches -->
                                <rect class="body-part" data-part="bassin" x="120" y="265" width="60" height="40" />
                                <!-- Cuisses -->
                                <rect class="body-part" data-part="cuisse gauche" x="125" y="305" width="25" height="80" />
                                <rect class="body-part" data-part="cuisse droite" x="150" y="305" width="25" height="80" />
                                <!-- Genoux -->
                                <circle class="body-part" data-part="genou gauche" cx="137" cy="385" r="12" />
                                <circle class="body-part" data-part="genou droit" cx="162" cy="385" r="12" />
                                <!-- Jambes -->
                                <rect class="body-part" data-part="jambe gauche" x="127" y="397" width="20" height="75" />
                                <rect class="body-part" data-part="jambe droite" x="153" y="397" width="20" height="75" />
                                <!-- Pieds -->
                                <ellipse class="body-part" data-part="pied gauche" cx="137" cy="485" rx="18" ry="12" />
                                <ellipse class="body-part" data-part="pied droit" cx="162" cy="485" rx="18" ry="12" />
                            </g>
                            
                            <!-- Corps Homme Dos -->
                            <g id="homme-back" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="cr√¢ne" cx="150" cy="50" rx="35" ry="40" />
                                <rect class="body-part" data-part="nuque" x="135" y="90" width="30" height="25" />
                                <ellipse class="body-part" data-part="√©paule gauche" cx="100" cy="130" rx="25" ry="15" />
                                <ellipse class="body-part" data-part="√©paule droite" cx="200" cy="130" rx="25" ry="15" />
                                <rect class="body-part" data-part="dos haut" x="110" y="115" width="80" height="50" />
                                <rect class="body-part" data-part="dos bas" x="115" y="165" width="70" height="50" />
                                <rect class="body-part" data-part="lombaires" x="120" y="215" width="60" height="40" />
                                <rect class="body-part" data-part="fessier" x="120" y="255" width="60" height="50" />
                                <rect class="body-part" data-part="cuisse arri√®re gauche" x="125" y="305" width="25" height="80" />
                                <rect class="body-part" data-part="cuisse arri√®re droite" x="150" y="305" width="25" height="80" />
                                <rect class="body-part" data-part="mollet gauche" x="127" y="397" width="20" height="75" />
                                <rect class="body-part" data-part="mollet droit" x="153" y="397" width="20" height="75" />
                            </g>

                            <!-- Corps Femme Face -->
                            <g id="femme-face" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="t√™te" cx="150" cy="50" rx="32" ry="38" />
                                <rect class="body-part" data-part="cou" x="138" y="88" width="24" height="22" />
                                <ellipse class="body-part" data-part="√©paule gauche" cx="105" cy="125" rx="22" ry="12" />
                                <ellipse class="body-part" data-part="√©paule droite" cx="195" cy="125" rx="22" ry="12" />
                                <rect class="body-part" data-part="poitrine" x="115" y="110" width="70" height="75" />
                                <rect class="body-part" data-part="bras gauche" x="75" y="135" width="22" height="75" />
                                <rect class="body-part" data-part="bras droit" x="203" y="135" width="22" height="75" />
                                <rect class="body-part" data-part="avant-bras gauche" x="77" y="210" width="18" height="65" />
                                <rect class="body-part" data-part="avant-bras droit" x="205" y="210" width="18" height="65" />
                                <ellipse class="body-part" data-part="main gauche" cx="86" cy="285" rx="10" ry="15" />
                                <ellipse class="body-part" data-part="main droite" cx="214" cy="285" rx="10" ry="15" />
                                <rect class="body-part" data-part="abdomen" x="120" y="185" width="60" height="65" />
                                <ellipse class="body-part" data-part="bassin" cx="150" cy="275" rx="35" ry="25" />
                                <rect class="body-part" data-part="cuisse gauche" x="130" y="300" width="22" height="85" />
                                <rect class="body-part" data-part="cuisse droite" x="148" y="300" width="22" height="85" />
                                <circle class="body-part" data-part="genou gauche" cx="141" cy="385" r="10" />
                                <circle class="body-part" data-part="genou droit" cx="159" cy="385" r="10" />
                                <rect class="body-part" data-part="jambe gauche" x="133" y="395" width="16" height="75" />
                                <rect class="body-part" data-part="jambe droite" x="151" y="395" width="16" height="75" />
                                <ellipse class="body-part" data-part="pied gauche" cx="141" cy="480" rx="15" ry="10" />
                                <ellipse class="body-part" data-part="pied droit" cx="159" cy="480" rx="15" ry="10" />
                            </g>
                            
                            <!-- Corps Enfant Face -->
                            <g id="enfant-face" class="body-view" style="display: none;">
                                <ellipse class="body-part" data-part="t√™te" cx="150" cy="60" rx="40" ry="45" />
                                <rect class="body-part" data-part="cou" x="140" y="105" width="20" height="15" />
                                <ellipse class="body-part" data-part="√©paule gauche" cx="110" cy="135" rx="20" ry="10" />
                                <ellipse class="body-part" data-part="√©paule droite" cx="190" cy="135" rx="20" ry="10" />
                                <rect class="body-part" data-part="poitrine" x="120" y="120" width="60" height="60" />
                                <rect class="body-part" data-part="bras gauche" x="85" y="140" width="18" height="60" />
                                <rect class="body-part" data-part="bras droit" x="197" y="140" width="18" height="60" />
                                <rect class="body-part" data-part="avant-bras gauche" x="87" y="200" width="14" height="50" />
                                <rect class="body-part" data-part="avant-bras droit" x="199" y="200" width="14" height="50" />
                                <ellipse class="body-part" data-part="main gauche" cx="94" cy="260" rx="8" ry="12" />
                                <ellipse class="body-part" data-part="main droite" cx="206" cy="260" rx="8" ry="12" />
                                <rect class="body-part" data-part="abdomen" x="125" y="180" width="50" height="50" />
                                <rect class="body-part" data-part="bassin" x="130" y="230" width="40" height="30" />
                                <rect class="body-part" data-part="cuisse gauche" x="135" y="260" width="18" height="70" />
                                <rect class="body-part" data-part="cuisse droite" x="147" y="260" width="18" height="70" />
                                <circle class="body-part" data-part="genou gauche" cx="144" cy="330" r="8" />
                                <circle class="body-part" data-part="genou droit" cx="156" cy="330" r="8" />
                                <rect class="body-part" data-part="jambe gauche" x="138" y="338" width="12" height="60" />
                                <rect class="body-part" data-part="jambe droite" x="150" y="338" width="12" height="60" />
                                <ellipse class="body-part" data-part="pied gauche" cx="144" cy="408" rx="12" ry="8" />
                                <ellipse class="body-part" data-part="pied droit" cx="156" cy="408" rx="12" ry="8" />
                            </g>
                        </svg>
                    </div>
                    
                    <div id="selectedPart" style="margin-top: 15px; font-weight: bold; color: #1976D2;"></div>
                    
                    <!-- √âchelle de douleur -->
                    <div class="pain-scale">
                        <h4 style="color: #1976D2; margin-bottom: 10px;" data-i18n="pain.intensity">üìä Intensit√© de la douleur</h4>
                        <input type="range" class="pain-slider" id="painScale" min="0" max="10" value="0">
                        <div class="pain-display" id="painDisplay">üòä 0/10</div>
                        <div style="display: flex; justify-content: space-between; font-size: 11px; color: #666;">
                            <span data-i18n="pain.none">Aucune</span>
                            <span data-i18n="pain.mild">L√©g√®re</span>
                            <span data-i18n="pain.moderate">Mod√©r√©e</span>
                            <span data-i18n="pain.severe">S√©v√®re</span>
                            <span data-i18n="pain.extreme">Extr√™me</span>
                        </div>
                    </div>
                </div>

                <!-- Panneau Sympt√¥mes -->
                <div class="symptoms-panel">
                    <!-- Reconnaissance vocale -->
                    <div class="voice-controls">
                        <h4 style="color: #1976D2; margin-bottom: 15px;" data-i18n="voice.title">üé§ Reconnaissance vocale</h4>
                        <button class="voice-btn" id="voiceBtn">
                            <span id="voiceText" data-i18n="voice.click">üé§ Cliquez et d√©crivez vos sympt√¥mes</span>
                        </button>
                        <div id="voiceResult" style="margin-top: 10px; font-style: italic; color: #666; font-size: 13px;"></div>
                    </div>

                    <!-- Sympt√¥mes rapides -->
                    <div class="quick-symptoms">
                        <h4 style="color: #1976D2; margin-bottom: 10px;" data-i18n="symptoms.quick">‚ö° Sympt√¥mes fr√©quents</h4>
                        <div class="symptom-tags">
                            <span class="symptom-tag" data-symptom="mal de t√™te" data-i18n="symptoms.headache">Mal de t√™te</span>
                            <span class="symptom-tag" data-symptom="fi√®vre" data-i18n="symptoms.fever">Fi√®vre</span>
                            <span class="symptom-tag" data-symptom="naus√©e" data-i18n="symptoms.nausea">Naus√©e</span>
                            <span class="symptom-tag" data-symptom="fatigue" data-i18n="symptoms.fatigue">Fatigue</span>
                            <span class="symptom-tag" data-symptom="toux" data-i18n="symptoms.cough">Toux</span>
                            <span class="symptom-tag" data-symptom="douleur musculaire" data-i18n="symptoms.muscle">Douleur musculaire</span>
                            <span class="symptom-tag" data-symptom="vertige" data-i18n="symptoms.dizziness">Vertige</span>
                            <span class="symptom-tag" data-symptom="insomnie" data-i18n="symptoms.insomnia">Insomnie</span>
                            <span class="symptom-tag" data-symptom="douleur abdominale" data-i18n="symptoms.abdominal">Douleur abdominale</span>
                            <span class="symptom-tag" data-symptom="difficult√© respiration" data-i18n="symptoms.breathing">Difficult√© √† respirer</span>
                        </div>
                    </div>

                    <!-- IA Avanc√©e -->
                    <div class="ai-panel">
                        <div class="ai-status">
                            <div class="ai-indicator"></div>
                            <span data-i18n="ai.status">IA M√©dicale Active</span>
                        </div>
                        <div data-i18n="ai.confidence">Niveau de confiance:</div>
                        <div class="confidence-meter">
                            <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
                        </div>
                        <div style="font-size: 12px; color: #666;" id="aiInsight" data-i18n="ai.insight">En attente d'analyse...</div>
                    </div>

                    <!-- Description d√©taill√©e -->
                    <div class="question-input">
                        <h4 style="color: #1976D2; margin-bottom: 15px;" data-i18n="description.title">‚úçÔ∏è Description d√©taill√©e</h4>
                        <textarea id="questionInput" data-i18n-placeholder="description.placeholder"></textarea>
                        
                        <button class="analyze-btn" id="analyzeBtn" data-i18n="analyze.button">
                            üîç Lancer l'analyse compl√®te
                        </button>
                    </div>
                </div>

                <!-- Loading -->
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p id="loadingText" data-i18n="loading.text">Analyse en cours avec IA avanc√©e...</p>
                </div>

                <!-- Section R√©ponse -->
                <div class="response-section" id="responseSection">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 20px; font-size: 20px;">ü©∫</div>
                        <h3 data-i18n="response.title">Diagnostic IA - Rapport Complet</h3>
                        <div style="margin-left: auto;">
                            <button class="sync-btn" onclick="exportToPDF()" data-i18n="export.pdf">üìÑ Export PDF</button>
                            <button class="sync-btn" onclick="saveToHistory()" data-i18n="export.save">üíæ Sauvegarder</button>
                        </div>
                    </div>
                    <div id="responseContent"></div>
                </div>

                <!-- Disclaimer -->
                <div class="disclaimer">
                    <strong data-i18n="disclaimer.title">‚ö†Ô∏è Avertissement m√©dical important :</strong> 
                    <span data-i18n="disclaimer.text">Cet assistant utilise une intelligence artificielle avanc√©e pour analyser vos sympt√¥mes et fournir des informations m√©dicales.</span>
                </div>
            </div>
        </div>

        <!-- Onglet Base de Donn√©es M√©dicale -->
        <div class="tab-content" id="database">
            <div class="medical-db">
                <h3 data-i18n="database.title">üìö Base de Donn√©es M√©dicale Mondiale</h3>
                <p data-i18n="database.description">Acc√©dez √† plus de 500 000 r√©f√©rences m√©dicales, √©tudes cliniques et protocoles de traitement</p>
                
                <div class="search-box">
                    <input type="text" id="medicalSearch" data-i18n-placeholder="database.searchPlaceholder" placeholder="Rechercher une maladie, sympt√¥me, m√©dicament...">
                    <button onclick="searchMedicalDB()" data-i18n="database.search">üîç Rechercher</button>
                </div>
                
                <div class="medical-results" id="medicalResults">
                    <div class="medical-item">
                        <h4>üí° Suggestions de recherche</h4>
                        <p>‚Ä¢ Hypertension art√©rielle - causes et traitements</p>
                        <p>‚Ä¢ Diab√®te type 2 - protocoles de suivi</p>
                        <p>‚Ä¢ Migraine - th√©rapies innovantes</p>
                        <p>‚Ä¢ D√©pression - approches th√©rapeutiques</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet T√©l√©consultation -->
        <div class="tab-content" id="teleconsult">
            <div class="teleconsult-panel">
                <h3 data-i18n="teleconsult.title">üìπ T√©l√©consultation M√©dicale</h3>
                <p data-i18n="teleconsult.description">Consultez un m√©decin en temps r√©el par vid√©oconf√©rence s√©curis√©e</p>
                
                <div class="video-container" id="videoContainer">
                    <div class="video-placeholder">
                        <h3 data-i18n="teleconsult.waiting">üìπ En attente de connexion</h3>
                        <p data-i18n="teleconsult.instructions">Cliquez sur "D√©marrer" pour lancer la t√©l√©consultation</p>
                    </div>
                </div>
                
                <div class="video-controls">
                    <button class="video-btn start" onclick="startVideoCall()" data-i18n="teleconsult.start">üìπ D√©marrer</button>
                    <button class="video-btn mute" onclick="toggleMute()" data-i18n="teleconsult.mute">üé§ Mute</button>
                    <button class="video-btn stop" onclick="stopVideoCall()" data-i18n="teleconsult.stop">‚ùå Arr√™ter</button>
                </div>
                
                <div style="margin-top: 30px;">
                    <h4 data-i18n="teleconsult.available">üë®‚Äç‚öïÔ∏è M√©decins disponibles</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div class="medical-item">
                            <h5>Dr. Marie Dubois</h5>
                            <p>M√©decin g√©n√©raliste ‚Ä¢ 15 ans d'exp√©rience</p>
                            <p>üü¢ Disponible maintenant</p>
                        </div>
                        <div class="medical-item">
                            <h5>Dr. Jean Martin</h5>
                            <p>Cardiologue ‚Ä¢ 20 ans d'exp√©rience</p>
                            <p>üü° Disponible dans 15 min</p>
                        </div>
                        <div class="medical-item">
                            <h5>Dr. Sarah Chen</h5>
                            <p>P√©diatre ‚Ä¢ 12 ans d'exp√©rience</p>
                            <p>üü¢ Disponible maintenant</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Suivi Temporal -->
        <div class="tab-content" id="timeline">
            <div class="timeline-container">
                <h3 data-i18n="timeline.title">üìà Suivi Temporal des Sympt√¥mes</h3>
                <p data-i18n="timeline.description">Suivez l'√©volution de vos sympt√¥mes et traitements dans le temps</p>
                
                <div class="chart-container">
                    <canvas id="symptomsChart" width="400" height="200"></canvas>
                </div>
                
                <div class="timeline" id="symptomsTimeline">
                    <div class="timeline-item">
                        <h5>Aujourd'hui - 14:30</h5>
                        <p><strong>Sympt√¥mes:</strong> Mal de t√™te (7/10), Fatigue</p>
                        <p><strong>Action:</strong> Prise de parac√©tamol 1g</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>Hier - 09:00</h5>
                        <p><strong>Sympt√¥mes:</strong> L√©g√®re fatigue (3/10)</p>
                        <p><strong>Action:</strong> Repos, hydratation</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>Il y a 3 jours - 16:45</h5>
                        <p><strong>Consultation:</strong> Dr. Martin</p>
                        <p><strong>Diagnostic:</strong> Syndrome viral probable</p>
                        <p><strong>Traitement:</strong> Repos, parac√©tamol si besoin</p>
                    </div>
                </div>
                
                <button class="analyze-btn" onclick="addSymptomEntry()" data-i18n="timeline.add">
                    ‚ûï Ajouter une entr√©e
                </button>
            </div>
        </div>

        <!-- Onglet Capteurs IoT -->
        <div class="tab-content" id="sensors">
            <div class="main-content">
                <div>
                    <h3 data-i18n="sensors.title">üì± Int√©gration Capteurs IoT</h3>
                    <p data-i18n="sensors.description">Connectez vos appareils de sant√© connect√©s pour un suivi en temps r√©el</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>üì± Apple Watch</h4>
                            <p>Rythme cardiaque, SpO2, ECG</p>
                            <div id="appleWatchStatus" style="color: #f44336;">üî¥ D√©connect√©</div>
                            <button class="voice-btn" onclick="connectAppleWatch()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>üå°Ô∏è Thermom√®tre Intelligent</h4>
                            <p>Temp√©rature corporelle continue</p>
                            <div id="thermometerStatus" style="color: #f44336;">üî¥ D√©connect√©</div>
                            <button class="voice-btn" onclick="connectThermometer()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>ü©∫ Tensiom√®tre Connected</h4>
                            <p>Tension art√©rielle automatique</p>
                            <div id="bpMonitorStatus" style="color: #f44336;">üî¥ D√©connect√©</div>
                            <button class="voice-btn" onclick="connectBPMonitor()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>üíä Pilulier Intelligent</h4>
                            <p>Suivi des prises m√©dicamenteuses</p>
                            <div id="pillboxStatus" style="color: #f44336;">üî¥ D√©connect√©</div>
                            <button class="voice-btn" onclick="connectPillbox()" style="margin-top: 15px;">Connecter</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>üò¥ Capteur de Sommeil</h4>
                            <p>Qualit√© et phases du sommeil</p>
                            <div id="sleepSensorStatus" style="color: #4caf50;">üü¢ Connect√©</div>
                            <button class="voice-btn" onclick="viewSleepData()" style="margin-top: 15px;">Voir donn√©es</button>
                        </div>
                        
                        <div class="sensor-card" style="padding: 25px;">
                            <h4>üèÉ Tracker d'Activit√©</h4>
                            <p>Pas, calories, activit√© physique</p>
                            <div id="activityTrackerStatus" style="color: #4caf50;">üü¢ Connect√©</div>
                            <button class="voice-btn" onclick="viewActivityData()" style="margin-top: 15px;">Voir donn√©es</button>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <h4 data-i18n="sensors.realtime">üìä Donn√©es en Temps R√©el</h4>
                    <div class="chart-container">
                        <canvas id="realtimeChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet IA Avanc√©e -->
        <div class="tab-content" id="ai">
            <div class="ai-panel" style="margin: 0;">
                <h3 data-i18n="ai.title">ü§ñ Intelligence Artificielle M√©dicale Avanc√©e</h3>
                <p data-i18n="ai.subtitle">Analyse pr√©dictive, apprentissage automatique et diagnostic assist√©</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                    <div style="background: white; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="ai.ml.title">üß† Machine Learning</h4>
                        <p data-i18n="ai.ml.description">Analyse de patterns bas√©e sur 2M+ cas m√©dicaux</p>
                        
                        <div style="margin: 20px 0;">
                            <div data-i18n="ai.ml.accuracy">Pr√©cision diagnostique:</div>
                            <div class="confidence-meter">
                                <div class="confidence-fill" style="width: 94%"></div>
                            </div>
                            <div style="text-align: center; font-weight: bold; color: #4caf50;">94.2%</div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 data-i18n="ai.ml.training">üîÑ Entra√Ænement Continu</h5>
                            <p style="font-size: 13px;" data-i18n="ai.ml.update">Derni√®re mise √† jour: Il y a 2 heures</p>
                            <p style="font-size: 13px;" data-i18n="ai.ml.cases">Nouveaux cas analys√©s: 1,247</p>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="ai.prediction.title">üîÆ Analyse Pr√©dictive</h4>
                        <p data-i18n="ai.prediction.description">Pr√©diction de l'√©volution des pathologies</p>
                        
                        <div style="margin: 20px 0;">
                            <div data-i18n="ai.prediction.risk">√âvaluation des risques:</div>
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 8px; margin: 10px 0;">
                                <div style="color: #4caf50; font-weight: bold;" data-i18n="ai.prediction.low">üü¢ Risque Faible</div>
                                <div style="font-size: 13px;" data-i18n="ai.prediction.details">Probabilit√© de complication: 12%</div>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 data-i18n="ai.prediction.recommendations">üí° Recommandations IA</h5>
                            <ul style="font-size: 13px; margin-left: 20px;">
                                <li data-i18n="ai.prediction.rec1">Surveillance sympt√¥mes 48h</li>
                                <li data-i18n="ai.prediction.rec2">Consultation si aggravation</li>
                                <li data-i18n="ai.prediction.rec3">Repos et hydratation</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div style="background: white; padding: 25px; border-radius: 15px; margin-top: 30px;">
                    <h4 data-i18n="ai.neural.title">üï∏Ô∏è R√©seau de Neurones Sp√©cialis√©</h4>
                    <p data-i18n="ai.neural.description">Architecture deep learning optimis√©e pour le diagnostic m√©dical</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">üß†</div>
                            <div style="font-weight: bold;">Neurologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.neurology">C√©phal√©es, migraines, √©pilepsie</div>
                        </div>
                        
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">‚ù§Ô∏è</div>
                            <div style="font-weight: bold;">Cardiologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.cardiology">Rythme, tension, pathologies</div>
                        </div>
                        
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">ü´Å</div>
                            <div style="font-weight: bold;">Pneumologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.pneumology">Toux, dyspn√©e, asthme</div>
                        </div>
                        
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">üçΩÔ∏è</div>
                            <div style="font-weight: bold;">Gastro-ent√©rologie</div>
                            <div style="font-size: 13px; color: #666;" data-i18n="ai.neural.gastro">Digestion, douleurs abdominales</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Cloud Sync -->
        <div class="tab-content" id="cloud">
            <div class="cloud-panel">
                <h3 data-i18n="cloud.title">‚òÅÔ∏è Synchronisation Cloud S√©curis√©e</h3>
                <p data-i18n="cloud.description">Sauvegarde automatique et acc√®s multi-plateforme √† vos donn√©es m√©dicales</p>
                
                <div class="sync-status">
                    <div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="status-indicator"></div>
                            <span data-i18n="cloud.status">Statut: Synchronis√©</span>
                        </div>
                        <div style="font-size: 13px; color: #666; margin-top: 5px;" data-i18n="cloud.lastSync">
                            Derni√®re sync: Il y a 2 minutes
                        </div>
                    </div>
                    <button class="sync-btn" onclick="manualSync()" data-i18n="cloud.sync">üîÑ Synchroniser</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="cloud.storage.title">üíæ Stockage</h4>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between;">
                                <span data-i18n="cloud.storage.used">Utilis√©:</span>
                                <span>2.3 GB / 100 GB</span>
                            </div>
                            <div class="confidence-meter" style="margin: 10px 0;">
                                <div class="confidence-fill" style="width: 2.3%; background: #4caf50;"></div>
                            </div>
                        </div>
                        
                        <div style="font-size: 13px; color: #666;">
                            <p data-i18n="cloud.storage.consultations">‚Ä¢ 127 consultations</p>
                            <p data-i18n="cloud.storage.images">‚Ä¢ 45 images m√©dicales</p>
                            <p data-i18n="cloud.storage.reports">‚Ä¢ 89 rapports PDF</p>
                            <p data-i18n="cloud.storage.sensors">‚Ä¢ 15,432 donn√©es capteurs</p>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                        <h4 data-i18n="cloud.security.title">üîí S√©curit√©</h4>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">‚úÖ</span>
                                <span data-i18n="cloud.security.encryption">Chiffrement AES-256</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">‚úÖ</span>
                                <span data-i18n="cloud.security.backup">Sauvegarde redondante</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">‚úÖ</span>
                                <span data-i18n="cloud.security.gdpr">Conformit√© RGPD</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                                <span style="color: #4caf50;">‚úÖ</span>
                                <span data-i18n="cloud.security.iso">Certification ISO 27001</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: white; padding: 25px; border-radius: 15px; margin-top: 30px;">
                    <h4 data-i18n="cloud.devices.title">üì± Appareils Connect√©s</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">üíª</div>
                            <div>
                                <div style="font-weight: bold;">MacBook Pro</div>
                                <div style="font-size: 13px; color: #666;" data-i18n="cloud.devices.laptop">Actuel ‚Ä¢ Paris, France</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">üì±</div>
                            <div>
                                <div style="font-weight: bold;">iPhone 14 Pro</div>
                                <div style="font-size: 13px; color: #666;" data-i18n="cloud.devices.phone">Il y a 5 min ‚Ä¢ Paris, France</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em;">‚åö</div>
                            <div>
                                <div style="font-weight: bold;">Apple Watch</div>
                                <div style="font-size: 13px; color: #666;" data-i18n="cloud.devices.watch">Sync continue ‚Ä¢ Connect√©</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Syst√®me de traduction multilingue
        const translations = {
            fr: {
                'header.title': 'üè• Assistant M√©dical IA Ultimate',
                'header.subtitle': 'Plateforme m√©dicale intelligente avec IA, t√©l√©consultation et capteurs IoT',
                'cloud.connected': 'Cloud connect√©',
                'nav.consultation': 'Consultation',
                'nav.database': 'Base M√©dicale',
                'nav.teleconsult': 'T√©l√©consultation',
                'nav.timeline': 'Suivi Temporal',
                'nav.sensors': 'Capteurs IoT',
                'nav.ai': 'IA Avanc√©e',
                'nav.cloud': 'Cloud Sync',
                'patient.title': 'üë§ Informations Patient',
                'patient.firstName': 'Pr√©nom *',
                'patient.lastName': 'Nom *',
                'patient.birthDate': 'Date de naissance *',
                'patient.gender': 'Sexe *',
                'patient.selectGender': 'S√©lectionner',
                'patient.male': 'Homme',
                'patient.female': 'Femme',
                'patient.childBoy': 'Enfant (Gar√ßon)',
                'patient.childGirl': 'Enfant (Fille)',
                'patient.weight': 'Poids (kg)',
                'patient.height': 'Taille (cm)',
                'patient.allergies': 'Allergies connues',
                'patient.medications': 'Traitements actuels',
                'patient.history': 'Ant√©c√©dents m√©dicaux',
                'patient.summary': 'üìã R√©sum√©:',
                'patient.fillInfo': 'Remplissez les informations ci-dessus',
                'sensors.biometric': 'üì± Capteurs Biom√©triques',
                'sensors.heartRate': 'Rythme Cardiaque',
                'sensors.temperature': 'Temp√©rature',
                'sensors.pressure': 'Tension',
                'sensors.oxygen': 'SpO2',
                'sensors.connect': 'üì± Connecter capteurs',
                'body.title': 'ü´Å Localisation des sympt√¥mes',
                'body.man': 'üë® Homme',
                'body.woman': 'üë© Femme',
                'body.child': 'üßí Enfant',
                'body.front': 'Face',
                'body.side': 'Profil',
                'body.back': 'Dos',
                'pain.intensity': 'üìä Intensit√© de la douleur',
                'pain.none': 'Aucune',
                'pain.mild': 'L√©g√®re',
                'pain.moderate': 'Mod√©r√©e',
                'pain.severe': 'S√©v√®re',
                'pain.extreme': 'Extr√™me',
                'voice.title': 'üé§ Reconnaissance vocale',
                'voice.click': 'üé§ Cliquez et d√©crivez vos sympt√¥mes',
                'symptoms.quick': '‚ö° Sympt√¥mes fr√©quents',
                'symptoms.headache': 'Mal de t√™te',
                'symptoms.fever': 'Fi√®vre',
                'symptoms.nausea': 'Naus√©e',
                'symptoms.fatigue': 'Fatigue',
                'symptoms.cough': 'Toux',
                'symptoms.muscle': 'Douleur musculaire',
                'symptoms.dizziness': 'Vertige',
                'symptoms.insomnia': 'Insomnie',
                'symptoms.abdominal': 'Douleur abdominale',
                'symptoms.breathing': 'Difficult√© √† respirer',
                'ai.status': 'IA M√©dicale Active',
                'ai.confidence': 'Niveau de confiance:',
                'ai.insight': 'En attente d\'analyse...',
                'description.title': '‚úçÔ∏è Description d√©taill√©e',
                'description.placeholder': 'D√©crivez pr√©cis√©ment vos sympt√¥mes, leur d√©but, leur √©volution...',
                'analyze.button': 'üîç Lancer l\'analyse compl√®te',
                'loading.text': 'Analyse en cours avec IA avanc√©e...',
                'response.title': 'Diagnostic IA - Rapport Complet',
                'export.pdf': 'üìÑ Export PDF',
                'export.save': 'üíæ Sauvegarder',
                'disclaimer.title': '‚ö†Ô∏è Avertissement m√©dical important :',
                'disclaimer.text': 'Cet assistant utilise une intelligence artificielle avanc√©e pour analyser vos sympt√¥mes et fournir des informations m√©dicales.',
                // Ajout des autres traductions...
            },
            en: {
                'header.title': 'üè• Ultimate Medical AI Assistant',
                'header.subtitle': 'Intelligent medical platform with AI, telemedicine and IoT sensors',
                'cloud.connected': 'Cloud connected',
                'nav.consultation': 'Consultation',
                'nav.database': 'Medical Database',
                'nav.teleconsult': 'Telemedicine',
                'nav.timeline': 'Timeline Tracking',
                'nav.sensors': 'IoT Sensors',
                'nav.ai': 'Advanced AI',
                'nav.cloud': 'Cloud Sync',
                'patient.title': 'üë§ Patient Information',
                'patient.firstName': 'First Name *',
                'patient.lastName': 'Last Name *',
                'patient.birthDate': 'Date of Birth *',
                'patient.gender': 'Gender *',
                'patient.selectGender': 'Select',
                'patient.male': 'Male',
                'patient.female': 'Female',
                'patient.childBoy': 'Child (Boy)',
                'patient.childGirl': 'Child (Girl)',
                'patient.weight': 'Weight (kg)',
                'patient.height': 'Height (cm)',
                'patient.allergies': 'Known allergies',
                'patient.medications': 'Current treatments',
                'patient.history': 'Medical history',
                'patient.summary': 'üìã Summary:',
                'patient.fillInfo': 'Fill in the information above',
                // ... autres traductions anglaises
            },
            es: {
                'header.title': 'üè• Asistente M√©dico IA Ultimate',
                'header.subtitle': 'Plataforma m√©dica inteligente con IA, telemedicina y sensores IoT',
                'cloud.connected': 'Cloud conectado',
                // ... autres traductions espagnoles
            },
            de: {
                'header.title': 'üè• Ultimate Medizinischer KI-Assistent',
                'header.subtitle': 'Intelligente medizinische Plattform mit KI, Telemedizin und IoT-Sensoren',
                'cloud.connected': 'Cloud verbunden',
                // ... autres traductions allemandes
            },
            it: {
                'header.title': 'üè• Assistente Medico IA Ultimate',
                'header.subtitle': 'Piattaforma medica intelligente con IA, telemedicina e sensori IoT',
                'cloud.connected': 'Cloud connesso',
                // ... autres traductions italiennes
            },
            ar: {
                'header.title': 'üè• ŸÖÿ≥ÿßÿπÿØ ÿ∑ÿ®Ÿä ÿ∞ŸÉŸä ŸÖÿ™ŸÇÿØŸÖ',
                'header.subtitle': 'ŸÖŸÜÿµÿ© ÿ∑ÿ®Ÿäÿ© ÿ∞ŸÉŸäÿ© ŸÖÿπ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸàÿßŸÑÿ∑ÿ® ÿπŸÜ ÿ®ÿπÿØ Ÿàÿ£ÿ¨Ÿáÿ≤ÿ© ÿßŸÑÿßÿ≥ÿ™ÿ¥ÿπÿßÿ±',
                'cloud.connected': 'ŸÖÿ™ÿµŸÑ ÿ®ÿßŸÑÿ≥ÿ≠ÿßÿ®ÿ©',
                // ... autres traductions arabes
            }
        };

        class MedicalAssistantV4 {
            constructor() {
                this.currentLanguage = 'fr';
                this.patient = {};
                this.selectedBodyPart = '';
                this.selectedSymptoms = [];
                this.painLevel = 0;
                this.currentBodyType = 'homme';
                this.currentView = 'face';
                this.voiceRecognition = null;
                this.consultationHistory = JSON.parse(localStorage.getItem('consultationHistory') || '[]');
                this.medicalDatabase = this.initializeMedicalDB();
                this.sensorData = {
                    heartRate: 0,
                    temperature: 0,
                    bloodPressure: '0/0',
                    oxygenSat: 0
                };
                this.videoCallActive = false;
                this.sensorsConnected = false;
                
                this.initializeElements();
                this.attachEventListeners();
                this.createParticles();
                this.initializeVoiceRecognition();
                this.initializeCloudSync();
                this.startSensorSimulation();
                this.updateTranslations();
            }

            initializeElements() {
                // Navigation
                this.navTabs = document.querySelectorAll('.nav-tab');
                this.tabContents = document.querySelectorAll('.tab-content');
                
                // Patient form elements
                this.patientForm = document.getElementById('patientForm');
                this.patientSummary = document.getElementById('summaryContent');
                
                // Body diagram elements
                this.bodySvg = document.getElementById('bodySvg');
                this.selectedPartDisplay = document.getElementById('selectedPart');
                this.painScale = document.getElementById('painScale');
                this.painDisplay = document.getElementById('painDisplay');
                
                // Voice and symptoms elements
                this.voiceBtn = document.getElementById('voiceBtn');
                this.voiceText = document.getElementById('voiceText');
                this.voiceResult = document.getElementById('voiceResult');
                this.questionInput = document.getElementById('questionInput');
                this.analyzeBtn = document.getElementById('analyzeBtn');
                
                // AI elements
                this.confidenceFill = document.getElementById('confidenceFill');
                this.aiInsight = document.getElementById('aiInsight');
                
                // Response elements
                this.loading = document.getElementById('loading');
                this.loadingText = document.getElementById('loadingText');
                this.responseSection = document.getElementById('responseSection');
                this.responseContent = document.getElementById('responseContent');
                
                // Language selector
                this.languageSelect = document.getElementById('languageSelect');
            }

            attachEventListeners() {
                // Navigation tabs
                this.navTabs.forEach(tab => {
                    tab.addEventListener('click', (e) => this.switchTab(e.target.dataset.tab));
                });

                // Language selector
                this.languageSelect.addEventListener('change', (e) => {
                    this.changeLanguage(e.target.value);
                });
                
                // Patient form
                this.patientForm.addEventListener('input', () => this.updatePatientSummary());
                
                // Body type controls
                document.querySelectorAll('.body-type-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.switchBodyType(e.target.dataset.type));
                });
                
                // View controls
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.switchView(e.target.dataset.view));
                });
                
                // Body diagram
                this.bodySvg.addEventListener('click', (e) => {
                    if (e.target.classList.contains('body-part')) {
                        this.selectBodyPart(e.target);
                    }
                });
                
                // Pain scale
                this.painScale.addEventListener('input', (e) => {
                    this.updatePainLevel(e.target.value);
                });
                
                // Symptom tags
                document.querySelectorAll('.symptom-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => this.toggleSymptom(e.target));
                });
                
                // Voice recognition
                this.voiceBtn.addEventListener('click', () => this.toggleVoiceRecognition());
                
                // Analysis
                this.analyzeBtn.addEventListener('click', () => this.analyzeSymptoms());
                
                // AI real-time analysis
                this.questionInput.addEventListener('input', () => this.updateAIInsight());
            }

            createParticles() {
                const particlesContainer = document.getElementById('particles');
                for (let i = 0; i < 30; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.width = Math.random() * 15 + 3 + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                    particlesContainer.appendChild(particle);
                }
            }

            // Syst√®me de traduction
            changeLanguage(lang) {
                this.currentLanguage = lang;
                this.updateTranslations();
                
                // Sauvegarder la pr√©f√©rence
                localStorage.setItem('selectedLanguage', lang);
                
                // Mettre √† jour la reconnaissance vocale
                if (this.voiceRecognition) {
                    const langCodes = {
                        'fr': 'fr-FR',
                        'en': 'en-US',
                        'es': 'es-ES',
                        'de': 'de-DE',
                        'it': 'it-IT',
                        'ar': 'ar-SA'
                    };
                    this.voiceRecognition.lang = langCodes[lang] || 'fr-FR';
                }
            }

            updateTranslations() {
                const elements = document.querySelectorAll('[data-i18n]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-i18n');
                    if (translations[this.currentLanguage] && translations[this.currentLanguage][key]) {
                        element.textContent = translations[this.currentLanguage][key];
                    }
                });
                
                // Mettre √† jour les placeholders
                const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
                placeholderElements.forEach(element => {
                    const key = element.getAttribute('data-i18n-placeholder');
                    if (translations[this.currentLanguage] && translations[this.currentLanguage][key]) {
                        element.placeholder = translations[this.currentLanguage][key];
                    }
                });
            }

            // Navigation par onglets
            switchTab(tabName) {
                // Update nav buttons
                this.navTabs.forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.tab === tabName);
                });
                
                // Show corresponding content
                this.tabContents.forEach(content => {
                    content.classList.toggle('active', content.id === tabName);
                });
                
                // Initialiser le contenu sp√©cifique selon l'onglet
                switch(tabName) {
                    case 'timeline':
                        this.initializeTimeline();
                        break;
                    case 'sensors':
                        this.updateSensorDisplay();
                        break;
                    case 'ai':
                        this.updateAIStatus();
                        break;
                }
            }

            // Base de donn√©es m√©dicale
            initializeMedicalDB() {
                return {
                    diseases: [
                        {
                            name: "Hypertension art√©rielle",
                            symptoms: ["maux de t√™te", "vertiges", "fatigue", "vision trouble"],
                            treatments: ["ACE inhibiteurs", "B√™ta-bloquants", "Diur√©tiques"],
                            prevention: ["R√©gime pauvre en sel", "Exercice r√©gulier", "Gestion du stress"]
                        },
                        {
                            name: "Diab√®te type 2",
                            symptoms: ["soif excessive", "urination fr√©quente", "fatigue", "vision trouble"],
                            treatments: ["Metformine", "Insuline", "R√©gime alimentaire"],
                            prevention: ["Alimentation √©quilibr√©e", "Activit√© physique", "Contr√¥le du poids"]
                        },
                        {
                            name: "Migraine",
                            symptoms: ["mal de t√™te pulsatile", "naus√©es", "sensibilit√© lumi√®re", "aura"],
                            treatments: ["Triptans", "Anti-inflammatoires", "Pr√©vention"],
                            prevention: ["√âviter d√©clencheurs", "Sommeil r√©gulier", "Gestion stress"]
                        },
                        {
                            name: "Asthme",
                            symptoms: ["dyspn√©e", "sifflement", "toux", "oppression thoracique"],
                            treatments: ["Bronchodilatateurs", "Cortico√Ødes inhal√©s", "Antileucotrienes"],
                            prevention: ["√âviter allerg√®nes", "Traitement pr√©ventif", "√âducation th√©rapeutique"]
                        }
                    ],
                    medications: [
                        {
                            name: "Parac√©tamol",
                            dosage: "1g toutes les 6h max",
                            indications: ["Douleur", "Fi√®vre"],
                            contraindications: ["Insuffisance h√©patique s√©v√®re"],
                            interactions: ["Warfarine", "Alcool"]
                        },
                        {
                            name: "Ibuprof√®ne",
                            dosage: "400mg toutes les 8h",
                            indications: ["Inflammation", "Douleur", "Fi√®vre"],
                            contraindications: ["Ulc√®re gastrique", "Insuffisance r√©nale"],
                            interactions: ["Anticoagulants", "Lithium"]
                        }
                    ]
                };
            }

            // Recherche dans la base m√©dicale
            searchMedicalDB() {
                const query = document.getElementById('medicalSearch').value.toLowerCase();
                const results = document.getElementById('medicalResults');
                
                if (!query.trim()) {
                    results.innerHTML = '<div class="medical-item"><h4>üí° Entrez un terme de recherche</h4></div>';
                    return;
                }
                
                let findings = [];
                
                // Recherche dans les maladies
                this.medicalDatabase.diseases.forEach(disease => {
                    if (disease.name.toLowerCase().includes(query) || 
                        disease.symptoms.some(s => s.includes(query))) {
                        findings.push({
                            type: 'disease',
                            data: disease
                        });
                    }
                });
                
                // Recherche dans les m√©dicaments
                this.medicalDatabase.medications.forEach(med => {
                    if (med.name.toLowerCase().includes(query) || 
                        med.indications.some(i => i.toLowerCase().includes(query))) {
                        findings.push({
                            type: 'medication',
                            data: med
                        });
                    }
                });
                
                // Affichage des r√©sultats
                if (findings.length === 0) {
                    results.innerHTML = '<div class="medical-item"><h4>‚ùå Aucun r√©sultat trouv√©</h4><p>Essayez avec d\'autres termes de recherche</p></div>';
                    return;
                }
                
                results.innerHTML = findings.map(finding => {
                    if (finding.type === 'disease') {
                        const disease = finding.data;
                        return `
                            <div class="medical-item">
                                <h4>üè• ${disease.name}</h4>
                                <p><strong>Sympt√¥mes:</strong> ${disease.symptoms.join(', ')}</p>
                                <p><strong>Traitements:</strong> ${disease.treatments.join(', ')}</p>
                                <p><strong>Pr√©vention:</strong> ${disease.prevention.join(', ')}</p>
                            </div>
                        `;
                    } else {
                        const med = finding.data;
                        return `
                            <div class="medical-item">
                                <h4>üíä ${med.name}</h4>
                                <p><strong>Dosage:</strong> ${med.dosage}</p>
                                <p><strong>Indications:</strong> ${med.indications.join(', ')}</p>
                                <p><strong>Contre-indications:</strong> ${med.contraindications.join(', ')}</p>
                            </div>
                        `;
                    }
                }).join('');
            }

            // T√©l√©consultation
            startVideoCall() {
                this.videoCallActive = true;
                const container = document.getElementById('videoContainer');
                
                // Simulation d'une vid√©oconf√©rence
                container.innerHTML = `
                    <div style="color: white; text-align: center;">
                        <h3>üìπ Appel en cours...</h3>
                        <div style="background: #4caf50; color: white; padding: 10px; border-radius: 8px; margin: 20px 0;">
                            Dr. Marie Dubois connect√©e
                        </div>
                        <div style="font-size: 48px; margin: 20px 0;">üë©‚Äç‚öïÔ∏è</div>
                        <p>Qualit√©: HD ‚Ä¢ Connexion s√©curis√©e</p>
                        <div style="margin-top: 20px;">
                            <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; display: inline-block;">
                                üî¥ REC 00:${String(Math.floor(Math.random() * 60)).padStart(2, '0')}
                            </div>
                        </div>
                    </div>
                `;
                
                // Simuler une conversation
                setTimeout(() => {
                    this.simulateDocTorConversation();
                }, 3000);
            }

            simulateDocTorConversation() {
                const messages = [
                    "Dr. Dubois: Bonjour, comment puis-je vous aider aujourd'hui ?",
                    "Dr. Dubois: Je vois que vous avez d√©crit des sympt√¥mes de maux de t√™te...",
                    "Dr. Dubois: Depuis combien de temps avez-vous ces sympt√¥mes ?",
                    "Dr. Dubois: Avez-vous pris des m√©dicaments r√©cemment ?"
                ];
                
                let messageIndex = 0;
                const interval = setInterval(() => {
                    if (messageIndex < messages.length && this.videoCallActive) {
                        const container = document.getElementById('videoContainer');
                        const messageDiv = document.createElement('div');
                        messageDiv.style.cssText = `
                            position: absolute;
                            bottom: ${50 + messageIndex * 30}px;
                            left: 20px;
                            right: 20px;
                            background: rgba(0,0,0,0.8);
                            color: white;
                            padding: 10px;
                            border-radius: 8px;
                            font-size: 14px;
                        `;
                        messageDiv.textContent = messages[messageIndex];
                        container.appendChild(messageDiv);
                        messageIndex++;
                    } else {
                        clearInterval(interval);
                    }
                }, 4000);
            }

            stopVideoCall() {
                this.videoCallActive = false;
                const container = document.getElementById('videoContainer');
                container.innerHTML = `
                    <div class="video-placeholder">
                        <h3>üìπ Consultation termin√©e</h3>
                        <p>Dur√©e: 12 minutes ‚Ä¢ Enregistrement sauvegard√©</p>
                        <button class="video-btn start" onclick="medicalAssistant.downloadConsultation()" style="margin-top: 15px;">
                            üìÑ T√©l√©charger rapport
                        </button>
                    </div>
                `;
            }

            toggleMute() {
                // Simulation du mute
                const btn = event.target;
                if (btn.textContent.includes('Mute')) {
                    btn.textContent = 'üîá Unmute';
                    btn.style.background = '#f44336';
                } else {
                    btn.textContent = 'üé§ Mute';
                    btn.style.background = '#ff9800';
                }
            }

            downloadConsultation() {
                alert('üíæ Rapport de t√©l√©consultation t√©l√©charg√© avec succ√®s !');
            }

            // Suivi temporal
            initializeTimeline() {
                // Charger les donn√©es de sympt√¥mes depuis le stockage local
                const timelineData = JSON.parse(localStorage.getItem('symptomsTimeline') || '[]');
                
                // Cr√©er le graphique avec Chart.js simul√©
                this.createSymptomsChart(timelineData);
                this.updateTimelineDisplay(timelineData);
            }

            createSymptomsChart(data) {
                const canvas = document.getElementById('symptomsChart');
                const ctx = canvas.getContext('2d');
                
                // Simulation d'un graphique (normalement utiliserait Chart.js)
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Dessiner les axes
                ctx.strokeStyle = '#ccc';
                ctx.beginPath();
                ctx.moveTo(50, 50);
                ctx.lineTo(50, 180);
                ctx.lineTo(380, 180);
                ctx.stroke();
                
                // Dessiner les donn√©es de douleur
                if (data.length > 0) {
                    ctx.strokeStyle = '#f44336';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    
                    data.forEach((point, index) => {
                        const x = 50 + (index * 50);
                        const y = 180 - (point.pain * 13);
                        
                        if (index === 0) {
                            ctx.moveTo(x, y);
                        } else {
                            ctx.lineTo(x, y);
                        }
                        
                        // Dessiner les points
                        ctx.fillStyle = '#f44336';
                        ctx.fillRect(x-3, y-3, 6, 6);
                    });
                    ctx.stroke();
                }
                
                // Labels
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.fillText('Douleur (0-10)', 5, 30);
                ctx.fillText('Temps', 350, 195);
            }

            addSymptomEntry() {
                const pain = this.painLevel;
                const symptoms = this.selectedSymptoms;
                const description = this.questionInput.value;
                
                const entry = {
                    date: new Date(),
                    pain: pain,
                    symptoms: symptoms,
                    description: description,
                    bodyPart: this.selectedBodyPart
                };
                
                // Sauvegarder dans le timeline
                let timeline = JSON.parse(localStorage.getItem('symptomsTimeline') || '[]');
                timeline.unshift(entry);
                
                // Limiter √† 20 entr√©es
                if (timeline.length > 20) {
                    timeline = timeline.slice(0, 20);
                }
                
                localStorage.setItem('symptomsTimeline', JSON.stringify(timeline));
                
                // Mettre √† jour l'affichage
                this.initializeTimeline();
                
                alert('‚úÖ Entr√©e ajout√©e au suivi temporal');
            }

            updateTimelineDisplay(data) {
                const timeline = document.getElementById('symptomsTimeline');
                
                if (data.length === 0) {
                    timeline.innerHTML = `
                        <div class="timeline-item">
                            <h5>Aucune donn√©e</h5>
                            <p>Commencez √† enregistrer vos sympt√¥mes pour voir l'√©volution</p>
                        </div>
                    `;
                    return;
                }
                
                timeline.innerHTML = data.map(entry => {
                    const date = new Date(entry.date).toLocaleString();
                    return `
                        <div class="timeline-item">
                            <h5>${date}</h5>
                            <p><strong>Douleur:</strong> ${entry.pain}/10</p>
                            ${entry.bodyPart ? `<p><strong>Zone:</strong> ${entry.bodyPart}</p>` : ''}
                            ${entry.symptoms.length > 0 ? `<p><strong>Sympt√¥mes:</strong> ${entry.symptoms.join(', ')}</p>` : ''}
                            ${entry.description ? `<p><strong>Description:</strong> ${entry.description}</p>` : ''}
                        </div>
                    `;
                }).join('');
            }

            // Capteurs IoT
            startSensorSimulation() {
                // Simulation des donn√©es de capteurs
                setInterval(() => {
                    if (this.sensorsConnected) {
                        this.updateSensorData();
                    }
                }, 2000);
            }

            updateSensorData() {
                // Simulation de donn√©es r√©alistes
                this.sensorData.heartRate = Math.floor(Math.random() * 40 + 60); // 60-100 bpm
                this.sensorData.temperature = (Math.random() * 2 + 36.5).toFixed(1); // 36.5-38.5¬∞C
                this.sensorData.bloodPressure = `${Math.floor(Math.random() * 40 + 110)}/${Math.floor(Math.random() * 20 + 70)}`;
                this.sensorData.oxygenSat = Math.floor(Math.random() * 5 + 95); // 95-100%
                
                // Mise √† jour de l'affichage
                document.getElementById('heartRate').textContent = `${this.sensorData.heartRate} bpm`;
                document.getElementById('temperature').textContent = `${this.sensorData.temperature}¬∞C`;
                document.getElementById('bloodPressure').textContent = this.sensorData.bloodPressure;
                document.getElementById('oxygenSat').textContent = `${this.sensorData.oxygenSat}%`;
                
                // Tendances
                document.getElementById('heartTrend').textContent = this.sensorData.heartRate > 80 ? '‚ÜóÔ∏è √âlev√©' : '‚úÖ Normal';
                document.getElementById('tempTrend').textContent = this.sensorData.temperature > 37.5 ? 'üî• Fi√®vre' : '‚úÖ Normal';
                document.getElementById('pressureTrend').textContent = 'üìä Stable';
                document.getElementById('oxygenTrend').textContent = this.sensorData.oxygenSat > 97 ? '‚úÖ Excellent' : '‚ö†Ô∏è Surveiller';
            }

            updateSensorDisplay() {
                if (this.sensorsConnected) {
                    this.updateSensorData();
                } else {
                    // Afficher √©tat d√©connect√©
                    document.getElementById('heartRate').textContent = '--';
                    document.getElementById('temperature').textContent = '--';
                    document.getElementById('bloodPressure').textContent = '--';
                    document.getElementById('oxygenSat').textContent = '--';
                }
            }

            connectSensors() {
                this.sensorsConnected = !this.sensorsConnected;
                
                if (this.sensorsConnected) {
                    alert('üì± Capteurs connect√©s avec succ√®s !');
                    this.updateSensorData();
                } else {
                    alert('üì± Capteurs d√©connect√©s');
                    this.updateSensorDisplay();
                }
            }

            // Fonctions de connexion sp√©cifiques
            connectAppleWatch() {
                document.getElementById('appleWatchStatus').innerHTML = 'üü¢ Connect√©';
                document.getElementById('appleWatchStatus').style.color = '#4caf50';
                alert('‚åö Apple Watch connect√©e - Donn√©es biom√©triques synchronis√©es');
            }

            connectThermometer() {
                document.getElementById('thermometerStatus').innerHTML = 'üü¢ Connect√©';
                document.getElementById('thermometerStatus').style.color = '#4caf50';
                alert('üå°Ô∏è Thermom√®tre intelligent connect√©');
            }

            connectBPMonitor() {
                document.getElementById('bpMonitorStatus').innerHTML = 'üü¢ Connect√©';
                document.getElementById('bpMonitorStatus').style.color = '#4caf50';
                alert('ü©∫ Tensiom√®tre connect√©');
            }

            connectPillbox() {
                document.getElementById('pillboxStatus').innerHTML = 'üü¢ Connect√©';
                document.getElementById('pillboxStatus').style.color = '#4caf50';
                alert('üíä Pilulier intelligent connect√©');
            }

            viewSleepData() {
                alert('üò¥ Donn√©es de sommeil:\n‚Ä¢ Dur√©e: 7h 23min\n‚Ä¢ Efficacit√©: 89%\n‚Ä¢ Phases profondes: 1h 45min\n‚Ä¢ R√©veils: 3');
            }

            viewActivityData() {
                alert('üèÉ Donn√©es d\'activit√©:\n‚Ä¢ Pas: 8,547\n‚Ä¢ Calories: 287 kcal\n‚Ä¢ Distance: 6.2 km\n‚Ä¢ Temps actif: 2h 15min');
            }

            // IA avanc√©e
            updateAIInsight() {
                const text = this.questionInput.value;
                const confidence = Math.min(text.length * 2, 100);
                
                this.confidenceFill.style.width = confidence + '%';
                
                if (text.length < 10) {
                    this.aiInsight.textContent = 'En attente d\'analyse...';
                } else if (text.length < 50) {
                    this.aiInsight.textContent = 'Analyse pr√©liminaire en cours...';
                } else {
                    // Analyse simple bas√©e sur des mots-cl√©s
                    const keywords = {
                        'urgence': 'D√©tection de mots-cl√©s d\'urgence - √âvaluation prioritaire',
                        'douleur': 'Analyse de sympt√¥mes douloureux - Pattern reconnu',
                        'fi√®vre': 'Syndrome infectieux possible - Corr√©lation d√©tect√©e',
                        'mal de t√™te': 'C√©phal√©es analys√©es - Multiple causes possibles'
                    };
                    
                    let insight = 'Analyse approfondie termin√©e - ';
                    let found = false;
                    
                    for (const [keyword, message] of Object.entries(keywords)) {
                        if (text.toLowerCase().includes(keyword)) {
                            insight = message;
                            found = true;
                            break;
                        }
                    }
                    
                    if (!found) {
                        insight += 'Sympt√¥mes complexes n√©cessitant √©valuation m√©dicale';
                    }
                    
                    this.aiInsight.textContent = insight;
                }
            }

            updateAIStatus() {
                // Mise √† jour du statut IA
                const confidence = Math.floor(Math.random() * 20 + 80); // 80-100%
                this.confidenceFill.style.width = confidence + '%';
            }

            // Cloud sync
            initializeCloudSync() {
                // Simulation de la synchronisation cloud
                setInterval(() => {
                    this.simulateCloudSync();
                }, 30000); // Sync toutes les 30 secondes
            }

            simulateCloudSync() {
                const status = document.getElementById('cloudStatus');
                const now = new Date().toLocaleTimeString();
                
                // Animation de sync
                status.innerHTML = `
                    <div class="status-indicator" style="background: #ff9800;"></div>
                    <span>Synchronisation...</span>
                `;
                
                setTimeout(() => {
                    status.innerHTML = `
                        <div class="status-indicator"></div>
                        <span>Sync: ${now}</span>
                    `;
                }, 2000);
            }

            manualSync() {
                const btn = event.target;
                btn.textContent = 'üîÑ Synchronisation...';
                btn.disabled = true;
                
                setTimeout(() => {
                    btn.textContent = '‚úÖ Synchronis√©';
                    setTimeout(() => {
                        btn.textContent = 'üîÑ Synchroniser';
                        btn.disabled = false;
                    }, 2000);
                }, 3000);
                
                // Simuler la sauvegarde des donn√©es
                const cloudData = {
                    patient: this.patient,
                    consultations: this.consultationHistory,
                    sensors: this.sensorData,
                    timeline: JSON.parse(localStorage.getItem('symptomsTimeline') || '[]')
                };
                
                localStorage.setItem('cloudBackup', JSON.stringify(cloudData));
            }

            // M√©thodes existantes mises √† jour
            updatePatientSummary() {
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const birthDate = document.getElementById('birthDate').value;
                const gender = document.getElementById('gender').value;
                const weight = document.getElementById('weight').value;
                const height = document.getElementById('height').value;
                
                let summary = '';
                if (firstName || lastName) {
                    summary += `<div><strong>Patient:</strong> ${firstName} ${lastName}</div>`;
                }
                
                if (birthDate) {
                    const age = this.calculateAge(birthDate);
                    summary += `<div><strong>√Çge:</strong> ${age} ans</div>`;
                }
                
                if (gender) {
                    summary += `<div><strong>Sexe:</strong> ${gender}</div>`;
                }
                
                if (weight && height) {
                    const bmi = (weight / ((height/100) ** 2)).toFixed(1);
                    summary += `<div><strong>IMC:</strong> ${bmi}</div>`;
                }
                
                this.patientSummary.innerHTML = summary || 'Remplissez les informations ci-dessus';
                
                // Mise √† jour de l'objet patient
                this.patient = {
                    firstName,
                    lastName,
                    birthDate,
                    age: birthDate ? this.calculateAge(birthDate) : null,
                    gender,
                    weight: weight ? parseFloat(weight) : null,
                    height: height ? parseFloat(height) : null,
                    allergies: document.getElementById('allergies').value,
                    medications: document.getElementById('medications').value,
                    medicalHistory: document.getElementById('medicalHistory').value
                };
            }

            calculateAge(birthDate) {
                const birth = new Date(birthDate);
                const today = new Date();
                let age = today.getFullYear() - birth.getFullYear();
                const monthDiff = today.getMonth() - birth.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                    age--;
                }
                
                return age;
            }

            switchBodyType(type) {
                this.currentBodyType = type;
                
                document.querySelectorAll('.body-type-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.type === type);
                });
                
                this.updateBodyDisplay();
            }

            switchView(view) {
                this.currentView = view;
                
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.view === view);
                });
                
                this.updateBodyDisplay();
            }

            updateBodyDisplay() {
                document.querySelectorAll('.body-view').forEach(view => {
                    view.style.display = 'none';
                });
                
                const viewId = `${this.currentBodyType}-${this.currentView}`;
                const currentView = document.getElementById(viewId);
                if (currentView) {
                    currentView.style.display = 'block';
                } else {
                    const faceView = document.getElementById(`${this.currentBodyType}-face`);
                    if (faceView) {
                        faceView.style.display = 'block';
                    }
                }
                
                this.clearBodySelection();
            }

            clearBodySelection() {
                document.querySelectorAll('.body-part').forEach(part => {
                    part.classList.remove('selected');
                });
                this.selectedBodyPart = '';
                this.selectedPartDisplay.textContent = '';
            }

            selectBodyPart(element) {
                this.clearBodySelection();
                
                element.classList.add('selected');
                this.selectedBodyPart = element.dataset.part;
                this.selectedPartDisplay.textContent = `Zone s√©lectionn√©e : ${this.selectedBodyPart}`;
            }

            updatePainLevel(level) {
                this.painLevel = level;
                const emojis = ['üòä', 'üôÇ', 'üòê', 'üòï', 'üòü', 'üò£', 'üòñ', 'üò´', 'üò©', 'üò±', 'üÜò'];
                const colors = ['#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722', '#f44336', '#e91e63', '#9c27b0', '#673ab7'];
                
                this.painDisplay.textContent = `${emojis[level]} ${level}/10`;
                this.painDisplay.style.color = colors[level];
                
                if (level >= 8) {
                    this.painDisplay.style.animation = 'pulse 0.5s ease-in-out infinite';
                } else {
                    this.painDisplay.style.animation = 'none';
                }
            }

            toggleSymptom(element) {
                const symptom = element.dataset.symptom;
                
                if (element.classList.contains('selected')) {
                    element.classList.remove('selected');
                    this.selectedSymptoms = this.selectedSymptoms.filter(s => s !== symptom);
                } else {
                    element.classList.add('selected');
                    this.selectedSymptoms.push(symptom);
                }
                
                this.updateSymptomText();
            }

            updateSymptomText() {
                const currentText = this.questionInput.value;
                const symptomsText = this.selectedSymptoms.join(', ');
                
                if (symptomsText && !currentText.includes(symptomsText)) {
                    this.questionInput.value = currentText ? `${currentText}\n\nSympt√¥mes s√©lectionn√©s: ${symptomsText}` : `Sympt√¥mes s√©lectionn√©s: ${symptomsText}`;
                }
            }

            initializeVoiceRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.voiceRecognition = new SpeechRecognition();
                    this.voiceRecognition.lang = 'fr-FR';
                    this.voiceRecognition.continuous = false;
                    this.voiceRecognition.interimResults = true;

                    this.voiceRecognition.onstart = () => {
                        this.voiceBtn.classList.add('recording');
                        this.voiceText.textContent = 'üî¥ Parlez maintenant...';
                        this.voiceResult.textContent = '√âcoute en cours...';
                    };

                    this.voiceRecognition.onresult = (event) => {
                        let transcript = '';
                        for (let i = 0; i < event.results.length; i++) {
                            transcript += event.results[i][0].transcript;
                        }
                        
                        if (event.results[event.results.length - 1].isFinal) {
                            this.questionInput.value = transcript;
                            this.voiceResult.textContent = `Reconnu: "${transcript}"`;
                            this.updateAIInsight();
                        } else {
                            this.voiceResult.textContent = `En cours: "${transcript}"`;
                        }
                    };

                    this.voiceRecognition.onerror = (event) => {
                        this.voiceResult.textContent = `Erreur: ${event.error}`;
                        this.resetVoiceButton();
                    };

                    this.voiceRecognition.onend = () => {
                        this.resetVoiceButton();
                    };
                } else {
                    this.voiceBtn.style.display = 'none';
                    document.querySelector('.voice-controls').innerHTML = '<p>üö´ Reconnaissance vocale non support√©e</p>';
                }
            }

            toggleVoiceRecognition() {
                if (this.voiceRecognition) {
                    if (this.voiceBtn.classList.contains('recording')) {
                        this.voiceRecognition.stop();
                    } else {
                        this.voiceRecognition.start();
                    }
                }
            }

            resetVoiceButton() {
                this.voiceBtn.classList.remove('recording');
                this.voiceText.textContent = 'üé§ Cliquez et d√©crivez vos sympt√¥mes';
            }

            async analyzeSymptoms() {
                if (!this.validateInput()) return;
                
                this.showLoading();
                
                try {
                    await this.simulateAdvancedAnalysis();
                    const response = this.generateUltimateResponse();
                    this.showResponse(response);
                } catch (error) {
                    this.showError(error.message);
                } finally {
                    this.hideLoading();
                }
            }

            validateInput() {
                const question = this.questionInput.value.trim();
                
                if (!question && !this.selectedBodyPart && this.selectedSymptoms.length === 0) {
                    alert('‚ö†Ô∏è Veuillez d√©crire vos sympt√¥mes');
                    return false;
                }
                
                if (!this.patient.firstName || !this.patient.lastName) {
                    alert('‚ö†Ô∏è Veuillez remplir les informations patient');
                    return false;
                }
                
                return true;
            }

            async simulateAdvancedAnalysis() {
                const steps = [
                    'Initialisation IA m√©dicale v4.0...',
                    'Chargement base de donn√©es mondiale...',
                    'Analyse syntaxique des sympt√¥mes...',
                    'Corr√©lation avec capteurs IoT...',
                    'Machine Learning - Pattern matching...',
                    'Consultation r√©seau neuronal sp√©cialis√©...',
                    'Analyse pr√©dictive - √âvolution probable...',
                    'G√©n√©ration recommandations personnalis√©es...',
                    'V√©rification interactions m√©dicamenteuses...',
                    'Finalisation rapport multilingue...'
                ];

                for (let i = 0; i < steps.length; i++) {
                    this.loadingText.textContent = steps[i];
                    await new Promise(resolve => setTimeout(resolve, 800));
                }
            }

            generateUltimateResponse() {
                const consultation = {
                    date: new Date(),
                    patient: this.patient,
                    symptoms: {
                        description: this.questionInput.value,
                        selectedSymptoms: this.selectedSymptoms,
                        bodyPart: this.selectedBodyPart,
                        painLevel: this.painLevel
                    },
                    sensors: this.sensorData,
                    aiConfidence: Math.floor(Math.random() * 20 + 80)
                };

                if (this.detectEmergency()) {
                    return this.generateEmergencyResponse(consultation);
                }

                return this.generateAdvancedAnalysisResponse(consultation);
            }

            detectEmergency() {
                const emergencyKeywords = [
                    'difficult√© respirer', 'essoufflement', 'souffle court',
                    'douleur thoracique', 'mal poitrine', 'serrement poitrine',
                    'perte conscience', '√©vanouissement', 'syncope',
                    'saignement abondant', 'h√©morragie',
                    'paralysie', 'engourdissement soudain',
                    'convulsion', 'crise √©pilepsie'
                ];
                
                const questionLower = this.questionInput.value.toLowerCase();
                const criticalPain = this.painLevel >= 9;
                const abnormalVitals = this.sensorData.heartRate > 120 || 
                                     parseFloat(this.sensorData.temperature) > 39;
                
                return criticalPain || abnormalVitals ||
                       emergencyKeywords.some(keyword => questionLower.includes(keyword));
            }

            generateEmergencyResponse(consultation) {
                return `
                    <div class="emergency-alert">
                        <h2>üö® URGENCE M√âDICALE D√âTECT√âE</h2>
                        <p><strong>ALERTE IA: Situation n√©cessitant une intervention m√©dicale imm√©diate</strong></p>
                        <div style="margin: 20px 0;">
                            <button onclick="window.open('tel:15')" style="background: white; color: #f44336; border: none; padding: 15px 25px; border-radius: 25px; margin: 5px; font-weight: bold; cursor: pointer;">üìû SAMU (15)</button>
                            <button onclick="window.open('tel:112')" style="background: white; color: #f44336; border: none; padding: 15px 25px; border-radius: 25px; margin: 5px; font-weight: bold; cursor: pointer;">üÜò Urgences (112)</button>
                        </div>
                    </div>
                    
                    <div style="background: #ffebee; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h3>ü§ñ Analyse IA Critique</h3>
                        <p><strong>Niveau de confiance:</strong> ${consultation.aiConfidence}%</p>
                        <p><strong>Facteurs d√©clenchants:</strong></p>
                        <ul>
                            ${consultation.symptoms.painLevel >= 9 ? '<li>üî¥ Douleur critique (9-10/10)</li>' : ''}
                            ${this.sensorData.heartRate > 120 ? '<li>üî¥ Tachycardie d√©tect√©e</li>' : ''}
                            ${parseFloat(this.sensorData.temperature) > 39 ? '<li>üî¥ Hyperthermie s√©v√®re</li>' : ''}
                            <li>üî¥ Mots-cl√©s d'urgence identifi√©s par IA</li>
                        </ul>
                    </div>
                    
                    ${this.generatePatientInfo(consultation)}
                    ${this.generateVitalSigns(consultation)}
                    ${this.generateEmergencyInstructions()}
                `;
            }

            generateAdvancedAnalysisResponse(consultation) {
                return `
                    <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h3>ü§ñ Analyse IA Avanc√©e v4.0</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <p><strong>Confiance diagnostique:</strong> ${consultation.aiConfidence}%</p>
                                <div class="confidence-meter">
                                    <div class="confidence-fill" style="width: ${consultation.aiConfidence}%"></div>
                                </div>
                            </div>
                            <div>
                                <p><strong>Algorithme utilis√©:</strong> Deep Learning Neural Network</p>
                                <p><strong>Base de donn√©es:</strong> 2.1M cas analys√©s</p>
                            </div>
                        </div>
                    </div>
                    
                    ${this.generatePatientInfo(consultation)}
                    ${this.generateVitalSigns(consultation)}
                    ${this.generateAIDiagnosis(consultation)}
                    ${this.generateMLPredictions(consultation)}
                    ${this.generatePersonalizedRecommendations(consultation)}
                    ${this.generateTimelineIntegration(consultation)}
                    ${this.generateFollowUpPlan(consultation)}
                `;
            }

            generatePatientInfo(consultation) {
                const bmi = consultation.patient.weight && consultation.patient.height 
                    ? (consultation.patient.weight / ((consultation.patient.height/100) ** 2)).toFixed(1)
                    : null;
                
                return `
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>üë§ Profil Patient Complet</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                            <div>
                                <p><strong>Identit√©:</strong> ${consultation.patient.firstName} ${consultation.patient.lastName}</p>
                                <p><strong>√Çge:</strong> ${consultation.patient.age || 'Non sp√©cifi√©'} ans</p>
                                <p><strong>Sexe:</strong> ${consultation.patient.gender || 'Non sp√©cifi√©'}</p>
                            </div>
                            <div>
                                ${consultation.patient.weight ? `<p><strong>Poids:</strong> ${consultation.patient.weight} kg</p>` : ''}
                                ${consultation.patient.height ? `<p><strong>Taille:</strong> ${consultation.patient.height} cm</p>` : ''}
                                ${bmi ? `<p><strong>IMC:</strong> ${bmi} kg/m¬≤ ${this.getBMICategory(bmi)}</p>` : ''}
                            </div>
                            <div>
                                ${consultation.patient.allergies ? `<p><strong>Allergies:</strong> ${consultation.patient.allergies}</p>` : ''}
                                ${consultation.patient.medications ? `<p><strong>Traitements:</strong> ${consultation.patient.medications}</p>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }

            getBMICategory(bmi) {
                const value = parseFloat(bmi);
                if (value < 18.5) return '(Insuffisance pond√©rale)';
                if (value < 25) return '(Normal)';
                if (value < 30) return '(Surpoids)';
                return '(Ob√©sit√©)';
            }

            generateVitalSigns(consultation) {
                return `
                    <div style="background: white; padding: 20px; border-radius: 12px; margin: 15px 0; border: 2px solid #4caf50;">
                        <h4>üìä Signes Vitaux IoT</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #f44336;">‚ù§Ô∏è</div>
                                <div><strong>${consultation.sensors.heartRate} bpm</strong></div>
                                <div style="font-size: 12px; color: ${consultation.sensors.heartRate > 100 ? '#f44336' : '#4caf50'};">
                                    ${consultation.sensors.heartRate > 100 ? '√âlev√©' : 'Normal'}
                                </div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #ff9800;">üå°Ô∏è</div>
                                <div><strong>${consultation.sensors.temperature}¬∞C</strong></div>
                                <div style="font-size: 12px; color: ${parseFloat(consultation.sensors.temperature) > 37.5 ? '#f44336' : '#4caf50'};">
                                    ${parseFloat(consultation.sensors.temperature) > 37.5 ? 'Fi√®vre' : 'Normal'}
                                </div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #2196F3;">ü©∫</div>
                                <div><strong>${consultation.sensors.bloodPressure}</strong></div>
                                <div style="font-size: 12px; color: #4caf50;">Tension</div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 2em; color: #9c27b0;">ü´Å</div>
                                <div><strong>${consultation.sensors.oxygenSat}%</strong></div>
                                <div style="font-size: 12px; color: ${consultation.sensors.oxygenSat < 95 ? '#f44336' : '#4caf50'};">
                                    SpO2 ${consultation.sensors.oxygenSat < 95 ? 'Bas' : 'Normal'}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            generateAIDiagnosis(consultation) {
                const symptoms = consultation.symptoms;
                let primaryDiagnosis = "Syndrome g√©n√©ral non sp√©cifique";
                let probability = 75;
                
                // Logique d'IA simplifi√©e
                if (symptoms.selectedSymptoms.includes('mal de t√™te') || symptoms.bodyPart === 't√™te') {
                    primaryDiagnosis = "C√©phal√©e primaire (tension/migraine)";
                    probability = 85;
                } else if (symptoms.selectedSymptoms.includes('fi√®vre') || parseFloat(this.sensorData.temperature) > 37.5) {
                    primaryDiagnosis = "Syndrome infectieux viral probable";
                    probability = 80;
                } else if (symptoms.selectedSymptoms.includes('fatigue')) {
                    primaryDiagnosis = "Syndrome de fatigue g√©n√©ralis√©e";
                    probability = 70;
                }
                
                return `
                    <div style="background: white; padding: 20px; border-radius: 12px; margin: 15px 0; border-left: 5px solid #2196F3;">
                        <h4>üß† Diagnostic IA Principal</h4>
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <h5>${primaryDiagnosis}</h5>
                            <div style="margin: 10px 0;">
                                <div>Probabilit√©: ${probability}%</div>
                                <div class="confidence-meter" style="margin: 5px 0;">
                                    <div class="confidence-fill" style="width: ${probability}%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <h5>üéØ Diagnostics diff√©rentiels</h5>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px;">
                                <strong>Hypoth√®se secondaire:</strong><br>
                                R√©action de stress/anxi√©t√© (15%)
                            </div>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px;">
                                <strong>√Ä √©liminer:</strong><br>
                                Pathologie organique sous-jacente (10%)
                            </div>
                        </div>
                    </div>
                `;
            }

            generateMLPredictions(consultation) {
                return `
                    <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>üîÆ Pr√©dictions Machine Learning</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>üìà √âvolution probable (48h)</h5>
                                <ul style="margin-left: 20px;">
                                    <li>üü¢ Am√©lioration graduelle (65%)</li>
                                    <li>üü° Stagnation sympt√¥mes (25%)</li>
                                    <li>üî¥ Aggravation (10%)</li>
                                </ul>
                            </div>
                            <div>
                                <h5>‚ö†Ô∏è Facteurs de risque</h5>
                                <ul style="margin-left: 20px;">
                                    <li>√Çge: ${consultation.patient.age > 65 ? '√âlev√©' : 'Faible'}</li>
                                    <li>Ant√©c√©dents: ${consultation.patient.medicalHistory ? '√Ä surveiller' : 'Favorables'}</li>
                                    <li>Traitements: ${consultation.patient.medications ? 'Interactions possibles' : 'Aucun'}</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>ü§ñ Recommandations IA Personnalis√©es</h5>
                            <p><strong>Algorithme recommande:</strong> Surveillance active avec r√©√©valuation dans 24-48h</p>
                            <p><strong>Seuil d'alerte:</strong> Aggravation de 2 points sur √©chelle douleur OU nouveaux sympt√¥mes</p>
                        </div>
                    </div>
                `;
            }

            generatePersonalizedRecommendations(consultation) {
                return `
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>üí° Recommandations Personnalis√©es</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>üè† Mesures imm√©diates</h5>
                                <ul style="margin-left: 20px;">
                                    <li>üíß Hydratation: 2-2.5L/jour (surveillance IoT)</li>
                                    <li>üò¥ Repos: 8-9h sommeil (tracker connect√©)</li>
                                    <li>üå°Ô∏è Surveillance temp√©rature: automatique</li>
                                    <li>üì± Monitoring continu via capteurs</li>
                                </ul>
                            </div>
                            <div>
                                <h5>üíä Th√©rapeutique</h5>
                                <ul style="margin-left: 20px;">
                                    ${consultation.symptoms.painLevel >= 4 ? '<li>Parac√©tamol 1g/6h si douleur</li>' : ''}
                                    ${parseFloat(this.sensorData.temperature) > 37.5 ? '<li>Antipyr√©tique si fi√®vre > 38.5¬∞C</li>' : ''}
                                    <li>üö´ √âviter anti-inflammatoires (sans avis m√©dical)</li>
                                    <li>üìä Suivi via pilulier connect√©</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>üîî Alertes Intelligentes Configur√©es</h5>
                            <p>‚úÖ Surveillance automatique des signes vitaux</p>
                            <p>‚úÖ Rappels de prise m√©dicamenteuse</p>
                            <p>‚úÖ Alerte si d√©gradation des param√®tres</p>
                            <p>‚úÖ Synchronisation avec √©quipe m√©dicale</p>
                        </div>
                    </div>
                `;
            }

            generateTimelineIntegration(consultation) {
                return `
                    <div style="background: white; padding: 20px; border-radius: 12px; margin: 15px 0; border: 2px solid #9c27b0;">
                        <h4>üìà Int√©gration Suivi Temporal</h4>
                        
                        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <p><strong>üìä Cette consultation a √©t√© automatiquement ajout√©e √† votre timeline</strong></p>
                            <p>‚Ä¢ Donn√©es sympt√¥mes: Int√©gr√©es</p>
                            <p>‚Ä¢ Capteurs IoT: Synchronis√©s</p>
                            <p>‚Ä¢ √âvolution: Track√©e en temps r√©el</p>
                        </div>
                        
                        <button onclick="medicalAssistant.switchTab('timeline')" style="background: #9c27b0; color: white; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; margin: 10px 5px;">
                            üìà Voir timeline compl√®te
                        </button>
                        <button onclick="medicalAssistant.exportTimelineReport()" style="background: #4caf50; color: white; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; margin: 10px 5px;">
                            üìÑ Export rapport √©volution
                        </button>
                    </div>
                `;
            }

            generateFollowUpPlan(consultation) {
                return `
                    <div style="background: #e3f2fd; padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <h4>üìÖ Plan de Suivi Intelligent</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>ü§ñ Surveillance IA</h5>
                                <ul style="margin-left: 20px;">
                                    <li>üì± Monitoring continu 24/7</li>
                                    <li>üîî Alertes intelligentes configur√©es</li>
                                    <li>üìä Analyse des tendances en temps r√©el</li>
                                    <li>üîÑ Sync automatique avec cloud m√©dical</li>
                                </ul>
                            </div>
                            <div>
                                <h5>üë®‚Äç‚öïÔ∏è Consultations programm√©es</h5>
                                <ul style="margin-left: 20px;">
                                    <li>üìû T√©l√©consultation J+2 si persistance</li>
                                    <li>üè• Consultation physique si aggravation</li>
                                    <li>ü©∫ Bilan compl√©mentaire si n√©cessaire</li>
                                    <li>üë• Coordination √©quipe soignante</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>üö® Seuils d'Alerte Configur√©s</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div>Douleur > 8/10: <span style="color: #f44336; font-weight: bold;">URGENT</span></div>
                                <div>Fi√®vre > 39¬∞C: <span style="color: #ff9800; font-weight: bold;">ALERTE</span></div>
                                <div>FC > 120 bpm: <span style="color: #ff9800; font-weight: bold;">SURVEILLANCE</span></div>
                                <div>SpO2 < 95%: <span style="color: #f44336; font-weight: bold;">URGENT</span></div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="medicalAssistant.switchTab('teleconsult')" style="background: #2196F3; color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; margin: 5px;">
                                üìπ Programmer t√©l√©consultation
                            </button>
                            <button onclick="medicalAssistant.setupSmartAlerts()" style="background: #ff9800; color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; margin: 5px;">
                                üîî Configurer alertes
                            </button>
                        </div>
                    </div>
                `;
            }

            generateEmergencyInstructions() {
                return `
                    <div style="background: #ffebee; padding: 20px; border-radius: 12px; margin: 15px 0; border: 3px solid #f44336;">
                        <h4>üÜò Instructions d'Urgence</h4>
                        
                        <div style="background: #f44336; color: white; padding: 15px; border-radius: 8px; margin: 15px 0; text-align: center;">
                            <h5>ACTIONS IMM√âDIATES REQUISES</h5>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5>üìû Appels d'urgence</h5>
                                <ul style="margin-left: 20px;">
                                    <li><strong>SAMU: 15</strong> (Urgences m√©dicales)</li>
                                    <li><strong>Pompiers: 18</strong> (Secours g√©n√©ral)</li>
                                    <li><strong>Urgences: 112</strong> (Num√©ro europ√©en)</li>
                                    <li><strong>Centre antipoison: 01 40 05 48 48</strong></li>
                                </ul>
                            </div>
                            <div>
                                <h5>üè• H√¥pitaux les plus proches</h5>
                                <ul style="margin-left: 20px;">
                                    <li>CHU H√¥pital Central - 2.3 km</li>
                                    <li>Clinique Saint-Vincent - 3.7 km</li>
                                    <li>H√¥pital Universitaire - 5.1 km</li>
                                    <li>Service d'urgences 24/7</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h5>‚ö° En attendant les secours</h5>
                            <ul style="margin-left: 20px;">
                                <li>üõë Ne prenez aucun m√©dicament</li>
                                <li>üòå Restez calme et en position de s√©curit√©</li>
                                <li>üì± Gardez le t√©l√©phone √† port√©e</li>
                                <li>üìã Pr√©parez liste m√©dicaments/allergies</li>
                                <li>üë• Pr√©venez un proche si possible</li>
                                <li>üö™ D√©verrouillez l'acc√®s au domicile</li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            exportTimelineReport() {
                alert('üìä Rapport d\'√©volution temporelle g√©n√©r√© et t√©l√©charg√© !');
            }

            setupSmartAlerts() {
                alert('üîî Alertes intelligentes configur√©es avec succ√®s !');
            }

            showLoading() {
                this.analyzeBtn.disabled = true;
                this.loading.classList.add('show');
                this.responseSection.classList.remove('show');
            }

            hideLoading() {
                this.analyzeBtn.disabled = false;
                this.loading.classList.remove('show');
            }

            showResponse(response) {
                this.responseContent.innerHTML = response;
                this.responseSection.classList.add('show');
                
                setTimeout(() => {
                    this.responseSection.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 300);
            }

            showError(message) {
                this.responseContent.innerHTML = `
                    <div style="color: #d32f2f; background: #ffebee; padding: 20px; border-radius: 15px;">
                        <h4>‚ùå Erreur lors de l'analyse</h4>
                        <p>${message}</p>
                    </div>
                `;
                this.responseSection.classList.add('show');
            }
        }

        // Fonctions globales
        function searchMedicalDB() {
            medicalAssistant.searchMedicalDB();
        }

        function startVideoCall() {
            medicalAssistant.startVideoCall();
        }

        function stopVideoCall() {
            medicalAssistant.stopVideoCall();
        }

        function toggleMute() {
            medicalAssistant.toggleMute();
        }

        function addSymptomEntry() {
            medicalAssistant.addSymptomEntry();
        }

        function connectSensors() {
            medicalAssistant.connectSensors();
        }

        function connectAppleWatch() {
            medicalAssistant.connectAppleWatch();
        }

        function connectThermometer() {
            medicalAssistant.connectThermometer();
        }

        function connectBPMonitor() {
            medicalAssistant.connectBPMonitor();
        }

        function connectPillbox() {
            medicalAssistant.connectPillbox();
        }

        function viewSleepData() {
            medicalAssistant.viewSleepData();
        }

        function viewActivityData() {
            medicalAssistant.viewActivityData();
        }

        function manualSync() {
            medicalAssistant.manualSync();
        }

        function exportToPDF() {
            const content = document.getElementById('responseContent').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Rapport M√©dical IA v4.0 - ${new Date().toLocaleDateString('fr-FR')}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        h3, h4, h5 { color: #1976D2; }
                        .emergency-alert { background: #ffebee; padding: 20px; border: 2px solid #f44336; }
                        .confidence-meter { background: #e0e0e0; height: 8px; border-radius: 4px; margin: 10px 0; }
                        .confidence-fill { height: 100%; background: linear-gradient(90deg, #f44336, #ff9800, #4caf50); }
                    </style>
                </head>
                <body>
                    <h1>üè• Rapport de Consultation M√©dicale IA v4.0</h1>
                    <p><strong>Date:</strong> ${new Date().toLocaleString('fr-FR')}</p>
                    <p><strong>Version:</strong> Assistant M√©dical IA Ultimate 4.0</p>
                    <hr>
                    ${content}
                    <hr>
                    <p style="font-size: 12px; color: #666;">
                        Ce rapport a √©t√© g√©n√©r√© par l'Assistant M√©dical IA v4.0 avec technologies avanc√©es:
                        Machine Learning, IoT Integration, Cloud Sync, Telemedicine Platform.
                        Il ne remplace pas un diagnostic m√©dical professionnel.
                    </p>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function saveToHistory() {
            medicalAssistant.manualSync();
            alert('üíæ Consultation sauvegard√©e dans l\'historique et synchronis√©e avec le cloud !');
        }

        // Initialisation
        let medicalAssistant;
        document.addEventListener('DOMContentLoaded', () => {
            medicalAssistant = new MedicalAssistantV4();
            
            // Charger la langue sauvegard√©e
            const savedLanguage = localStorage.getItem('selectedLanguage');
            if (savedLanguage) {
                document.getElementById('languageSelect').value = savedLanguage;
                medicalAssistant.changeLanguage(savedLanguage);
            }
        });
